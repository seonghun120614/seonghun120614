---
layout: post
title:  3. Spring Boot Custom Property
date:   2025-06-09 15:57:34 +0900
categories: Java Spring
---

<!--more-->

ì–´í”Œë¦¬ì¼€ì´ì…˜ ì •ë³´ë¥¼ properties ì—ì„œ key-value ë¡œ ì§€ì •í•  ìˆ˜ ìˆëŠ” property ëŠ” ë‘ ì¢…ë¥˜ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤:

- built-in property: Spring Boot ì—ì„œ ìë™ìœ¼ë¡œ ì œê³µí•˜ëŠ” property
- custom property: ì‚¬ìš©ìê°€ ì„ì˜ë¡œ ì •í•˜ëŠ” property, í•„ìš”í•œ ë§Œí¼ ì‚¬ìš©ì´ ê°€ëŠ¥

ì´ì „ê¹Œì§€ëŠ” built-in property ë“¤ì„ ë³´ì•˜ì§€ë§Œ, ì´ì œë¶€í„°ëŠ” custom property ë“¤ì„ ë³¸ë‹¤.

## ğŸ“‚ ëª©ì°¨
- [@ConfigurationProperties ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ìŠ¤í…€ í”„ë¡œí¼í‹° ì •ì˜](#configurationproperties-ë¥¼-ì‚¬ìš©í•˜ì—¬-ì»¤ìŠ¤í…€-í”„ë¡œí¼í‹°-ì •ì˜)
- [@EnableConfigurationProperties ë¡œ Bean ë“±ë¡í•˜ê¸°](#enableconfigurationproperties-ë¡œ-bean-ë“±ë¡í•˜ê¸°)

---

## ğŸ“š ë³¸ë¬¸

ì•ì„œì„œ Environment ì¸ìŠ¤í„´ìŠ¤ì— ë°”ì¸ë”© ë˜ëŠ” í”„ë¡œí¼í‹°ë“¤ì„ ì¶œë ¥í•´ë³´ì•˜ëŠ”ë° Environment ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìë™ì£¼ì…(`@Autowired`)í•˜ê³  í”„ë¡œí¼í‹° ê°’ë“¤ì„ ì½ê³  ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì–´ë””ì„œë“  Environment ë¥¼ ì£¼ì… ë°›ì•„ì„œ í”„ë¡œí¼í‹°ë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆë‹¤.

ì—¬ê¸°ì„œ Environment ëŠ” ëŸ°íƒ€ì„ì— í•œí•´ì„œë§Œ ì¡´ì¬ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤, ë¹ˆì´ë‹¤. ì´ë ‡ë“¯ properties ë¥¼ íŒŒì¼ë¡œ ì„ ì–¸í•˜ì—¬ Env ë¡œ ê°€ì ¸ì˜¤ë©´ í¸ë¦¬í•˜ì§€ë§Œ ëª‡ ê°€ì§€ ë‹¨ì ì´ ìˆë‹¤:

- í”„ë¡œí¼í‹° ê°’ì˜ **íƒ€ì… ì•ˆì „ì„±(type-safety)**ì´ ë³´ì¥ë˜ì§€ ì•ŠìŒ(URLì¸ì§€ ì•„ë‹Œì§€, ì´ë©”ì¼ ì£¼ì†Œ ì¸ì§€ ì•„ë‹Œì§€) -> ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë°œìƒ ìš°ë ¤
- í”„ë¡œí¼í‹° ê°’ì„ ì¼ì • ë‹¨ìœ„ë¡œ ë¬¶ì–´ì„œ ì½ì„ ìˆ˜ ì—†ê³ , `@Value` ì• ë„ˆí…Œì´ì…˜ì´ë‚˜ ìŠ¤í”„ë§ì˜ Environment ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ í•˜ë‚˜í•˜ë‚˜ ê°œë³„ì ìœ¼ë¡œë§Œ ì½ì„ ìˆ˜ ìˆìŒ

ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì»¤ìŠ¤í…€ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•´ **type-safety** ì™€ **valiation**, ê·¸ë¦¬ê³  ì—¬ëŸ¬ ê°œë¥¼ í•œêº¼ë²ˆì— ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ í•´ì•¼ í•œë‹¤.

ì´ì— ëŒ€í•œ ë°©ë²•ì€ ì—¬ëŸ¬ê°€ì§€ ì´ë‹¤.

---

### @ConfigurationProperties ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»¤ìŠ¤í…€ í”„ë¡œí¼í‹° ì •ì˜

`@ConfigurationProperties` ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ íŠ¹ì • prefix ì— ëŒ€í•œ í”„ë¡œí¼í‹° ì •ë³´ë¥¼ ë‹´ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê³ , ì´ë¥¼ í†µí•´ ê°’ì„ ë³´ì¥í•˜ê³  ìœ íš¨ì„±ì„ ê²€ì¦í•œë‹¤. `@Value` ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ê±°ë‚˜ `Environment` ë¹ˆì„ ìë™ ì£¼ì… ë°›ì§€ ì•Šì•„ë„ ë˜ëŠ” ë°©ë²•ì´ë‹¤.

ìš°ì„  custom property ë¡œ ì“¸ ê²ƒë“¤ì„ `application.properties` ì— ë„£ì–´ì£¼ì

{% highlight properties %}

app.sbip.ct.name=StudyApplication
app.sbip.ct.ip=127.0.0.1
app.sbip.ct.port=9090
app.sbip.ct.security.enabled=true
app.sbip.ct.security.token=abc123
app.sbip.ct.security.roles=USER,ADMIN

{% endhighlight %}

ìœ„ property ëŠ” ì „ë¶€ app.sbip.ct ì˜ prefixë¥¼ ê°€ì§„ë‹¤. CustomProperties.class í•˜ë‚˜ë¥¼ ìƒì„±í•˜ì—¬ ë‹¤ìŒì„ ì…ë ¥í•˜ì. ì—¬ê¸°ì„œëŠ” Getter, Setter ë“±ë“±ì˜ **[ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ(boilerplate code)](#ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸-ì½”ë“œ)**ì˜ ë¶ˆí¸ì„±ì„ ìœ„í•´ [**Lombok**](#lombok) ì„ ì‚¬ìš©í–ˆë‹¤.

{% highlight java %}
import lombok.*;
import org.springframework.boot.context.properties.*;

import java.util.*;

@AllArgsConstructor
@Getter
@ToString
@ConfigurationProperties(prefix="app.sbip.ct")
public class CustomProperties {
    private final String name;
    private final String ip;
    private final String port;
    private final Security security;

    @AllArgsConstructor
    @Getter
    @ToString
    public static class Security {
        private final boolean enabled;
        private final String token;
        private final List<String> roles;
    }
}
{% endhighlight %}

ìœ„ì²˜ëŸ¼ `app.sbip.ct` ì¸ í”„ë¡œí¼í‹°ë§Œ ì½ì„ ìˆ˜ ìˆê³ , ë” ì„¸ë¶€ì ìœ¼ë¡œ .ìœ¼ë¡œ ë‚˜ë‰˜ì—ˆë‹¤ë©´, ê·¸ ì•ˆì— public static classë¥¼ ì„ ì–¸í•˜ì—¬ í•  ìˆ˜ë„ ìˆë‹¤([public static ìœ¼ë¡œ nested class ë¥¼ ì„ ì–¸í•˜ëŠ” ì´ìœ ][nested-class])

ì§€ê¸ˆì€ Lombok ì„ ì¨ì„œ ì¸ìë“¤ì„ ê°€ì ¸ì˜¤ì§€ë§Œ ì›í•œë‹¤ë©´ ìƒì„±ìì—ì„œ ê²€ì¦í•˜ëŠ” ì½”ë“œë¥¼ ë„£ì„ ìˆ˜ë„ ìˆë‹¤.

### @EnableConfigurationProperties ë¡œ Bean ë“±ë¡í•˜ê¸°

ê¸°ë³¸ì ìœ¼ë¡œ `ConfigurationProperties` ì—ëŠ” Bean ìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ ì—†ë‹¤.  
ë‹¤ìŒ `CustomService` í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ Beanì´ ìë™ ì£¼ì…ë˜ëŠ”ì§€ ì‚´í´ë³´ì.

{% highlight java %}
import com.example.study.properties.*;
import lombok.*;
import org.springframework.beans.factory.annotation.*;
import org.springframework.stereotype.*;

@Service
@Getter
public
class CustomService {
    private final CustomProperties customProperties;

    @Autowired
    public CustomService(CustomProperties customProperties) {
        this.customProperties = customProperties;
    }
}
{% endhighlight %}

ì´ì œ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤.

{% highlight java %}
@EnableConfigurationProperties(CustomProperties.class)
public class DemoApplication {
    ...
    public static void main(String[] args)  {
        ...
        CustomService customService = applicationContext.getBean(CustomService.class);
		System.out.println(customService.getCustomProperties().toString());
    }
}
{% endhighlight %}

SpringApplication ì„ ë°‘ê³¼ ê°™ì´ ì‘ì„±í•˜ì—¬ ì‹¤í–‰í•´ë³´ê³  ì‹¤í–‰í•˜ë©´

{% highlight java %}
public class DemoApplication {
    ...
    public static void main(String[] args)  {
        SpringApplication springApplication = new SpringApplication(DemoApplication.class);
        ConfigurableApplicationContext applicationContext = springApplication.run(args);
        CustomService customService = applicationContext.getBean(CustomService.class);
		System.out.println(customService.getCustomProperties().toString());
    }
}
{% endhighlight %}

`Consider defining a bean of type 'com.example.study.properties.CustomProperties' in your configuration.`

ì™€ ê°™ì€ ë©”ì‹œì§€ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

`@ConfigurationProperties` ìì²´ì— ì•„ë˜ì™€ ê°™ì´ interface ê°€ êµ¬í˜„ë˜ê³  ìˆë‹¤.

{% highlight java %}
@Target({ ElementType.TYPE, ElementType.METHOD })
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Indexed
public @interface ConfigurationProperties {
{% endhighlight %}

ì´ëŠ” ê·¸ëƒ¥ í”„ë¡œí¼í‹°ë¥¼ ë§Œë“¤ê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©ì„ ì•ˆí•œ ê²ƒê³¼ ê°™ë‹¤. ì„ ì–¸í•œ `CustomProperties`ë¥¼ ì ìš©í•˜ê³  ì‹¶ì€ Applicationì˜ í´ë˜ìŠ¤ì— `@EnableConfigurationProperties` ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ Bean ìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.

{% highlight java %}
@EnableConfigurationProperties(CustomProperties.class)
public class DemoApplication {
    ...
    public static void main(String[] args)  {
        ...
        CustomService customService = applicationContext.getBean(CustomService.class);
		System.out.println("\n\n\ngetCustomProperties");
		System.out.println(customService.getCustomProperties().toString());
		System.out.println("\n\n\n");
    }
}
{% endhighlight %}

ì´ì œ Bean ì´ ì œëŒ€ë¡œ ë¶ˆëŸ¬ì™€ì§ì„ ì•Œ ìˆ˜ ìˆê³ , ì¶œë ¥ ë˜í•œ ì˜ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

---

## ğŸ”— ì¶œì²˜
- ë„ì„œ [Spring Boot in Practice](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=279280319&srsltid=AfmBOoqOq7s5PrLMTe6aMGBXVD7AjNczIgN0e57lelyEY76kueqPkxeK)

---

## ğŸ“ ê´€ë ¨ ê¸€

- [Lombok][lombok]
- [Nested Class][nested-class]

---

## âœ’ï¸ ìš©ì–´

###### ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ

í•­ìƒ ë¹„ìŠ·í•œ í˜•íƒœë¡œ ì—¬ê¸°ì €ê¸° ë°˜ë³µì ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ì½”ë“œì´ë©° ê¸°ëŠ¥ êµ¬í˜„ê³¼ëŠ” í° ê´€ë ¨ì´ ì—†ì§€ë§Œ, ê¸°ëŠ¥ì´ë‚˜ êµ¬í˜„ì— ìˆì–´ì„œ ìì£¼ ì‚¬ìš©í•˜ì—¬ í•„ìˆ˜ì ìœ¼ë¡œ ì‘ì„±í•´ì•¼í•˜ëŠ” ì½”ë“œë¥¼ ë§í•œë‹¤. ì˜ˆì‹œë¡œëŠ” ìƒì„±ì, Getter, Setter ë“±ì´ ìˆë‹¤.

###### Lombok

ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ì¤„ì¼ ìˆ˜ ìˆë„ë¡ ì• ë„ˆí…Œì´ì…˜ì„ ì§€ì›í•´ì£¼ëŠ” íŒ¨í‚¤ì§€ì´ë‹¤. ì˜ì¡´ì„± ì¶”ê°€ë¥¼ í†µí•´ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.

{% highlight java %}
dependencies {
    compileOnly 'org.projectlombok:lombok:(ìµœì‹  ë²„ì „)'
    annotationProcessor 'org.projectlombok:lombok(ìµœì‹  ë²„ì „)'
}
{% endhighlight %}

ë”°ë¡œ [Lombok ì„ ì •ë¦¬í•œ ê¸€][lombok]ì´ë‹¤.

[lombok]: {{ site.baseurl }}/java/2025/06/09/lombok
[nested-class]: {{ site.baseurl }}/java/2025/06/09/nested-class