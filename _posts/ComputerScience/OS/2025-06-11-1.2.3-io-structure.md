---
layout: post
title:  1.2.3 I/O Structure
date:   2025-06-11 15:51:26 +0900
categories: ComputerScience OS
---

<!--more-->

## π“‚ λ©μ°¨
- [κ³µν†µλ²„μ¤λ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅μ ν•κ³„μ ](#κ³µν†µλ²„μ¤λ¥Ό-ν†µν•-λ°μ΄ν„°-μ „μ†΅μ-ν•κ³„μ )
- [DMAλ¥Ό ν†µν• ν•κ³„μ  ν•΄κ²°](#dmaλ¥Ό-ν†µν•-ν•κ³„μ -ν•΄κ²°)
    - [Switch κµ¬μ΅°λ¥Ό ν†µν• DMA ν¨μ¨ μƒμΉ](#switch-κµ¬μ΅°λ¥Ό-ν†µν•-dma-ν¨μ¨-μƒμΉ)

---

## π“ λ³Έλ¬Έ

μ΄μμ²΄μ μ μƒλ‹Ή λ¶€λ¶„μ΄ I/O κ΄€λ¦¬λ¥Ό μ„ν•΄ μλ‹¤. I/O λ” μ‹μ¤ν…μ μ‹ λΆ°μ„±κ³Ό μ„±λ¥μ— λ§¤μ° λ―Όκ°ν•κ³ , μ¥μΉλ“¤μ ν•νƒμ™€ νΉμ„±μ΄ λ‹¤μ–‘ν•κΈ° λ•λ¬Έμ— μ΄ κΈ°λ¥μ— μ΄μ μ„ λ§μ¶λ‹¤.

### κ³µν†µλ²„μ¤λ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅μ ν•κ³„μ 

![device-controllers]({{ site.baseurl }}/assets/img/device-controllers.png)

μ΄μ „μ **μΈν„°λ½νΈ I/O λ°©μ‹**μ„ ν†µν•΄ λ…λ Ήμ„ μν–‰ν•λ” κ³Όμ •μ„ λ³΄μ.

1. **CPU** κ°€ **Control Bus** μ™€ **Address Bus** λ¥Ό ν†µν•΄ **Device Controller** μ—κ² λ…λ Ή μ „λ‹¬
2. μμ‹  λ°›μ€ **Device Controller** λ” I/O Device μ™€ μ§μ ‘ ν†µμ‹ ν•μ—¬ ν•΄λ‹Ή μ‘μ—…μ„ μν–‰
    - μ—¬κΈ°μ„ **Device Controller** λ” μμ²΄ **Local Buffer**λ΅ λ°μ΄ν„°λ¥Ό μ¤€λΉ„ν•κ³  μλ” μƒνƒμ„
3. I/O μ‘μ—…μ΄ μ™„λ£λκ³ , **Device Controller** λ” μΈν„°λ½νΈ μ‹ νΈλ¥Ό **Control Bus**λ¥Ό ν†µν•΄ CPUμ—κ² λ³΄λƒ„
4. CPU κ°€ μΈν„°λ½νΈλ¥Ό κ°μ§€ν•μ—¬ **Context Switching** μ„ ν• ν›„, **Interrupt Handler** λ¥Ό νΈμ¶
    - μ΄ κ³Όμ •μ—μ„ μΈν„°λ½νΈ λ²΅ν„° ν…μ΄λΈ”μ ν•Έλ“¤λ¬ μ£Όμ†λ¥Ό μ΅°ν
5. CPUκ°€ **Interrupt Handler Code** μ—μ„ **Device Controller** λ΅ λ¶€ν„° μ²λ¦¬λ λ°μ΄ν„°λ¥Ό μ”μ²­
6. CPUκ°€ **Interrupt** μ²λ¦¬ μ™„λ£ ν›„ μ‹¤ν–‰μ¤‘μΈ **Context**λ΅ λ³µκ·€

λ¨λ“  μ¥μΉκ°€ λ‹¨μΌ System Busλ¥Ό κ³µμ ν•λ―€λ΅, λ‹¤μ¤‘ μ¥μΉκ°€ λ™μ‹μ— λ°μ΄ν„°λ¥Ό μ „μ†΅ν•κ±°λ‚ μμ‹ ν•λ ¤κ³  ν•  κ²½μ° λ²„μ¤ μ¶©λ λ° μ§€μ—°(latency) μ΄ λ°μƒν•λ‹¤.

### DMAλ¥Ό ν†µν• ν•κ³„μ  ν•΄κ²°

**DMA(μ§μ ‘ λ©”λ¨λ¦¬ μ ‘κ·Ό, Direct Memory Access)** μ λ°μ΄ν„° μ „μ†΅ λ°©μ‹μ€ **μ¥μΉ λ²„νΌ, ν¬μΈν„°, μΉ΄μ΄ν„° λ“±μ„ μ„¤μ •ν•μ—¬μ„** μ¥μΉ μ»¨νΈλ΅¤λ¬κ°€ CPU κ°μ…μ΄ μ—†μ΄ **μ¥μΉμ™€ μ£ΌκΈ°μ–µ μ¥μΉ μ‚¬μ΄μ—μ„ μ „μ²΄ λ°μ΄ν„° λΈ”λ΅(Block)μ„ μ§μ ‘ μ „μ†΅ν•λ” κΈ°μ **μ΄λ‹¤.

![how-a-modern-computer-system-works]({{site.baseurl}}/assets/img/how-a-modern-computer-system-works.png)

μ΄λ• λ°μ΄ν„° λΈ”λ΅ λ‹¨μ„λ΅ ν• λ²μ μΈν„°λ½νΈλ§ λ°μƒν•μ—¬μ„, μ‘μ—… μ™„λ£λ¥Ό **Device Driver** μ— μ•λ¦¬κ² λλ‹¤. ν•μ§€λ§ μ—¬κΈ°μ—λ„ λ‹¨μ μ΄ μλ”λ° μ‹μ¤ν… λ²„μ¤λ” λ‹¨μΌ λ²„μ¤λ¥Ό κ³µμ ν•κΈ° λ•λ¬Έμ— μ‚¬μ©μ¤‘μΈ λ²„μ¤λ¥Ό λ‹¤λ¥Έ μ¥μΉ λ””λ°”μ΄μ¤μ—μ„ μ „μ†΅μ€ λ¶κ°€ν•λ‹¤(λ™μ‹ μ „μ†΅ λ¶κ°€).

κ·Έλμ„ λ²„μ¤λ¥Ό μ‚¬μ©ν•λ ¤λ©΄ κ¶ν•μ„ μμ„λ€λ΅ μ΅°μ¨ν•΄μ•Ό ν•λ‹¤(**Bus Arbitration**). μ΄λ” λ”°λΌμ„ λ€λ‰μ λ°μ΄ν„° μ΄λ™(NVS I/O λ“±) μ—λ” κ³Όλ„ν• μ¤λ²„ν—¤λ“λ¥Ό μ λ°ν•λ‹¤.

#### Switch κµ¬μ΅°λ¥Ό ν†µν• DMA ν¨μ¨ μƒμΉ

μΌλ¶€ κ³ μ„±λ¥ μ‹μ¤ν…μ—μ„λ” μ‹μ¤ν… λ²„μ¤ κµ¬μ΅°κ°€ μ•„λ‹ μ¤μ„μΉ κµ¬μ΅°λ¥Ό μ‚¬μ©ν•μ—¬ μ—¬λ¬ μ»΄ν¬λ„νΈ κ°„μ— λ™μ‹μ— μ„λ΅ ν†µμ‹  ν•  μ μκ² ν•μ—¬ κ³µμ λ λ²„μ¤μ—μ„ μ‚¬μ΄ν΄μ„ κ²½μν•μ§€ μ•μ•„λ„ λλ” DMAμ ν¨μ¨μ΄ λ”μ± λ†’μ•„μ§€κ² λλ‹¤.

λ°”μ΄νΈλ§λ‹¤ μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¤λ” λ°©μ‹μ— λΉ„ν•΄ ν›¨μ”¬ ν¨μ¨μ μ΄λ©°, **Device Controller** κ°€ μ „μ†΅ μ‘μ—…μ„ μν–‰ν•λ” λ™μ•, CPUλ” λ‹¤λ¥Έ μ‘μ—…μ„ μν–‰ν•  μ μκΈ° λ•λ¬Έμ— μ „μ²΄ μ‹μ¤ν… ν¨μ¨μ΄ λ†’μ•„μ§„λ‹¤.

| λ°©μ‹           | CPU κ°μ… | μΈν„°λ½νΈ λ°μƒ | ν¨μ¨μ„±       |
|----------------|----------|----------------|--------------|
| Programmed I/O(μ›λ‚  λ°©μ‹) | λ†’μ     | μ—†μ           | λ‚®μ         |
| Interrupt I/O  | μ¤‘κ°„     | λ§¤ I/O μ΄λ²¤νΈ | μ¤‘κ°„         |
| DMA            | λ‚®μ     | μ „μ†΅ μ™„λ£ μ‹  | λ†’μ         |

