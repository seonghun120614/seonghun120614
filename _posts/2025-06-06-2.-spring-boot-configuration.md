---
layout: post
title:  2. Spring Boot Configuration
date:   2025-06-06 14:20:04 +0900
categories: Java Spring
---


<!--more-->

## ğŸª› í•œê³„ì 

Application ì˜ ì„¤ì •ê°’ë§Œ ë°”ê¿” ê¸°ëŠ¥ì„ ì„œë¹„ìŠ¤ì™€ í™˜ê²½ì— ë§ê²Œ ì¡°ì ˆí•˜ëŠ”ê²Œ í•„ìš”í•˜ë‹¤.

---

## ğŸ“‚ ëª©ì°¨
- [Spring Application ì˜ setDefaultProperties() ë©”ì„œë“œë¡œ êµ¬ì„± ì •ë³´ ì„¤ì •í•˜ê¸°](#spring-application-ì˜-setdefaultproperties-ë©”ì„œë“œë¡œ-êµ¬ì„±-ì •ë³´-ì„¤ì •í•˜ê¸°)
- [Spring Application ì˜ properties íŒŒì¼ë¡œ êµ¬ì„± ì •ë³´ ì„¤ì •í•˜ê¸°](#spring-application-ì˜-properties-íŒŒì¼ë¡œ-êµ¬ì„±-ì •ë³´-ì„¤ì •í•˜ê¸°)
    - [properties íŒŒì¼ì„ @PropertySource ë¡œ ë§¤í•‘ì‹œì¼œ ì½”ë“œ ë‹¨ì—ì„œ ë‹¤ë£¨ê¸°](#properties-íŒŒì¼ì„-propertysource-ë¡œ-ë§¤í•‘ì‹œì¼œ-ì½”ë“œ-ë‹¨ì—ì„œ-ë‹¤ë£¨ê¸°)
- [êµ¬ì„± ì •ë³´ ì§‘í•© Configuration ì˜ ì •ë³´ë¥¼ ì¶œë ¥í•´ë³´ê¸°](#êµ¬ì„±-ì •ë³´-ì§‘í•©-configuration-ì˜-ì •ë³´ë¥¼-ì¶œë ¥í•´ë³´ê¸°)
    - [@EnvironmentCapable ì¸í„°í˜ì´ìŠ¤](#environmentcapable-ì¸í„°í˜ì´ìŠ¤)
    - [@PropertyResolver ì¸í„°í˜ì´ìŠ¤](#propertyresolver-ì¸í„°í˜ì´ìŠ¤)

---

## ğŸ“š ë³¸ë¬¸

ê°œë°œ, í…ŒìŠ¤íŠ¸, ìŠ¤í…Œì´ì§•, ìƒìš© í™˜ê²½ ë“±ì˜ ì—¬ëŸ¬ í™˜ê²½ì—ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¤ì • ì •ë³´ë¥¼ ë‹¤ë¥´ê²Œ ê°€ì ¸ê°ˆ ìˆ˜ ìˆê²Œ í•´ì•¼í•œë‹¤.

ì´ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë¹„ëŒ€í•´ì§ì— ë”°ë¼ ë” ê´€ë¦¬í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤.

í•´ì•¼ í•  ê²ƒì€ í™˜ê²½ì´ ë‹¬ë¼ì§€ë©´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ì½”ë“œëŠ” ê±°ì˜ ë‹¬ë¼ì§€ì§€ ì•Šì•„ì•¼ í•˜ë©°, ë³´ì•ˆ ì„¤ì •, DB ì´ˆê¸°í™”, DB ì„¤ì • ì •ë³´ ë“±ì´ ê´€ë¦¬ë˜ì–´ì•¼ í•œë‹¤.

### Spring Application ì˜ setDefaultProperties() ë©”ì„œë“œë¡œ êµ¬ì„± ì •ë³´ ì„¤ì •í•˜ê¸°

Spring Boot ëŠ” SpringApplication í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ì •ë³´ë¥¼ ì €ì¥í•œë‹¤.

í´ë˜ìŠ¤ ìì²´ê°€ `setDefaultProperties()` ë©”ì„œë“œë¡œ `Properties` í˜¹ì€ `Map<String, Object>` ì˜ ì¸ìë¥¼ ë°›ê³ ,

ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ì„¤ì • ì •ë³´ê°€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©ëœë‹¤. ì•„ë˜ëŠ” ì„¤ì • ì •ë³´ë¥¼ ì½”ë“œ ë‹¨ì—ì„œ ì •ì˜í•˜ëŠ” ê³¼ì •ì´ë‹¤.

{% highlight java %}
import org.springframework.boot.*;
import org.springframework.boot.autoconfigure.*;

import java.util.*;

@[SpringBootApplication]()
public class ExampleApplication {
    public static void main(String[] args) {
        SpringApplication springApplication = new SpringApplication(ExampleApplication.class);

        Properties properties = new Properties();

        properties.setProperty("spring.config.import", "additional-application.properties");
        properties.setProperty("spring.config.test", "hi");

        springApplication.setDefaultProperties(properties);

        springApplication.run();
    }
}
{% endhighlight %}

ì†ŒìŠ¤ì½”ë“œë¡œ ì ìš©í•˜ë©´ í•œ ë²ˆ ì •ì˜ ì‹œ ë‚˜ì¤‘ì— ë°”ë€Œì§€ ì•Šê¸° ë•Œë¬¸ì— **ë‚˜ì¤‘ì— ë³€ê²½ì•ˆí•´ë„ ë˜ëŠ” ì„¤ì • ì •ë³´**ë§Œ ë„£ëŠ”ê²Œ ì¢‹ë‹¤.

### Spring Application ì˜ properties íŒŒì¼ë¡œ êµ¬ì„± ì •ë³´ ì„¤ì •í•˜ê¸°

`application.properties` ë¥¼ í†µí•´ ì„¤ì • ì •ë³´ë¥¼ key/value í˜•ì‹ìœ¼ë¡œ ì •ì˜ ê°€ëŠ¥í•˜ë‹¤.

| key | value | description |
|--------|-------|----------|
| `server.shutdown` | **graceful**, immediate | immediateê°€ ê¸°ë³¸ê°’ì´ë©°, ì‹¤í–‰ ì¤‘ì¸ ìš”ì²­ì— ëŒ€í•´ ì¦‰ì‹œ ëŠì„ì§€, ì•„ë‹ˆë©´ ìš”ì²­ì„ ì™„ë£Œí•˜ê³  ëŠì„ì§€ ì—¬ë¶€ |
| `spring.lifecycle.timeout-per-shutdown-phase` | ISO-8601 duration-like í‘œê¸°ë²• | graceful shutdown ì— ëŒ€í•´ ìš”ì²­ ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ì„ ì„¤ì •í•œë‹¤. |
| `server.port` | \[open port number\] | ì–´ë–¤ ì—´ë ¤ ìˆëŠ” í¬íŠ¸ ë²ˆí˜¸ë¡œ request ë¥¼ ë°›ì„ì§€ ì„¤ì •, ê¸°ë³¸ 8080 |
| `spring.config.import` | [classpath](#classpath):(íŒŒì¼ëª…).properties | í•´ë‹¹ íŒŒì¼ì˜ ì„¤ì • ì •ë³´ë¥¼ ì½ì–´ ë°˜ì˜í•œë‹¤. |
| `spring.config.on-not-found` | ignore, warn, fail | ì„¤ì • íŒŒì¼ì˜ ë¶€ì¬ì— ëŒ€í•œ í”¼ë“œë°±, ê¸°ë³¸ê°’ì€ ignore |
| ... | ... | ... |

{% highlight properties %}
# application.properties
spring.application.name=study
server.port=8080
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=1m

spring.config.import=classpath:additional-application.properties
spring.config.on-not-found=ignore

# Logger ì—ì„œ ë‚˜ì¤‘ì— ë‹¤ë£¸
logging.level.root=INFO
logging.level.com.example=DEBUG
logging.file.name=app.log

# DB / JPA Configure ë‚˜ì¤‘ì— ë‹¤ë£¸
spring.datasource.url=jdbc:h2:mem:study
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driverClassName=org.h2.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# ì›¹ ì„œë²„ ì„¤ì •
server.servlet.contextPath=/api
server.error.includeMessage=always
server.compression.enabled=true

# Cache ì„¤ì •
spring.cache.type=simple
spring.cache.cache-names=users,products
spring.cache.caffeine.spec=maximumSize=500,expireAfterWrite=60s

# Security
spring.security.user.name=admin
spring.security.user.password=1234
spring.security.user.roles=USER,ADMIN

# Actuator
management.endpoints.web.exposure.include=*
management.endpoint.shutdown.enabled=true
management.server.port=9091

# File
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=20MB

# Message
spring.messages.basename=messages
spring.messages.encoding=UTF-8
...
{% endhighlight %}
ì¶”í›„ì— ë‹¤ë£¬ë‹¤.

#### properties íŒŒì¼ì„ @PropertySource ë¡œ ë§¤í•‘ì‹œì¼œ ì½”ë“œ ë‹¨ì—ì„œ ë‹¤ë£¨ê¸°

ìœ„ì²˜ëŸ¼ ì •ì ìœ¼ë¡œ properties íŒŒì¼ì„ ìƒì„±í•´ì„œ key-value ë¥¼ ì…ë ¥ í•  ìˆ˜ë„ ìˆëŠ”ë°, ì½”ë“œ ë‹¨ì—ì„œ ì´ ì„¤ì • ì •ë³´ë“¤ì„ ê°€ì ¸ì˜¤ê³  ì‹¶ìœ¼ë©´ class ë¡œì˜ ë§¤í•‘ì„ ì‹œí‚¤ê²Œ í•  ìˆ˜ ìˆë‹¤.

{% highlight properties%}
# custom-application.properties
username=sa
password=1234
{% endhighlight %}

ìœ„ì™€ ê°™ì´ ì„¸íŒ…í•´ì£¼ì.

{% highlight java %}
import org.springframework.context.annotation.*;

@Configuration
@PropertySource("classpath:custom-application.properties")
public class CustomConfiguration { }
{% endhighlight %}

ì´ì œ ì‹¤í–‰ ì‹œ Spring ì€ `@Configuration` ê°€ ë¶™ì€ í´ë˜ìŠ¤ë“¤ì„ í™˜ê²½ ì„¤ì •ìœ¼ë¡œ ë°›ì•„ë“¤ì´ê³ , `@PropertySource` ì• ë„ˆí…Œì´ì…˜ì„ í†µí•´ í´ë˜ìŠ¤íŒ¨ìŠ¤ì˜ `custom-application.properties` ë¥¼ ê°€ì ¸ì™€ êµ¬ì„± ì •ë³´ë¥¼ ì½ì–´ ë“±ë¡ì‹œí‚¤ê²Œ ëœë‹¤.

### êµ¬ì„± ì •ë³´ ì§‘í•© Configuration ì˜ ì •ë³´ë¥¼ ì¶œë ¥í•´ë³´ê¸°

ì‹¤í–‰ í›„ì— ì„œë²„ì—ì„œëŠ” ì–´ë–¤ í˜•íƒœë¡œ properties ê°€ ì¡´ì¬í•˜ëŠ”ì§€ ì¶”ì ì´ ë˜ì–´ì•¼ í•œë‹¤. ì‹¤ì œë¡œ ì ìš©ì´ ì™„ë£Œê°€ ë˜ì—ˆëŠ”ì§€ ë³´ê³  ì‹¶ë‹¤ë©´ `run()` ì˜ ë°˜í™˜ê°’ì„ Context ë¡œ ë°›ì•„ì„œ Context ê°€ ê°€ì§€ëŠ” Environment Bean ì„ ë“¤ê³ ì™€ì„œ key ì— ëŒ€í•œ ê°’ì´ ì˜ ìˆëŠ”ì§€ ë´ì•¼ í•œë‹¤.

#### @EnvironmentCapable ì¸í„°í˜ì´ìŠ¤

{% highlight java %}
import org.springframework.boot.*;
import org.springframework.boot.autoconfigure.*;
import org.springframework.context.*;
import org.springframework.core.env.*;

@SpringBootApplication
public class MyApplication {
    public static void main(String[] args) {
        SpringApplication springApplication = new SpringApplication(MyApplication.class);

        ConfigurableApplicationContext context = springApplication.run(args);
    }
}
{% endhighlight %}

ìœ„ë¥¼ í†µí•´ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. ì—¬ê¸°ì„œ `ConfigurableApplicationContext` ì¸í„°í˜ì´ìŠ¤ëŠ” `ApplicationContext` ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ëŠ”ë‹¤.

`ApplicationContext` ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¤ì‹œ `EnvironmentCapable`, `ListableBeanFactory`, `HierarchicalBeanFactory`, `MessageSource`, `ApplicationEventPublisher`, `ResourcePatternResolver` ì¸í„°í˜ì´ìŠ¤ë“¤ì„ ìƒì†ë°›ê²Œ ëœë‹¤.

- `ConfigurableApplicationContext`
    - `ApplicationContext`
        - `EnvironmentCapable`,
        `ListableBeanFactory`,
        `HierarchicalBeanFactory`,
        `MessageSource`,
        `ApplicationEventPublisher`,
        `ResourcePatternResolver`

ê° ì˜ë¯¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

- `@EnvironmentCapable`: `Environment` ê°ì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µ, `getEnvironment()`
- `@ListenableBeanFactory`: ì´ë¦„ ê¸°ë°˜ í˜¹ì€ íƒ€ì… ê¸°ë°˜ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ Bean ì„ ì¡°íšŒ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µ, `getBeansOfType(Class<T> type)`, `getBeanDefinitionNames()`
- `@HierarchicalBeanFactory`: ë¶€ëª¨-ìì‹ êµ¬ì¡°ë¡œ ëœ ì»¨í…Œì´ë„ˆ ì²´ê³„ ì§€ì›, `getParentBeanFactory()`, `containsLocalBean(String name)`
- `@MessageSource`: ë‹¤êµ­ì–´ ë©”ì‹œì§€(i18n)ì„ ê´€ë¦¬í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤, `getMessage(String code, Object[] args, Locale locale)`
- `@ApplicationEventPublisher`: Spring ì˜ ì´ë²¤íŠ¸ ë°œí–‰ê¸° ì¸í„°í˜ì´ìŠ¤, `publishEvent(ApplicationEvent event)`
- `@ResourcePatternResolver`: ë¦¬ì†ŒìŠ¤ íŒ¨í„´ì„ í†µí•´ íŒŒì¼ ë“±ì„ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µ, `getResource(String locationPattern)`, ìš©ë„ëŠ” file:, classpath: ë“±ì„ urlì— ì“¸ ìˆ˜ ìˆë„ë¡ í•˜ì—¬ ê°„í¸í•œ path ê¸°ëŠ¥ ì œê³µ

ìš°ì„ ì€ `@EnvironmentCapable` ë§Œ ë³´ì. ì´ë¥¼ í†µí•´ ë‹¤ìŒ ë©”ì„œë“œë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.


#### @PropertyResolver ì¸í„°í˜ì´ìŠ¤

{% highlight java %}
import org.springframework.boot.*;
import org.springframework.boot.autoconfigure.*;
import org.springframework.context.*;
import org.springframework.core.env.*;

@SpringBootApplication
public class MyApplication {
    public static void main(String[] args) {
        SpringApplication springApplication = new SpringApplication(MyApplication.class);

        ConfigurableApplicationContext context = springApplication.run(args);

        Environment env = context.getBean(Environment.class);

        System.out.println("\n\n\n");
        System.out.println(env.getProperty("username"));
        System.out.println(env.getProperty("password"));
        System.out.println("\n\n\n");
    }
}
{% endhighlight %}

`@Environment` ì¸í„°í˜ì´ìŠ¤ëŠ” `@PropertyResolver` ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ëŠ”ë‹¤. PropertyResolver ëŠ” ë§ ê·¸ëŒ€ë¡œ String ìœ¼ë¡œ ëœ Property ì •ë³´ë¥¼ key/value ë¡œ ì˜ í•´ì„í•˜ì—¬ ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

- `@PropertyResolver`: ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • ê°’ë“¤ì„ ë‹¤ì–‘í•œ ì†ŒìŠ¤ì—ì„œ ì½ê³ , ê°€ê³µí•˜ê³ , ë³€í™˜í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µ, `containsProperty(String key)`, `getProperty()`, `getRequiredProperty()`, `resolvePlaceholders()` ë“±ì˜ ë©”ì„œë“œë¥¼ ì§€ì›í•œë‹¤.

ì‹¤í–‰ì‹œ ì œëŒ€ë¡œ ì¶œë ¥ë¨ì„ ë³¼ ìˆ˜ ìˆë‹¤.

---

## ğŸ”— ì¶œì²˜
- ë„ì„œ [Spring Boot in Practice](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=279280319&srsltid=AfmBOoqOq7s5PrLMTe6aMGBXVD7AjNczIgN0e57lelyEY76kueqPkxeK)

---

## ğŸ“ ê´€ë ¨ ê¸€
- [][]

---

## âœ’ï¸ ìš©ì–´

###### classpath

JVM ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ê¸° ìœ„í•´ ê²€ìƒ‰í•˜ëŠ” ë””ë ‰í† ë¦¬, JAR íŒŒì¼ë“¤ì˜ ê²½ë¡œ ëª©ë¡ì´ë©°, Spring Boot ì€ ë‹¤ìŒ í´ë”ë“¤ì„ í¬í•¨í•œë‹¤.

- `src/main/java`
- `src/main/resources`
- `dependencies`: JAR ë¡œ í¬í•¨ëœ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬
- `build/classes/java/main`: Gradle

###### @SpringBootApplication

SpringBootApplication ì˜ entry point ì— ì‚¬ìš©í•˜ëŠ” ì• ë„ˆí…Œì´ì…˜ì´ë©°, ë‹¤ìŒ ì• ë„ˆí…Œì´ì…˜ë“¤ì„ í¬í•¨í•œë‹¤.

- `@Configuration`: ì´ í´ë˜ìŠ¤ê°€ ì„¤ì • í´ë˜ìŠ¤ì„ì„ ëª…ì‹œ
- `@EnableAutoConfiguration`: ìë™ ì„¤ì • í™œì„±í™”í•˜ì—¬ classpath ì— ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ìë™ Bean ë“±ë¡
- `@ComponentScan(basePackage="")`: ê°™ì€ íŒ¨í‚¤ì§€ ë° í•˜ìœ„ íŒ¨í‚¤ì§€ë¥¼ ìŠ¤ìº”í•˜ì—¬ Bean ìœ¼ë¡œ ë“±ë¡

###### @Bean

Spring ì€ **IoC** ë¼ëŠ” ì»¨í…Œì´ë„ˆê°€ ìˆëŠ”ë°, ì´ ì»¨í…Œì´ë„ˆê°€ ê´€ë¦¬í•˜ëŠ” ëŒ€ìƒ ê°ì²´ê°€ Bean ì´ë‹¤. [ê¸€ì„ ì°¸ê³ ][bean]í•˜ì.
[bean]: /2025/06/06/bean-ì´ë€