---
layout: post
title:  "[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 64ì¼ì°¨ nginx"
date:   2025-11-26 16:17:38 +0900
categories: ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼ ë©‹ì‚¬ ë°±ì—”ë“œ TIL devops
---

<!--more-->
ì‘ì„±ì¤‘

## ğŸ“‚ ëª©ì°¨
- [Nginx](#nginx)
    - [ngninx.conf](#nginxconf)
        - [ê¸°ë³¸ ë¬¸ë²• ê·œì¹™](#ê¸°ë³¸-ë¬¸ë²•-ê·œì¹™)
    - [main block](#main-block)
        - [events block](#events-block)
        - [http block](#http-block)
        - []()

---

## ğŸ“š ë³¸ë¬¸

### Nginx

#### nginx.conf

Nginx ì„¤ì •ì€ ê¸°ë³¸ì ìœ¼ë¡œ **ì§€ì‹œë¬¸(Directives)**ê³¼ **ì»¨í…ìŠ¤íŠ¸(Contexts)**ë¼ëŠ” ë‘ ê°€ì§€ ì£¼ìš” ìš”ì†Œë¡œ êµ¬ì„±ë¨

##### ê¸°ë³¸ ë¬¸ë²• ê·œì¹™

- **ë‹¨ìˆœ ì§€ì‹œë¬¸**: ì´ë¦„, ë§¤ê°œë³€ìˆ˜ë¡œ êµ¬ì„±ë˜ë©°, ê³µë°±ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ í•œ ì¤„ì— ì…ë ¥ë˜ê³  ì„¸ë¯¸ì½œë¡ ìœ¼ë¡œ ëë‚¨

{% highlight nginx %}
user nginx;
worker_processes auto;
{% endhighlight %}

- **ë¸”ë¡ ì§€ì‹œë¬¸ ë° ì»¨í…ìŠ¤íŠ¸**: ë‹¨ìˆœ ì§€ì‹œë¬¸ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ, ì„¸ë¯¸ì½œë¡  ëŒ€ì‹  ì¤‘ê´„í˜¸({ })ë¡œ ëë‚˜ê³ , ì´ ì¤‘ê´„í˜¸ ì•ˆì—ëŠ” ë‹¤ë¥¸ ì§€ì‹œë¬¸(í•˜ìœ„ ì»¨í…ìŠ¤íŠ¸ í¬í•¨)ì´ í¬í•¨ë  ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ **ì»¨í…ìŠ¤íŠ¸** ë¼ê³  ë¶€ë¥¸ë‹¤.

{% highlight nginx %}
http {
    # ì´ ì•ˆì— ë‹¤ë¥¸ ì§€ì‹œë¬¸ì´ë‚˜ server ë¸”ë¡ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.
}
{% endhighlight %}

- **ì£¼ì„**: # ìœ¼ë¡œì‹œì‘

- **ê³„ì¸µ êµ¬ì¡° ë° ìƒì†**: ê¸°ë³¸ì ìœ¼ë¡œ config ì˜ context êµ¬ì¡°ëŠ” main -> events / http -> server -> location ìˆœì„œì˜ ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì§€ë©°, ìƒìœ„ ì»¨í…ìŠ¤íŠ¸ì˜ ì„¤ì •ì€ í•˜ìœ„ ì»¨í…ìŠ¤íŠ¸ë¡œ ìƒì†ë˜ê±°ë‚˜ í•˜ìœ„ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì¬ì •ì˜í•  ìˆ˜ ìˆë‹¤.

{% highlight nginx %}
# ë©”ì¸(main) ì»¨í…ìŠ¤íŠ¸: ì „ì—­ ì„¤ì •
user nginx;
worker_processes auto; # ì‚¬ìš© ê°€ëŠ¥í•œ CPU ì½”ì–´ ìˆ˜ì— ë”°ë¼ ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ ìë™ ì„¤ì •

events {
    # ì´ë²¤íŠ¸ ì»¨í…ìŠ¤íŠ¸: ì—°ê²° ì²˜ë¦¬ ë°©ì‹ ì„¤ì •
    worker_connections 1024;
}

http {
    # HTTP ì»¨í…ìŠ¤íŠ¸: ì›¹ ì„œë²„ì˜ ì „ë°˜ì ì¸ ë™ì‘ ì„¤ì •
    include mime.types;
    default_type application/octet-stream;
    sendfile on;

    # ê¸°íƒ€ HTTP ê´€ë ¨ ì„¤ì • (gzip ì••ì¶• ë“±)

    server {
        # ì„œë²„ ì»¨í…ìŠ¤íŠ¸: íŠ¹ì • ë„ë©”ì¸ ë˜ëŠ” í¬íŠ¸ì— ëŒ€í•œ ì„¤ì • (ê°€ìƒ í˜¸ìŠ¤íŠ¸)
        listen 80; # 80ë²ˆ í¬íŠ¸ì—ì„œ ìˆ˜ì‹ 
        server_name example.com www.example.com; # ë„ë©”ì¸ ì´ë¦„ ì„¤ì •

        location / {
            # ë¡œì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸: íŠ¹ì • URI ê²½ë¡œì— ëŒ€í•œ ì²˜ë¦¬ ë°©ì‹ ì„¤ì •
            root /var/www/html; # ì •ì  íŒŒì¼ì˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì„¤ì •
            index index.html index.htm; # ê¸°ë³¸ ì¸ë±ìŠ¤ íŒŒì¼ ì„¤ì •
        }

        location /api/ {
            # /api/ ê²½ë¡œì— ëŒ€í•œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„¤ì •
            proxy_pass http://localhost:3000; # ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œ ìš”ì²­ ì „ë‹¬
            proxy_set_header Host $host;
        }
    }
}
{% endhighlight %}

> ì¤‘ê´„í˜¸ì— í¬í•¨ì•ˆë˜ëŠ” ì „ì—­ì ì¸ ê³³ì„ main block ìœ¼ë¡œ ë³¸ë‹¤.

#### main block

ì£¼ìš” ì§€ì‹œë¬¸ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

- `user`
- `worker_processes`
- `error_log`
- `include`

##### events block

- `worker_connections`
- `use`

##### http block

- `server`
    - `location block`
        - `proxy_pass`
        - `root`
        - `index`
        - `return`
        - `rewrite`
    - `listen`
    - `server_name`
    - `root`
- `include`
- `mime.types`
- `sendfile`
- `gzip`

