---
layout: post
title:  "[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 55ì¼ì°¨ Swagger"
date:   2025-11-14 09:33:45 +0900
categories: ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼ ë©‹ì‚¬ ë°±ì—”ë“œ TIL Java Spring
---

<!--more-->

## ğŸ“‚ ëª©ì°¨
- [Swagger](#swagger)
    - [API ë¬¸ì„œí™”](#api-ë¬¸ì„œí™”)
    - [Swagger ë° OpenAPI ê°œë… ì •ë¦¬](#swagger-ë°-openapi-ê°œë…-ì •ë¦¬)
    - [Swagger êµ¬ì„± ìš”ì†Œ](#swagger-êµ¬ì„±-ìš”ì†Œ)
    - [Swagger ì¥ì ](#swagger-ì¥ì )
    - [Swagger Dependency](#swagger-dependency)
    - [Swagger application.yml ì„¤ì •](#swagger-applicationyml-ì„¤ì •)
        - [api-docs ê¸°ëŠ¥ ì„¤ì •](#api-docs-ê¸°ëŠ¥-ì„¤ì •)
        - [swagger-ui ê¸°ëŠ¥ ì„¤ì •](#swagger-ui-ê¸°ëŠ¥-ì„¤ì •)
    - [Swagger Configuration](#swagger-configuration)
        - [Info Model](#info-model)
        - [Server Model](#server-model)
        - [Components Model](#components-model)
    - [Swagger Controller](#swagger-controller)
        - [API Method ì„¤ëª… ë“±ë¡](#api-method-ì„¤ëª…-ë“±ë¡)
    - [Swagger DTO Class](#swagger-dto-class)
    - [Swagger Security](#swagger-security)

---

## ğŸ“š ë³¸ë¬¸

### Swagger

ì†Œí”„íŠ¸ì›¨ì–´ ê°„ì— ìƒí˜¸ì‘ìš©ì„ í•˜ê¸° ìœ„í•´ ì œê³µí•˜ëŠ”ê²Œ ë°”ë¡œ API ë¬¸ì„œë‹¤. API ìˆ˜ê°€ ë§ì•„ì§€ë§Œ ì´ëŸ° ë¬¸ì„œ ì‘ì„±ë„ êµ‰ì¥íˆ ë²„ê²ê²Œ ëœë‹¤. ì´ëŸ° ë¬¸ì„œë¥¼ ìë™í™” í•  ìˆ˜ ìˆëŠ” ê²ƒì´ ë°”ë¡œ Swagger ì´ë‹¤.

#### API ë¬¸ì„œí™”

ê°œë°œìê°€ API ë¥¼ ì´í•´í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬ì¡°, ìš”ì²­ / ì‘ë‹µ ë°©ì‹, ì¸ì¦, ì˜¤ë¥˜ ë“±ì„ ì •ë¦¬í•œ ë¬¸ì„œì´ë©° ë¬¸ì„œê°€ ì—†ê±°ë‚˜ ë¶ˆì™„ì „í•˜ë©´ ì½”ë“œ ë¶„ì„, ë¬¸ì˜ ë“± ë¹„íš¨ìœ¨ì´ ë°œìƒí•˜ê²Œ ëœë‹¤. ëª…í™•í•œ ë¬¸ì„œëŠ” ê°œë°œì ê²½í—˜ê³¼ ìœ ì§€ë³´ìˆ˜ íš¨ìœ¨ì„ ë†’ì¼ ê²ƒì´ë‹¤.

**ì£¼ìš” ìš”ì†Œ**
- end point: URL, HTTP ë©”ì„œë“œ(GET/POST/PUT/DELETE)
- reuqest: í•„ìš” íŒŒë¼ë¯¸í„°, í—¤ë”
- response: ì‘ë‹µ ë°ì´í„° êµ¬ì¡°, HTTP status code
- Examples ìš”ì²­/ì‘ë‹µ: ì‹¤ì œ í˜¸ì¶œ ì˜ˆì‹œ, ì˜ˆìƒ ê²°ê³¼
- Error Code ì„¤ëª…: ë°œìƒ ê°€ëŠ¥í•œ ì˜¤ë¥˜ ì½”ë“œ ë° í•´ê²° ë°©ë²•

#### Swagger ë° OpenAPI ê°œë… ì •ë¦¬

Swagger ëŠ” API ë¬¸ì„œë¥¼ ìë™ ìƒì„±/ê´€ë¦¬í•˜ëŠ” ë„êµ¬ì´ë©° OpenAPI Specification í‘œì¤€ ê¸°ë°˜ìœ¼ë¡œ API ëª…ì„¸ë¥¼ ì •ì˜í•˜ê³ , ì‘ì„±ëœ ëª…ì„¸ë¥¼ í™œìš©í•˜ì—¬ ë¬¸ì„œ, í…ŒìŠ¤íŠ¸ UI, ì½”ë“œ ìƒì„± ë“±ì„ ìë™í™”í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

**OpenAPI Specification(OAS)**
- RESTful API ë¥¼ ê¸°ìˆ í•˜ëŠ” í‘œì¤€ í¬ë§·
- YAML/JSON í˜•ì‹ìœ¼ë¡œ API êµ¬ì¡° ì •ì˜
- ëŒ€ë¶€ë¶„ì˜ ì–¸ì–´/í”„ë ˆì„ì›Œí¬ì—ì„œ í™œìš© ê°€ëŠ¥
- Swagger UI, Redoc ë“±ì„ í†µí•´ ë¬¸ì„œ ìë™ ìƒì„± ê°€ëŠ¥

#### Swagger êµ¬ì„± ìš”ì†Œ

- Swagger UI
    - ë¸Œë¼ìš°ì € API ë¬¸ì„œì˜ ì‹œê°ì  ì œê³µ
    - APIë¥¼ ì§ì ‘ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” ì¸í„°ë™í‹°ë¸Œ UI
- Swagger Editor
    - API ëª…ì„¸(YAML/JSON)ë¥¼ ì‘ì„±í•˜ëŠ” ì˜¨ë¼ì¸ í¸ì§‘ê¸°
    - ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°
- Swagger Codegen
    - API ëª…ì„¸ë¥¼ ê¸°ë°˜í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ SDK, ì„œë²„ ìŠ¤í… ì½”ë“œ ìë™ ìƒì„±

#### Swagger ì¥ì 

ì£¼ìš”ê¸°ëŠ¥ìœ¼ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤:

**ìë™í™”ëœ API ë¬¸ì„œ ìƒì„±**
Swagger ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì— ì‘ì„±í•œ ì• ë…¸í…Œì´ì…˜ì„ ê¸°ë°˜ìœ¼ë¡œ API ë¬¸ì„œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ”ë°, ë³„ë„ì˜ ì‘ì—… ì—†ì´ë„ ì—”ë“œí¬ì¸íŠ¸, íŒŒë¼ë¯¸í„°, ì‘ë‹µ êµ¬ì¡° ë“±ì´ ìë™ìœ¼ë¡œ ë°˜ì˜ë˜ê¸° ë•Œë¬¸ì— ë¬¸ì„œë¥¼ ì§ì ‘ ì‘ì„±í•˜ë˜ ì‹œëŒ€ì™€ ë¹„êµí•˜ë©´ ì••ë„ì ìœ¼ë¡œ íš¨ìœ¨ì ì´ë‹¤.

**ì¸í„°ë™í‹°ë¸Œ API í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ ì œê³µ**
Swagger UIëŠ” ë‹¨ìˆœ ë¬¸ì„œê°€ ì•„ë‹ˆë¼ ë¸Œë¼ìš°ì €ì—ê²Œ ë°”ë¡œ API ë¥¼ í˜¸ì¶œí•´ë³¼ ìˆ˜ ìˆëŠ” ì‚´ì•„ìˆëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ê°œë°œ/QA/ê¸°íšìê°€ `Postman`, `curl` ê¸°ëŠ¥ ì—†ì´ ë°”ë¡œ API ë¥¼ ê²€ì¦í•  ìˆ˜ ìˆë‹¤ëŠ” í° ì¥ì ì´ ìˆë‹¤.

**ì–¸ì–´ ë° í”„ë ˆì„ì›Œí¬ ë…ë¦½ì  êµ¬ì¡°**
Swagger/OASëŠ” íŠ¹ì • ì–¸ì–´ë‚˜ í”„ë ˆì„ì›Œí¬ì— ì¢…ì†ë˜ì§€ ì•ŠëŠ”ë‹¤. Java(Spring), Node.js, Python(FastAPI), Golang ë“± ì–´ë–¤ í™˜ê²½ì—ì„œë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆì–´ íŒ€ ê°„ í‘œì¤€í™”ê°€ ìˆ˜ì›”í•˜ë‹¤.

**í‘œì¤€í™”ëœ API ëª…ì„¸(JSON/YAML) ì œê³µ**
API êµ¬ì¡°ë¥¼ JSON ë˜ëŠ” YAML ë¡œ í‘œí˜„í•˜ëŠ” Open API Specification(OAS) ë¥¼ ê·¸ëŒ€ë¡œ ë”°ë¥´ê²Œ ëœë‹¤. ì´ë¥¼ í†µí•´ ë„êµ¬ ê°„ í˜¸í™˜ì„±ì´ ë†’ê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ì—°ë™ì´ë‚˜ API ê´€ë¦¬ í”Œë«í¼ì—ì„œë„ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

#### Swagger Dependency

{% highlight gradle %}
implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.8.5'
{% endhighlight %}

#### Swagger application.yml ì„¤ì •

##### api-docs ê¸°ëŠ¥ ì„¤ì •

{% highlight yml %}
springdoc:
  api-docs:
    path: /api-docs
    enabled: true
{% endhighlight %}

springdoc ì€ swagger ì—ì„œ ì „ìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” key block ì´ë‹¤. api-docs ëŠ” API ëª…ì„¸ë¥¼ JSON í˜•íƒœë¡œ ë³´ì—¬ì¤€ë‹¤. `/api-docs` ë¡œ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ scheme ë’¤ì— path ìë¦¬ì— `/api-docs` ë¥¼ ì¨ì¤€ë‹¤ë©´ JSON í˜•íƒœë¡œ ë³¼ ìˆ˜ ìˆë‹¤.

![assets/img/swagger-api-docs.png]({{ site.baseurl }}/assets/img/swagger-api-docs.png)

##### swagger-ui ê¸°ëŠ¥ ì„¤ì •

{% highlight yml %}
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    operations-sorter: method
    tags-sorter: alpha
    display-request-duration: true
  default-consumes-media-type: application/json
  default-produces-media-type: application/json
{% endhighlight %}

swagger-ui ëŠ” JSON í˜•íƒœ ì™¸ì˜ html í˜•íƒœë¡œ ìœ ì €ì—ê²Œ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì¤€ë‹¤. ì›¹ì‚¬ì´íŠ¸ê°€ ê¸°ë³¸ì ìœ¼ë¡œ ê¾¸ë©°ì ¸ ìˆê¸° ë•Œë¬¸ì— ë”°ë¡œ ìš°ë¦¬ê°€ ë””ìì¸í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

- `operations-sorter`: `method(GET, POST, PUT, DELETE)` ìˆœìœ¼ë¡œ ì •ë ¬, `alpha` ë¡œë„ ì„¤ì • ê°€ëŠ¥í•˜ë‹¤.
- `tags-sorter`: ë‚˜ì¤‘ì— ì„¤ëª… í•  ê¸°ëŠ¥ì˜ tag ì˜ `alpha`, ì•ŒíŒŒë²³ ìˆœìœ¼ë¡œ ì •ë ¬í•œë‹¤.
- `display-request-duration`: swagger-ui ê¸°ëŠ¥ì—ëŠ” ì„œë²„ì— ìš”ì²­ì„ ì‰½ê²Œ ë³´ë‚¼ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ìˆëŠ”ë°, ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ìš”ì²­ì˜ ì†Œìš” ì‹œê°„ì„ í‘œì‹œí•˜ê²Œ ëœë‹¤.

#### Swagger Configuration

Configuration ì— êµ³ì´ ì•ˆí•´ë„ annotation ìœ¼ë¡œë„ í•  ìˆ˜ ìˆì§€ë§Œ, ì»¨íŠ¸ë¡¤ëŸ¬ ìª½ì˜ ìœ„ì— í…ìŠ¤íŠ¸ê°€ ëŒ€ëŸ‰ìœ¼ë¡œ ì³ì ¸ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì˜ ì½”ë“œë¥¼ ë³¼ ë•Œ ì–´ë””ë¥¼ ë´ì•¼í•  ì§€ í•œ ëˆˆì— ì•ˆë“¤ì–´ì˜¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, í•„ìëŠ” Configuration ì— ë“±ë¡í•˜ë„ë¡ í–ˆë‹¤. annotation ìœ¼ë¡œë„ ê³µë¶€í•´ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.

ìš°ì„  Info model ë¶€í„° ë³´ì.

##### Info Model

{% highlight java %}
import io.swagger.v3.oas.models.info.Info;
{% endhighlight %}

models íŒ¨í‚¤ì§€ë¥¼ import í•´ì•¼ í•œë‹¤(annotations ì„ import í•˜ë©´ ë™ì‘ ì•ˆí•œë‹¤).

{% highlight java %}
@Configuration
public class OpenApiConfig {
	@Bean
	public OpenAPI customOpenAPI() {
		return new OpenAPI()
				.info(new Info()
						      .title("ì‡¼í•‘ëª° APIë¬¸ì„œ")
						      .version("1.0.0")
						      .description("ì‡¼í•‘ëª° í”„ë¡œì íŠ¸ì˜ REST API ")
						      .contact(new Contact()
								               .name("ê¹€ê°œë°œ")
								               .email("dev@shop.com")
								               .url("https://shop.com"))
						      .license(new License()
								               .name("Apache 2.0")
								               .url("https://www.apache.org/licenses/LICENSE-2.0.html")));
	}
}
{% endhighlight %}

ì½”ë“œ ìì²´ê°€ html êµ¬ì¡°ì˜ indent ì™€ ë¹„ìŠ·í•˜ê²Œ ë˜ë©°, ì˜ë¯¸ ë˜í•œ ìœ ì‚¬í•˜ë‹¤. ê° new í•˜ëŠ” ê°ì²´ë“¤ì€ model ì„ ë‚˜íƒ€ë‚´ë©°, ëª¨ë¸ ê°ê°ì€ API ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ë©”íƒ€ë°ì´í„°ë“¤ì„ ê°€ì§€ê³  ìˆê²Œ ëœë‹¤. Bean ìœ¼ë¡œ ë“±ë¡ë˜ëŠ” OpenAPI ëŠ” swagger-ui ì˜ ë¬¸ì„œë¥¼ ì¶”ìƒí™” í•œ í˜•íƒœì´ë‹¤.

![OpenAPI Specification](https://github.com/OAI/OpenAPI-Specification/blob/3.0.4/versions/3.0.4.md)

ìœ„ ë¬¸ì„œëŠ” ì°¸ê³ ìš©ì´ë‹¤. security config ì²˜ëŸ¼ builder í˜•íƒœë¡œ chaining í•˜ë©° ë°ì´í„°ë¥¼ ì…ë ¥í•˜ë©°, OpenAPI ì—ëŠ” `info`, `servers`, `components` ë“±ì˜ ë©”ì„œë“œë¥¼ í†µí•´ ë©”íƒ€ë°ì´í„°ë“¤ì„ ì§‘ì–´ë„£ì„ ìˆ˜ ìˆë‹¤. ìœ„ë¥¼ ìš°ì„  ì‹¤í–‰ì‹œí‚¤ê³  `swagger-ui/index.html` path ë¡œ ì ‘ì†í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½ë˜ì–´ ìˆìŒì„ ë³¼ ìˆ˜ ìˆë‹¤.

![assets/img/swagger-ui-info-config.png]({{ site.baseurl }}/assets/img/swagger-ui-info-config.png)

ë‹¤ìŒì€ ì…ë ¥í•˜ì—¬ ì•Œë ¤ì£¼ëŠ”ê²Œ ì¢‹ë‹¤.

- title
- version
- contact
- license

##### Server Model

servers ì— ì—¬ëŸ¬ í™˜ê²½ì„ ë“±ë¡í•˜ë©´ Swagger UIì—ì„œ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ì„ íƒ ê°€ëŠ¥í•˜ë‹¤.

{% highlight java %}
.servers(List.of(
        new Server()
                .url("http://localhost:8080")
                .description("ë¡œì»¬ ê°œë°œ ì„œë²„"),
        new Server()
                .url("https://dev-api.shop.com")
                .description("ê°œë°œ ì„œë²„"),
        new Server()
                .url("https://api.shop.com")
                .description("ìš´ì˜ ì„œë²„")
));
{% endhighlight %}

ê°€ë…ì„±ì„ ìœ„í•´ indent ëŠ” ì¢€ ì¤„ì˜€ë‹¤. ìš°ë¦¬ ì„œë²„ëŠ” ê°œë°œ, í…ŒìŠ¤íŠ¸, ìš´ì˜ì˜ URI ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ìœ„ì²˜ëŸ¼ ëª…ì‹œí•´ì¤„ ìˆ˜ë„ ìˆë‹¤. ì´ë¥¼ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒì²˜ëŸ¼ ëœ¨ê²Œ ëœë‹¤.

![assets/img/swagger-ui-servers.png]({{ site.baseurl }}/assets/img/swagger-ui-servers.png)

ì£¼ì˜í•  ì ì€ server ê°€ ì•„ë‹ˆë¼ servers ë¼ì„œ iterable í•œ ê°ì²´ë¥¼ ë„£ì–´ì¤˜ì•¼ í•œë‹¤.

##### Components Model

ë³´ì•ˆ ìŠ¤í‚¤ë§ˆë„ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ë° `components` ë©”ì„œë“œë¥¼ í†µí•´ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

{% highlight java %}
.components(new Components()
        .addSecuritySchemes("bearerAuth",  // ì´ë¦„ì€ ììœ ë¡­ê²Œ
                new SecurityScheme()
                        .type(SecurityScheme.Type.HTTP)  // HTTP ì¸ì¦
                        .scheme("bearer")                 // Bearer í† í° ë°©ì‹
                        .bearerFormat("JWT")              // JWT í¬ë§·
                        .description("JWT í† í°ì„ ì…ë ¥í•˜ì„¸ìš” (Bearer ì œì™¸)")))
// ì „ì—­ìœ¼ë¡œ ë³´ì•ˆ ì ìš© (ëª¨ë“  APIì— JWT í•„ìš”)
.addSecurityItem(new SecurityRequirement().addList("bearerAuth"));
{% endhighlight %}

Components ì—ëŠ” `addSecuritySchemes` ë©”ì„œë“œê°€ ìˆì–´ì„œ ì—¬ê¸°ì— `SecurityScheme` í•˜ë‚˜ì”© ë„£ì–´ì£¼ë©´ ëœë‹¤. ì´ë¥¼ ë„£ì–´ì£¼ê¸°ë§Œ í•˜ë©´ ì•ˆë˜ê³ , `bearerAuth` ë¡œ ë“±ë¡ëœ ê²ƒë“¤ì„ `SecurityItem` ìœ¼ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. `addSecurityItem` ìœ¼ë¡œ ì „ì—­ì ì¸ ë³´ì•ˆ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë©°, ì—¬ê¸°ì— `SecurityRequirement` ëª¨ë¸ë¡œ bearerAuth ì˜ ì´ë¦„ì„ ê°€ì§€ëŠ” `SecurityScheme` ë¥¼ ë¶ˆëŸ¬ì˜¤ë„ë¡ í•˜ì. ìµœì¢…ì ìœ¼ë¡œ ì‹¤í–‰í•´ë³´ì.

[assets/img/swagger-ui-authorize.png]({{ site.baseurl }}/assets/img/swagger-ui-authorize.png)

ìœ„ì²˜ëŸ¼ ëœ¨ê²Œ ë˜ë©°, í´ë¦­ì‹œ JWT í† í°ì„ ì…ë ¥í•  ìˆ˜ ìˆëŠ” ì°½ë„ ëœ¨ê²Œ ëœë‹¤.

[assets/img/swagger-ui-bearerAuth.png]({{ site.baseurl }}/assets/img/swagger-ui-bearerAuth.png)

ë‚˜ì¤‘ì— ì—¬ê¸°ì„œ JWT í† í°ì„ ì…ë ¥í•˜ì—¬ ìš”ì²­ì„ ë³´ë‚´ë³¼ ê²ƒì´ë‹¤.

#### Swagger Controller

`Controller` ì— API ë“¤ì´ ë“¤ì–´ê°ˆí…ë°, ì´ ë¶€ë¶„ì´ ê°€ì¥ ë¬¸ì„œì—ì„œ ì¤‘ìš”í•œ ë°ì´í„°ì¼ ê²ƒì´ë‹¤. ìš°ì„  `Tag` ë¥¼ ë³´ì. 

![assets/img/swagger-ui-tags.png]({{ site.baseurl }}/assets/img/swagger-ui-tags.png)

ìœ„ì²˜ëŸ¼ API ë‹¨ìœ„ë¡œ íƒœê·¸ë¥¼ ë‹¬ ìˆ˜ ìˆê³ , íƒœê·¸ë“¤ì— ë”°ë¼ UI ì—ì„œ ë¶„ë¥˜ê°€ ë˜ì–´ ìœ„ì™€ ê°™ì´ ë³´ì—¬ì§€ê²Œ ëœë‹¤. íƒœê·¸ëŠ” ì•„ë˜ì™€ ê°™ì´ ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆë‹¤.

{% highlight java %}
@Tag(
		name = "User Management API",
		description = "ì‚¬ìš©ì ê´€ë¦¬ ê´€ë ¨ API ì…ë‹ˆë‹¤. ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤."
)
public interface UserControllerDocs {
{% endhighlight %}

íƒœê·¸ëŠ” `@Target({METHOD, TYPE, ANNOTATION_TYPE})` ì´ê¸° ë•Œë¬¸ì—, í´ë˜ìŠ¤ì™€ ë©”ì„œë“œì— ë¶™ì¼ ìˆ˜ ìˆë‹¤. ì´ì œ ë©”ì„œë“œë¥¼ ê¾¸ë©°ë³´ì.

##### API Method ì„¤ëª… ë“±ë¡

{% highlight java %}
@Operation(
        summary = "ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ",
        description = "ë°ì´í„°ë² ì´ìŠ¤ì— ë“±ë¡ëœ ëª¨ë“  ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤."
)
// ...
ResponseEntity<?> getAllUsers();
{% endhighlight %}

ì„¤ëª… ë“±ë¡ì„ ìœ„í•´ì„œ `@Operation` ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ì•„ë˜ì™€ ê°™ì´ ìœ„ì¹˜ë˜ê²Œ ëœë‹¤. API ë¥¼ ì—´ë©´ ê°€ì¥ ìµœìƒìœ„ì— ë³´ì—¬ì§ˆ í…ìŠ¤íŠ¸ê°€ ëœë‹¤.

![assets/img/swagger-ui-controller.png]({{ site.baseurl }}/assets/img/swagger-ui-controller.png)

API ì— ì‘ë‹µë„ ì˜ˆì‹œë¡œ ì¤„ ìˆ˜ ìˆëŠ”ë°, `@ApiResponses` ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

{% highlight java %}
@ApiResponses({
        @ApiResponse(
                responseCode = "200",
                description = "ì¡°íšŒ ì„±ê³µ",
                content = @Content(
                        mediaType = "application/json",
                        schema = @Schema(implementation = UserResponse.class)
                )
        ),
        @ApiResponse(
                responseCode = "500",
                description = "ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜",
                content = @Content() // ë¹ˆ ì‘ë‹µ
        )
})
{% endhighlight %}

ìœ„ì—ì„œ ApiResponse ì— content ë¶€ë¶„ì€ ì•„ë˜ ì‚¬ì§„ì˜ ì¤‘ê°„ì— ë³´ì´ëŠ” Media Typeì´ ë‚˜ì˜¤ëŠ” ë¶€ë¶„ì´ë‹¤. schema ë¥¼ í´ë¦­í•˜ë©´ `@Schema` ë¡œ ë“±ë¡í–ˆë˜ `UserResponse.class` ì— ë“¤ì–´ê°ˆ ë°ì´í„° íƒ€ì…ë“¤ì„ ë³¼ ìˆ˜ ìˆë‹¤.

![assets/img/swagger-ui-apiresponses.png]({{ site.baseurl }}/assets/img/swagger-ui-apiresponses.png)

ì¡°ê¸ˆ ë” ë³µì¡í•œ ìš”ì²­ì´ ìˆëŠ” APIë¥¼ ë³´ì.

{% highlight java %}
@Operation(
        summary = "ì‚¬ìš©ì ë°°ì¹˜ ìƒì„±",
        description = "ì—¬ëŸ¬ ì‚¬ìš©ìë¥¼ í•œ ë²ˆì— ìƒì„±í•©ë‹ˆë‹¤."
)
@RequestBody(
        description = "ìƒì„±í•  ì‚¬ìš©ì ëª©ë¡",
        required = true,
        content = @Content(
                mediaType = "application/json",
                schema = @Schema(implementation = UserRequest.class),
                examples = {  // ì—¬ëŸ¬ ì˜ˆì‹œ ì œê³µ
                        @ExampleObject(
                                name = "2ëª… ìƒì„±",
                                value = "[{\"name\":\"í™ê¸¸ë™\",\"email\":\"hong@test.com\",\"age\":25}," +
                                        "{\"name\":\"ê¹€ì² ìˆ˜\",\"email\":\"kim@test.com\",\"age\":30}]"
                        ),
                        @ExampleObject(
                                name = "1ëª… ìƒì„±",
                                value = "[{\"name\":\"ì´ì˜í¬\",\"email\":\"lee@test.com\",\"age\":28}]"
                        )
                }
        )
)
ResponseEntity<?> createUsers(List<UserRequest> requests);
{% endhighlight %}

![assets/img/swagger-ui-post-request.png]({{ site.baseurl }}/assets/img/swagger-ui-post-request.png)

ì´ì œ DTO ì—ì„œ `@Schema` ë¡œ ì• ë…¸í…Œì´ì…˜ì„ ë‹¬ì•„ì¤˜ì„œ example ê³¼ ì„¤ëª…ì„ ë‹¬ì•„ë³´ì.

#### Swagger DTO Class

DTO í´ë˜ìŠ¤ëŠ” API ìš”ì²­ì— ë¹¼ë†“ì„ ìˆ˜ ì—†ëŠ” ì¤‘ìš” ë°ì´í„°ì´ë‹¤. ì´ë¥¼ í† ëŒ€ë¡œ ì†¡ìˆ˜ì‹ í•˜ë©°, ì—¬ê¸°ì—ì„œë„ ì‚¬ìš©ìì—ê²Œ ì–´ë–¤ ìš”ì²­ ë°ì´í„°ë¥¼ ë³´ë‚´ì•¼ í• ì§€ ì–´ë–¤ ì‘ë‹µì´ ì˜¬ ì§€ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.

{% highlight java %}
public record UserResponse(
		@Schema(
				description = "ì‚¬ìš©ì ID",
				example = "1"
		)
		Long id,

		@Schema(
				description = "ì‚¬ìš©ì ì´ë¦„",
				example = "í™ê¸¸ë™"
		)
		String name,

		@Schema(
				description = "ì‚¬ìš©ì ì´ë©”ì¼",
				example = "email@email.com"
		)
		String email,

		@Schema(
				description = "ë‚˜ì´",
				example = "1"
		)
		Integer age,

		@Schema(
				description = "í™œì„±í™” ì—¬ë¶€",
				example = "true"
		)
		Boolean active,

		@Schema(
				description = "ìƒì„± ì¼ì‹œ",
				example = "2099-01-01T10:00:00"
		)
		LocalDateTime createdAt
) { }
{% endhighlight %}

`@Schema` ë¥¼ ë‹¬ì•„ì£¼ë©´ `ExampleValue` ì—ëŠ” example ì— í•´ë‹¹í•˜ëŠ” ê°’ì´ ë“¤ì–´ê°€ê²Œ ëœë‹¤.

![assets/img/swagger-ui-schema.png]({{ site.baseurl }}/assets/img/swagger-ui-schema.png)

**ìˆ˜ì¹˜í˜• ë°ì´í„° Schema ì˜ˆì œ**
{% highlight java %}
@Schema(
        description = "ì‚¬ìš©ì ë‚˜ì´",
        example = "25",
        minimum = "1",
        maximum = "150"
)
{% endhighlight %}

**ì •ê·œí‘œí˜„ì‹ Schema ì˜ˆì œ**
{% highlight java %}
@Schema(
        description = "íœ´ëŒ€í° ë²ˆí˜¸",
        example = "010-1234-5678",
        pattern = "^010-\\d{4}-\\d{4}$"
)
{% endhighlight %}

#### Swagger Security

ì´ì „ì— Configuration ì— ì„ ì–¸í–ˆë˜ security schema ë¡œ `bearerAuth` ë¥¼ ë“±ë¡í–ˆì—ˆë‹¤. ì „ì—­ ë³´ì•ˆ ì„¤ì •ì„ í’€ê³  íŠ¹ì • ë©”ì„œë“œì—ì„œë§Œ `bearerAuth` ë¥¼ ì‚¬ìš©í•˜ì—¬ JWT ì¸ì¦ì„ í•´ì•¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ë³´ì.

{% highlight java %}
@Operation(
        summary = "ì‚¬ìš©ì ë°°ì¹˜ ìƒì„±",
        description = "ì—¬ëŸ¬ ì‚¬ìš©ìë¥¼ í•œ ë²ˆì— ìƒì„±í•©ë‹ˆë‹¤.",
        deprecated = false,
        hidden = false,
        security = @SecurityRequirement(name = "bearerAuth")
)
{% endhighlight %}

ì‚¬ìš©ìë¥¼ ëŒ€ëŸ‰ìœ¼ë¡œ ìƒì„±í•˜ëŠ” API ì— `@Operation` ì˜ security ì†ì„±ì„ ë„£ì–´ `SecurityRequirement` ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë„£ì–´ì¤„ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë©´ ë‹¤ìŒê³¼ ê°™ì´ API ì— ìë¬¼ì‡ ê°€ ê±¸ë¦¬ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

![assets/img/swagger-ui-security.png]({{ site.baseurl }}/assets/img/swagger-ui-security.png)

ìœ„ì²˜ëŸ¼ ë¬¸ì„œë§Œ ì‘ì„±í•œ ê²ƒì´ì§€ Security ë¡œ authorize ê¸°ëŠ¥ì„ ë„£ì–´ì¤˜ì•¼ ëœë‹¤. ì§€ê¸ˆì€ ê¸°ëŠ¥ì´ ì—†ê³  ê»ë°ê¸°ë§Œ ì‘ì„±ëœ ê²ƒì´ë‹¤.