---
layout: post
title:  "[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 9ì¼ì°¨"
date:   2025-08-27 10:56:28 +0900
categories: ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼ ë©‹ì‚¬ ë°±ì—”ë“œ TIL Java
---

<!--more-->

## ğŸ“‚ ëª©ì°¨
- [Enum](#enum)
    - [enum ì„ ì–¸](#enum-ì„ ì–¸)
    - [java.lang.Enum](#javalangenum)
    - [í•„ë“œì™€ ìƒì„±ì](#í•„ë“œì™€-ìƒì„±ì)
    - [ì£¼ì˜ì ](#ì£¼ì˜ì )
- [ìì£¼ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤](#ìì£¼-ì‚¬ìš©í•˜ëŠ”-í´ë˜ìŠ¤)
    - [StringBuffer ì™€ String Builder](#stringbuffer-ì™€-string-builder)
    - [String Builder ì˜ thread unsafety ì‚´í´ë³´ê¸°](#string-builder-ì˜-thread-unsafety-ì‚´í´ë³´ê¸°)

---

## ğŸ“š ë³¸ë¬¸

### Enum

`enum` ìœ¼ë¡œ ì„ ì–¸ë˜ì–´ ìˆì§€ë§Œ ì‚¬ì‹¤ìƒ class ì´ë‹¤.

#### ë°°ê²½

```java
public class Direction {
    public static final int NORTH = 0;
    public static final int SOUTH = 1;
    public static final int EAST = 2;
    public static final int WEST = 3;
}
```

ìë°” 1.5 ì´ì „ì— ìƒìˆ˜ë¥¼ ë³´í†µ static final ë¡œ ì •ì˜í–ˆì§€ë§Œ, ì´ì— ëŒ€í•œ ë¬¸ì œëŠ”
- íƒ€ì… ì•ˆì „ì„± ë³´ì¥ X
- ë””ë²„ê¹… ì‹œ ìƒìˆ˜ ê°’ë§Œ ë³´ì¼ ìˆ˜ ìˆìŒ
- ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›€

ì´ëŸ¬í•œ ë¬¸ì œì  ë“±ìœ¼ë¡œ íƒ€ì… ì•ˆì „ì„±ê³¼ ê°€ë…ì„±ì„ í•´ê²°í•˜ê¸° ìœ„í•´ enum ì´ íƒ„ìƒí–ˆë‹¤.

#### enum ì„ ì–¸

```java
public enum Direction {
    NORTH, SOUTH, EAST, WEST
}
```

ì´ëŠ” ì»´íŒŒì¼ëŸ¬ ì°¨ì›ì—ì„œ ì˜ëª»ëœ ê°’ì€ ë„£ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— ì‚¬ì „ì— íƒ€ì… ì•ˆì „ì„±ì„ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë‹¤.

#### java.lang.Enum

ìë°” enum ì€ ìœ„ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” í´ë˜ìŠ¤ì´ë©°, ì‚¬ì‹¤ìƒ ìœ„ Direction ì˜ ì½”ë“œëŠ” ì»´íŒŒì¼ ì‹œ ë‹¤ìŒê³¼ ê°™ë‹¤.

```java
public final class Direction extends Enum<Direction> {
    public static final Direction NORTH = new Direction("NORTH", 0);
    public static final Direction SOUTH = new Direction("SOUTH", 1);
    public static final Direction EAST  = new Direction("EAST", 2);
    public static final Direction WEST  = new Direction("WEST", 3);

    private Direction(String name, int ordinal) {
        super(name, ordinal);
    }

    public static Direction[] values() { ... } // ëª¨ë“  enum ë°˜í™˜
    public static Direction valueOf(String name) { ... } // ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰
}
```

#### í•„ë“œì™€ ìƒì„±ì

ì‹¤ì œë¡œ í´ë˜ìŠ¤ì´ê¸° ë•Œë¬¸ì— í•„ë“œì™€ ìƒì„±ì ë˜í•œ ì •ì˜ í•  ìˆ˜ ìˆë‹¤.

```java
public enum Season {
    SPRING("ê½ƒì´ í”¼ëŠ” ê³„ì ˆ"),
    SUMMER("ë”ìš´ ê³„ì ˆ"),
    FALL("ë‹¨í’ì´ ë“œëŠ” ê³„ì ˆ"),
    WINTER("ëˆˆì´ ì˜¤ëŠ” ê³„ì ˆ");

    private final String description;

    Season(String description) { // private ìƒì„±ì
        this.description = description;
    }

    public String getDescription() {
        return description;
    }
}
```

ë˜í•œ ì•„ë˜ì™€ ê°™ì´ abstract ë©”ì„œë“œë¡œ ì˜¤ë²„ë¼ì´ë”©ë„ ê°€ëŠ¥í•˜ë‹¤. ì¦‰, ê° ìƒìˆ˜ê°€ ì„œë¡œ ë‹¤ë¥¸ ë™ì‘ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ë‹¤í˜•ì„±ê¹Œì§€ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë‹¤.

```java
public enum Operation {
    PLUS {
        public int apply(int x, int y) { return x + y; }
    },
    MINUS {
        public int apply(int x, int y) { return x - y; }
    };

    public abstract int apply(int x, int y);
}
```

ìƒì†ì´ ëœë‹¤ë©´ interface ë„ ì§‘ì–´ë„£ì„ ìˆ˜ ìˆê²Œ ëœë‹¤.

```java
public interface Printable {
    void print();
}

public enum Color implements Printable {
    RED, GREEN, BLUE;

    @Override
    public void print() {
        System.out.println("Color: " + this.name());
    }
}
```

> Enum ì€ ë³´í†µ switch ê°€ë…ì„±ì„ ìœ„í•´ ì“°ì´ê²Œ ëœë‹¤.

#### ì£¼ì˜ì 

- `ordinal()` ì‚¬ìš© ì§€ì–‘: ìƒìˆ˜ì˜ ìˆœì„œê°€ ë°”ë€Œë©´ ë¡œì§ì´ ê¹¨ì§€ë©° ëŒ€ì‹  name ê³¼ ê°™ì€ ë³„ë„ì˜ í•„ë“œë¥¼ ì‚¬ìš©í•œë‹¤.
- ì§ë ¬í™” ì‹œ ì£¼ì˜í•´ì•¼ í•œë‹¤. enum ì€ ì‹±ê¸€í„´ ë³´ì¥ì´ë¼ ì—­ì§ë ¬í™”í•´ë„ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ê°€ ìœ ì§€ëœë‹¤.
- ìƒì† ë¶ˆê°€ enum ì€ ìƒì†ì´ ì•ˆëœë‹¤(public final class ì´ê¸° ë•Œë¬¸).

> ordinal() ì€ enum ë‚´ë¶€ì— êµ¬í˜„ë˜ì–´ ìˆëŠ” ê²ƒì´ê³  ë¡œì§ì— ì§ì ‘ ì‚¬ìš©ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë³´ì§€ë„ ì•Šì„ ê²ƒì´ë‹¤.

### ìì£¼ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤

#### StringBuffer ì™€ String Builder

**StringBuffer**
- ë™ê¸°í™”ë¥¼ ì§€ì›í•¨
- ì„±ëŠ¥ì´ ëŠë¦¼
- ìŠ¤ë ˆë“œ ì„¸ì´í”„
- ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤.

`Serializable` ì´ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì§€ë§Œ ì´ëŠ” ë©”íƒ€ë°ì´í„° ìš©ë„ë¡œë§Œ ì“°ì´ê³ 

**StringBuilder**
- ë¹„ë™ê¸°
- ì„±ëŠ¥ì´ ë¹ ë¦„
- ì“°ë ˆë“œ ì„¸ì´í”„í•˜ì§€ ì•ŠìŒ
- ë‹¨ì¼ ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤.

#### String Builder ì˜ thread unsafety ì‚´í´ë³´ê¸°

ì´ë²ˆì—” StringBuilder ê°€ ë‘ ê°œì˜ ì“°ë ˆë“œë¥¼ ì‚¬ìš©í–ˆì„ë•Œ ë°ì´í„° ì¼ê´€ì„±ì„ ê°€ì ¸ê°€ì§€ ëª»í•˜ëŠ” ìƒí™©ì„ ì¬í˜„í•´ë³´ì.

```java
public class Main {
    static final StringBuilder SB = new StringBuilder();

    public static void main(String[] args) throws InterruptedException {
        Runnable run1 = () -> {
            for (int i = 0; i < 1_000_000; i++) {
                SB.append("a");
            }
        };
        Runnable run2 = () -> {
            for (int i = 0; i < 1_000_000; i++) {
                SB.append(1);
            }
        };

        Thread t1 = new Thread(run1);
        Thread t2 = new Thread(run2);


        t1.start();
        t2.start();

        t1.join();
        t2.join();
        System.out.println(SB);
        long a = SB.chars().filter(c -> c == 'a').count();
        long one = SB.chars().filter(c -> c == '1').count();
        long na = SB.chars().filter(c -> c == '\0').count();
        System.out.println(a);
        System.out.println(one);
        System.out.println(na);
        System.out.println(a+one+na);
        System.out.println(SB.length());
        System.out.println(SB.capacity());
    }
}
```

ìœ„ë¥¼ ì¶œë ¥í•´ë³´ë©´ aê°€ ë¨¼ì € ì¶œë ¥ì´ ëœ í›„ì— 1ì´ ì¶œë ¥ì´ ë˜ì–´ì•¼ í•˜ëŠ”ë°, aì™€ 1ì´ ë²ˆê°ˆì•„ê°€ë©´ì„œ ë˜ì–´ì§€ê¸°ë„ í•˜ê³ , ì–´ì©”ë•ŒëŠ” null ê°’ì´ ë“¤ì–´ê°€ë²„ë¦¬ê¸°ë„ í•œë‹¤..

![stringbuilder-thread-unsafety]({{ site.baseurl }}/assets/img/stringbuilder-thread-unsafety.png)

ì´ ì´ìœ ëŠ” `append` ì‘ì—…ì´ ì›ìì ì´ì§€ ì•Šì€ ì‘ì—…ì´ê¸°ì— `StringBuffer` ìì²´ê°€ a í˜¹ì€ 1ì„ ì €ì¥í•˜ë ¤ê³  í•  ë•Œ, í• ë‹¹ëœ String ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•˜ë©´ ì´ë¥¼ ë” ëŠ˜ë¦¬ëŠ” ì‘ì—…ì„ í•˜ëŠ”ë° ì´ ëŠ˜ë¦¬ëŠ” ì‘ì—… ë•Œë¬¸ì— ì‹¤ì œ ë¬¸ìì—´ì˜ ê¸¸ì´ì™€ í• ë‹¹ëœ ë©”ëª¨ë¦¬ì˜ í¬ê¸°ê°€ ë‹¬ë¼ null ì´ ìƒì„±ë˜ê²Œ ëœë‹¤.

ë˜í•œ aì™€ 1ì˜ ì €ì¥ëœ ìˆ«ìë„ ë‹¤ë¥¸ ê²ƒì„ ì•Œ ìˆ˜ ìˆëŠ”ë°,

```sh
...
1111111111111111111
505014
944207
31755
1480976
1480976
2359294
```

ì™€ ê°™ì´ ì¶œë ¥ë¨ì„ ë³¼ ìˆ˜ ìˆë‹¤. ì´ëŠ” ì¶œë ¥í•  ë•Œë§ˆë‹¤ ë°”ë€” ê²ƒì´ë‹¤(ì „ì²´ capacity ëŠ” ì¼ì •í•œ ê°’ìœ¼ë¡œ ì¦ê°€í•˜ê¸° ë•Œë¬¸ì— ë§¨ ë§ˆì§€ë§‰ ê°’ì€ ì™ ë§Œí•´ì„œëŠ” ì•ˆë°”ë€ë‹¤).

ë”°ë¼ì„œ Spring ì€ multi-thread ë¥¼ ìš°ì„  ì§€ì›í•˜ê¸°ì— ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ê°€ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ(ë‹¨ì¼, ë‹¤ì¤‘) ìš”ì²­ì„ ë„£ëŠ”ì§€ ì˜ ì‚´í”¼ê³  ë§ëŠ” êµ¬í˜„ì„ í•˜ë©´ ë  ê²ƒì´ë‹¤.
