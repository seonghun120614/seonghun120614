---
layout: post
title:  보조. Bean 이란
date:   2025-06-06 15:25:50 +0900
categories: Java Spring
---
<!--more-->
Bean 개념 설명 및 사용법

## 🪛 한계점

Spring 을 사용함에 있어 효율적인 Java 의 인스턴스 관리가 필요하다.

## 📂 목차
- [Bean Lifecycle Scope](#bean-lifecycle-scope)
- [Bean 수동 등록하기](#bean-수동-등록하기)
- [Bean Component Scan 방식으로 자동 등록하기](#bean-component-scan-방식으로-자동-등록하기)
- [@Autowired 로 등록된 Bean 가져오기](#등록된-bean-가져오기)

---

## 📚 본문

Bean 이라는 것은 순수 자바에서 `new` 로 생성하는 인스턴스들을 가르키고 만약 Spring 이 이를 관리하게 된다면 이를 Bean 이라고 부르게 된다.

Bean 은 RAM -> JVM -> IoC 안에 있으며 한 번 등록이 되면 이를 어떤 클래스에서든 쉽게 쉽게 가져올 수 있고 객체의 생명주기를 자동으로 쉽게 관리할 수 있다. 이런 이점 때문에 Bean 을 쓰고 Bean 으로 등록하려면 `@Configuration` 클래스 안에 `@Bean` 을 **메서드**에 넣어주면 된다.

### Bean Lifecycle Scope

Bean 의 관리 범위는 다음과 같다.
- singleton(기본값): 컨테이너 당 하나만 생성
- prototype: 요청 시마다 새로 생성
- request: HTTP 요청마다 하나(웹에서만 적용되는 인자)
- session: HTTP 세션마다 하나
- application: servlet context마다 하나

### Bean 수동 등록하기
{% highlight java %}

import org.springframework.context.annotation.*;

@Configuration
public class MyConfig {
    @Bean
    public OrderService orderService() {
        return new OrderService();
    }

    public static class OrderService {
        public String process() {
            return "Order processed";
        }
    }
}
{% endhighlight %}

위와 같이 작성하면 `OrderService` 클래스는 Bean으로 등록될 때 기본 스코프가 singleton이기 때문에 하나만 생성되며, 이 `OrderService`를 의존하는 다른 Bean들에게 자동으로 주입된다. 이러한 과정을 **DI (Dependency Injection)**이라고 한다.

### Bean Component Scan 방식으로 자동 등록하기

[@ComponentScan](#componentscan) 은 Spring이 자동으로 Component 를 찾아 Bean 으로 등록하도록 범위를 지정하는 애너테이션이다. Spring Boot에서는 보통 자동으로 포함되지만, 커스터마이징이 필요할 땐 직접 사용해야 한다.

`basePackages` 로 `String[]`의 인자를 받고 해당 String 의 패키지에 있는 모든 `@Component` 들을 Bean에 등록하게 된다.

{% highlight java %}
import org.springframework.context.annotation.*;

@Configuration
@ComponentScan(basePackages = {
        "com.example.study.config",
        "com.example.study.service"
})
public class MyConfig { }
{% endhighlight %}

config, service 패키지들의 Component 들을 전부 가져와 Bean 으로 등록한다.

### 등록된 Bean 가져오기

스프링부트 IoC 컨테이너에는 Bean 들이 등록되어 있는 테이블이 있다. 이 테이블에서 Bean을 가져오려면 `@Autowired` 애너테이션을 변수 선언이나 메서드, 인자에 사용하여 들고 올 수 있다. 만약 `UserRepository` 라는 클래스를 Bean에 등록했다고 해보자. 다른 클래스에서 다음과 같이 써주면 된다.

{% highlight java %}
....
public class AppService {
    ...
    @Autowired
    public AppService(AppProperties appProperties) {
        this.appProperties = appProperties;
    }
    ...
}
{% endhighlight %}

appProperties 는 자동적으로 `@Autowired`를 통해 Bean 에 등록된 객체를 가져오게 된다.

---

## 🔗 출처
- 도서 [Spring Boot in Practice](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=279280319&srsltid=AfmBOoqOq7s5PrLMTe6aMGBXVD7AjNczIgN0e57lelyEY76kueqPkxeK)

---

## ✒️ 용어

###### @ComponentScan

`@ComponentScan` 애너테이션은 Spring이 자동으로 `@Component` 의 Bean을 찾아 등록하도록 범위를 지정하는 애너테이션이다. Spring Boot에서는 보통 자동으로 포함되지만, 커스터마이징이 필요할 땐 직접 사용해야 한다.