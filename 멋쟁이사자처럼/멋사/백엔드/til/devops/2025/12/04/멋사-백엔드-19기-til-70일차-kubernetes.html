<!DOCTYPE html>
<html lang="kor">

    <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="icon" href="/seonghun120614/assets/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/seonghun120614/assets/css/style.css">
<title>[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 70ì¼ì°¨ Kubernetes</title>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 70ì¼ì°¨ Kubernetes | Seonghunâ€™s Blog</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 70ì¼ì°¨ Kubernetes" />
<meta name="author" content="Seonghun Park" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/devops/2025/12/04/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-70%EC%9D%BC%EC%B0%A8-kubernetes.html" />
<meta property="og:url" content="https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/devops/2025/12/04/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-70%EC%9D%BC%EC%B0%A8-kubernetes.html" />
<meta property="og:site_name" content="Seonghunâ€™s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-12-04T05:52:48+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 70ì¼ì°¨ Kubernetes" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Seonghun Park"},"dateModified":"2025-12-04T05:52:48+00:00","datePublished":"2025-12-04T05:52:48+00:00","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 70ì¼ì°¨ Kubernetes","mainEntityOfPage":{"@type":"WebPage","@id":"https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/devops/2025/12/04/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-70%EC%9D%BC%EC%B0%A8-kubernetes.html"},"url":"https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/devops/2025/12/04/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-70%EC%9D%BC%EC%B0%A8-kubernetes.html"}</script>
<!-- End Jekyll SEO tag -->


<script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>

<!-- Mermaid -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RQTWJRLWGD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-RQTWJRLWGD');
</script></head><script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggle = document.getElementById("dark-toggle");
        
            // ì´ë¯¸ ì‹¤í–‰í•œ ì  ìˆëŠ”ì§€ í™•ì¸
            const hasToggled = localStorage.getItem("darkModeInitialized");
        
            if (!hasToggled && toggle && toggle.checked) {
                toggleDarkMode();
                localStorage.setItem("darkModeInitialized", "true"); // ìµœì´ˆ ì‹¤í–‰ ê¸°ë¡
            }
        });
    </script>

    <body>
        <div id="scroll-progress"></div>
        <main class="container">
            <section class="about">
                <div class="about-header condensed">
                    <div class="about-title">
                        <a href="/seonghun120614/">
                            
                            <img class="light"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            <img class="dark"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            
                        </a>
                        <h2 id="title">
                            <a href="/seonghun120614/">Seonghun Park</a>
                        </h2>
                    </div><p class="tagline">Developer.</p></div>
                
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </section>
            <section class="content">
                <script>
window.MathJax = {
    tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
    },
    options: {
    renderActions: {
        addMenu: []
    }
    }
};
</script>

<script type="text/javascript"
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script><div class="post-container">
    <a class="post-link" href="/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/devops/2025/12/04/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-70%EC%9D%BC%EC%B0%A8-kubernetes.html">
        <h2 class="post-title">[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 70ì¼ì°¨ Kubernetes</h2>
    </a>
    
    <div class="post-meta">
        <div class="post-date"><i class="icon-calendar"></i>Dec 4, 2025</div><ul class="post-categories"><li>ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼</li><li>ë©‹ì‚¬</li><li>ë°±ì—”ë“œ</li><li>TIL</li><li>DevOps</li></ul></div>

    <div class="post">
        <!--more-->

<h2 id="-ëª©ì°¨">ğŸ“‚ ëª©ì°¨</h2>
<ul>
  <li><a href="">Kubernetes êµ¬ì„±ìš”ì†Œ</a></li>
  <li><a href=""></a></li>
</ul>

<hr />

<h2 id="-ë³¸ë¬¸">ğŸ“š ë³¸ë¬¸</h2>

<h3 id="kubernetes-êµ¬ì„±ìš”ì†Œ">Kubernetes êµ¬ì„±ìš”ì†Œ</h3>

<p>ì¿ ë²„ë„¤í‹°ìŠ¤(Kubernetes, K8s)ëŠ” ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”Œë«í¼ìœ¼ë¡œ, ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬Â·ìŠ¤ì¼€ì¼ë§Â·ê´€ë¦¬Â·ë³µêµ¬í•˜ëŠ” í‘œì¤€ ë„êµ¬ë‹¤. ì´ë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†ŒëŠ” í¬ê²Œ ë§ˆìŠ¤í„° ë…¸ë“œ(Control Plane) ì™€ ì›Œì»¤ ë…¸ë“œ(Worker Node, Node), ê·¸ë¦¬ê³  ì˜¤ë¸Œì íŠ¸(Object)ë¡œ ë‚˜ë‰œë‹¤.</p>

<h4 id="control-plane-êµ¬ì„±ìš”ì†Œ">Control Plane êµ¬ì„±ìš”ì†Œ</h4>

<p>ë§ˆìŠ¤í„° ë…¸ë“œë¼ê³  ë¶ˆë¦¬ë©° ë‚˜ì¤‘ì— í„°ë¯¸ë„ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">kubectl</code> ì˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ê¸°ì— ì ‘ê·¼í•œë‹¤. ë§ˆìŠ¤í„° ë…¸ë“œ ë‚´ì—ë„ ì—¬ëŸ¬ êµ¬ì„± ìš”ì†Œê°€ ìˆë‹¤:</p>

<p><strong>API Server(kube-apiserver)</strong></p>
<ul>
  <li>Kubernetes ì˜ ëª¨ë“  ìš”ì²­ì´ í†µê³¼í•˜ëŠ” ê²Œì´íŠ¸ì›¨ì´</li>
  <li>kubectl, node, controller ë“± ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ API ì„œë²„ì™€ í†µì‹ </li>
  <li>ì¸ì¦/ì¸ê°€, ìš”ì²­ ê²€ì¦, REST API ì œê³µ</li>
</ul>

<p><strong>Scheduler(kube-scheduler)</strong></p>
<ul>
  <li><strong>ì–´ë–¤ Pod ë¥¼ ì–´ë–¤ Node ì— ë°°ì¹˜í• ì§€</strong> ê²°ì •</li>
  <li>CPU/ë©”ëª¨ë¦¬ ìì›, ë…¸ë“œ ìƒíƒœ, ë¦¬ì†ŒìŠ¤ ìš”êµ¬ì‚¬í•­ ë“±ì„ ê¸°ì¤€ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ë§</li>
</ul>

<p><strong>Controller Manager(kube-controller-manager)</strong></p>
<ul>
  <li>í´ëŸ¬ìŠ¤í„° ìƒíƒœë¥¼ desired state ë¡œ ìœ ì§€ì‹œí‚¤ëŠ” ê´€ë¦¬ì</li>
  <li>ì—¬ëŸ¬ ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì˜ ì§‘í•©:
    <ul>
      <li>Node Controller</li>
      <li>Deployment Controller</li>
      <li>ReplicaSet Controller</li>
      <li>Job Controller</li>
    </ul>
  </li>
  <li>Pod ê°œìˆ˜ê°€ ë¶€ì¡±í•´ì§€ë©´ ìë™ ìƒì„± ë“± ìë™í™” ë¡œì§ ìˆ˜í–‰</li>
</ul>

<p><strong>etcd</strong></p>
<ul>
  <li>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ëª¨ë“  ìƒíƒœ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë¶„ì‚° key-value ì €ì¥ì†Œ</li>
  <li>í´ëŸ¬ìŠ¤í„°ì˜ ì†ŒìŠ¤ ì˜¤ë¸Œ íŠ¸ë£¨ìŠ¤(State ì €ì¥ì†Œ)</li>
  <li>Control Plane ì˜ ìœ ì¼í•œ DB</li>
</ul>

<h4 id="worker-node-êµ¬ì„±ìš”ì†Œ">Worker Node êµ¬ì„±ìš”ì†Œ</h4>

<p>ë³´í†µ ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ ë…¸ë“œë¼ê³  ë¶€ë¥´ëŠ” ìš”ì†Œë“¤ì´ë‹¤.</p>

<p><strong>kubelet</strong></p>
<ul>
  <li>í•´ë‹¹ ë…¸ë“œì—ì„œ Podì™€ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì„ ê´€ë¦¬í•œë‹¤</li>
  <li>API Server ë¡œ ë¶€í„° ëª…ë ¹ì„ ë°›ê³  Pod ë¥¼ ìƒì„± ì‚­ì œí•œë‹¤</li>
  <li>liveness, readiness probe ë“± í—¬ìŠ¤ì²´í¬ë¥¼ ìˆ˜í–‰</li>
</ul>

<p><strong>kube-proxy</strong></p>
<ul>
  <li>ì¿ ë²„ë„¤í‹°ìŠ¤ Service ì˜ ë„¤íŠ¸ì›Œí¬ ë¼ìš°íŒ…ì„ ë‹´ë‹¹</li>
  <li><code class="language-plaintext highlighter-rouge">iptables</code> ë˜ëŠ” <strong>IPVS</strong> ê¸°ë°˜ìœ¼ë¡œ íŠ¸ë˜í”½ì„ ì˜¬ë°”ë¥¸ Pod ë¡œ ì „ë‹¬</li>
</ul>

<p><strong>Container Runtime</strong></p>
<ul>
  <li>ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì—”ì§„</li>
  <li>Docker, <code class="language-plaintext highlighter-rouge">containerd</code>, <code class="language-plaintext highlighter-rouge">CRI-O</code> ë“± ì‚¬ìš© ê°€ëŠ¥</li>
</ul>

<h4 id="kubernetes-objectë¦¬ì†ŒìŠ¤-êµ¬ì„±ìš”ì†Œ">Kubernetes Object(ë¦¬ì†ŒìŠ¤) êµ¬ì„±ìš”ì†Œ</h4>

<p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ëª¨ë“  ê²ƒë“¤ì„ Object(YAML ì„ ì–¸) ë¡œ ê´€ë¦¬í•œë‹¤.</p>

<h5 id="workload-ì˜¤ë¸Œì íŠ¸">Workload ì˜¤ë¸Œì íŠ¸</h5>

<ul>
  <li>
    <p><strong>Pod</strong>: ì»¨í…Œì´ë„ˆ 1ê°œ ì´ìƒì„ ë¬¶ì€ ìµœì†Œ ë°°í¬ ë‹¨ìœ„</p>
  </li>
  <li><strong>Deployment</strong>: ReplicaSet + ë¡¤ë§ ì—…ë°ì´íŠ¸/ë¡¤ë°± ì œê³µ
    <ul>
      <li><strong>ReplicaSet</strong>: Podì˜ ê°œìˆ˜ë¥¼ ì¼ì •í•˜ê²Œ ìœ ì§€í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬</li>
    </ul>
  </li>
  <li>
    <p><strong>StatefulSet</strong>: ê³ ì •ëœ ID ì˜ Pod ê´€ë¦¬(ex. DB, Kafka, Redis Cluster)</p>
  </li>
  <li>
    <p><strong>DaemonSet</strong>: ê° <strong>ë…¸ë“œë§ˆë‹¤ 1ê°œ</strong>ì”© Pod ë°°ì¹˜</p>
  </li>
  <li><strong>Job</strong>: í•œ ë²ˆ ìˆ˜í–‰ í›„ ì¢…ë£Œë˜ëŠ” ì‘ì—…
    <ul>
      <li><strong>CronJob</strong>: ìŠ¤ì¼€ì¤„ ê¸°ë°˜ Job ë°°ì¹˜</li>
    </ul>
  </li>
</ul>

<h5 id="service-êµ¬ì„±ìš”ì†Œ">Service êµ¬ì„±ìš”ì†Œ</h5>

<ul>
  <li>
    <p><strong>Service</strong>: Pod ë“¤ì˜ ì•ˆì •ì ì¸ ì ‘ê·¼ ì—”íŠ¸í¬ì¸íŠ¸(Load Balancing)</p>
  </li>
  <li>
    <p><strong>Type</strong>: ClusterIP, NodePort, LoadBalancer, ExternalName 4ê°€ì§€ì˜ ìœ í˜•ì´ ìˆë‹¤.</p>
  </li>
  <li>
    <p><strong>Ingress</strong>: HTTP / HTTPS ë¼ìš°íŒ…, ë„ë©”ì¸ ê¸°ë°˜, ê²½ë¡œ ê¸°ë°˜ ë¼ìš°íŒ… ì œê³µ, Ingress Controller í•„ìš”</p>
  </li>
  <li>
    <p><strong>Endpoint / EndpointSlice</strong>: Service ê°€ ì‹¤ì œ ì—°ê²°í•´ì•¼ í•˜ëŠ” Pod ì˜ IP ëª©ë¡ì„ ì €ì¥</p>
  </li>
</ul>

<h5 id="volume">Volume</h5>

<p>Pod ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì¼ì‹œì ì¸ ìŠ¤í† ë¦¬ì§€ì´ë‹¤.</p>

<ul>
  <li><strong>PersistentVolume(PV)</strong>: ê´€ë¦¬ìê°€ ì œê³µí•˜ëŠ” ì €ì¥ì†Œ</li>
  <li>
    <p><strong>PersistentVolumeClaim(PVC)</strong>: Pod ê°€ PV ë¥¼ ìš”ì²­í•˜ëŠ” ì„ ì–¸ì  ë°©ì‹</p>
  </li>
  <li><strong>StorageClass</strong>: ë™ì  ë³¼ë¥¨ í”„ë¡œë¹„ì €ë‹(í´ë¼ìš°ë“œì—ì„œ ìë™ PV ìƒì„±)</li>
</ul>

<h5 id="config--secret">Config &amp; Secret</h5>

<ul>
  <li><strong>ConfigMap</strong>: í™˜ê²½ ë³€ìˆ˜, ì„¤ì •íŒŒì¼ ë“± ë¯¼ê°í•˜ì§€ ì•Šì€ ì„¤ì • ê°’ ì €ì¥</li>
  <li><strong>Secret</strong>: íŒ¨ìŠ¤ì›Œë“œ, í† í° ë“± ë¯¼ê°í•œ ë°ì´í„° ì €ì¥, Base64 ì¸ì½”ë”©ë˜ì–´ ì €ì¥</li>
</ul>

<h5 id="networking-êµ¬ì„±ìš”ì†Œ">Networking êµ¬ì„±ìš”ì†Œ</h5>

<ul>
  <li><strong>Pod Network(CNI)</strong>: Pod ê°„ í†µì‹ ì„ ìœ„í•¨, Calico, Flannel, Cilium ë“±</li>
  <li><strong>Service Network</strong>: kube-proxy ê°€ Load Balancing ì„ ì²˜ë¦¬</li>
  <li><strong>Cluster Network</strong>: ëª¨ë“  Pod ëŠ” ì„œë¡œ í†µì‹  ê°€ëŠ¥í•´ì•¼í•œë‹¤ëŠ” ê·œì¹™</li>
</ul>

<h5 id="security-ìš”ì†Œ">Security ìš”ì†Œ</h5>

<ul>
  <li><strong>RBAC</strong>: ì‚¬ìš©ì/ì„œë¹„ìŠ¤ ê³„ì •ì˜ ê¶Œí•œ ê´€ë¦¬</li>
  <li><strong>ServiceAccount</strong>: Pod ë‚´ë¶€ì—ì„œ API Server ì ‘ê·¼ ì‹œ ì‚¬ìš©í•˜ëŠ” ê³„ì •</li>
  <li><strong>NetworkPolicy</strong>: Pod ê°„ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ì œì–´ ë°©í™”ë²½</li>
  <li><strong>PodSecurity(PodSecurityPolicy)</strong></li>
</ul>

<p><img src="/seonghun120614/assets/img/kubernetes-cluster-architecture.svg" alt="assets/img/kubernetes-cluster-architecture.svg" /></p>

<p>ìœ„ë“¤ ì¤‘ì— ëª‡ ê°œë§Œ ë³¸ë‹¤.</p>

<h3 id="deployment">Deployment</h3>

<p>Deployment ëŠ” ì„ ì–¸ì ìœ¼ë¡œ Pod ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°€ì¥ í”í•œ ì›Œí¬ë¡œë“œ ì˜¤ë¸Œì íŠ¸ì´ë‹¤. ì£¼ë¡œ ë‹¤ìŒì„ ìœ„í•´ ì‚¬ìš©í•˜ê²Œ ëœë‹¤:</p>

<ul>
  <li>replica ìœ ì§€</li>
  <li>ë¡¤ë§ ì—…ë°ì´íŠ¸ ë° ë¡¤ë°±</li>
  <li>ì„ ì–¸ì  ìŠ¤ì¼€ì¼ë§</li>
</ul>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">hello-nginx</span>
<span class="na">spec</span><span class="pi">:</span>
    <span class="na">replicas</span><span class="pi">:</span> <span class="m">2</span>
    <span class="na">selector</span><span class="pi">:</span>
        <span class="na">matchLabels</span><span class="pi">:</span>
            <span class="na">app</span><span class="pi">:</span> <span class="s">hello-nginx</span>
    <span class="na">template</span><span class="pi">:</span>
        <span class="na">metadata</span><span class="pi">:</span>
            <span class="na">labels</span><span class="pi">:</span>
                <span class="na">app</span><span class="pi">:</span> <span class="s">hello-nginx</span>
        <span class="na">spec</span><span class="pi">:</span>
            <span class="na">containers</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nginx-container</span>
              <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:1.26-alpine</span>
              <span class="na">ports</span><span class="pi">:</span>
              <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="s">80</span></code></pre></figure>

<p>ê°€ì¥ ê¸°ë³¸ì ì¸ êµ¬ì¡°ì´ë©°, ìœ„ë¥¼ ì“´ í›„ ë‹¤ìŒ ëª…ë ¹ì„ ì ìš©ì‹œí‚¬ ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">kubectl apply <span class="nt">-f</span> &lt;íŒŒì¼ëª…&gt;.yml

kubectl get deployments <span class="c"># deployment í™•ì¸</span>
kubectl get pods <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>hello-nginx <span class="c"># deployment ì— ì˜í•´ êµ¬ë™ëœ pod í™•ì¸</span></code></pre></figure>

<p>ìœ„ í•„ë“œë“¤ì„ í•˜ë‚˜í•˜ë‚˜ ë³´ì. ì˜ë¯¸ê°€ ì§ê´€ì ì¸ ê²ƒë“¤ì€ ì „ë¶€ ìƒëµí•œë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">selector.matchLabels</code>: deployment ê°€ ê´€ë¦¬í•  Podë¥¼ ì„ íƒí•˜ëŠ” ê¸°ì¤€</li>
  <li><code class="language-plaintext highlighter-rouge">template.metadata.labels</code>: ìƒì„±ë  Pod ì— ë¶™ëŠ” ë¼ë²¨</li>
  <li><code class="language-plaintext highlighter-rouge">containers[].image</code>: ì‹¤ì œ ì‹¤í–‰í•  ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€</li>
  <li><code class="language-plaintext highlighter-rouge">containers[].ports[].containerPort</code>: ì»¨í…Œì´ë„ˆ ë‚´ë¶€ í¬íŠ¸(ë¬¸ì„œí™” ëª©ì )</li>
</ul>

<p>ìœ„ì²˜ëŸ¼ êµ¬ë™í•˜ë©´ í•˜ë‚˜ì˜ Pod ê°€ ë„ì›Œì§€ê²Œ ë˜ë©° <code class="language-plaintext highlighter-rouge">localhost:&lt;í¬íŠ¸&gt;</code> ë¡œ ì ‘ì†í•  ìˆ˜ ìˆê²Œ ëœë‹¤.</p>

<h4 id="kubectl-ë¡œ-ëª…ë ¹-ì‹¤ìŠµ">Kubectl ë¡œ ëª…ë ¹ ì‹¤ìŠµ</h4>

<p><code class="language-plaintext highlighter-rouge">kubectl apply -f &lt;íŒŒì¼&gt;</code> ì„ í†µí•´ deployment ë¥¼ ë„ìš´ ê²ƒì„ ë³´ì•˜ë‹¤. ë‹¤ìŒ ëª…ë ¹ë„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤</p>

<p><strong>Scailing</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">kubectl scale deployment/hello-nginx <span class="nt">--replicas</span><span class="o">=</span>4</code></pre></figure>

<p><strong>Image Update/Rolling</strong></p>

<p>ì‹¤í–‰ ì¤‘ì¸ ë¦¬ì†ŒìŠ¤ì˜ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ëª…ë ¹ì´ë‹¤.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># kubectl set image &lt;ë¦¬ì†ŒìŠ¤íƒ€ì…&gt;/&lt;ë¦¬ì†ŒìŠ¤ëª…&gt; &lt;ì»¨í…Œì´ë„ˆëª…&gt;=&lt;ìƒˆì´ë¯¸ì§€&gt; [ì˜µì…˜]</span>
kubectl <span class="nb">set </span>image deployment/hello-nginx nginx-container<span class="o">=</span>nginx:1.16.1</code></pre></figure>

<h3 id="service">Service</h3>

<p>Kubernetes ì—ì„œ Pod ëŠ” ì¼íšŒìš© ë¦¬ì†ŒìŠ¤ì´ë‹¤. Pod ë¥¼ ì‚­ì œ í˜¹ì€ ì¬ì‹œì‘ì„ í•˜ë©´ ë‹¤ì‹œ ìƒˆë¡œìš´ IP ê°€ í• ë‹¹ë˜ë©°, ìŠ¤ì¼€ì¼ë§ ë  ëŒ€ì—ë„ ìƒˆë¡œìš´ IP ë“¤ì´ ìƒì„±ë˜ê²Œ ëœë‹¤. ì´ëŸ¬í•œ ì—”ë“œí¬ì¸íŠ¸ì˜ ë³€ë™ì„± ë•Œë¬¸ì— Pod IP ë¥¼ ì§ì ‘ ì‚¬ìš©í•œë‹¤ë©´ í”„ë¡ íŠ¸ ì—”ë“œê°€ ë°±ì—”ë“œ Pod IP ë¥¼ ìŠ¤ì¼€ì¼ë§ ë˜ê±°ë‚˜ ë¦¬ë¡œë”© ë  ë•Œ ë‹¤ì‹œ ë°”ê¿”ì¤˜ì•¼ í•˜ëŠ” ë¬¸ì œê°€ ìƒê¸°ë©°, Pod ê°€ ì¬ì‹œì‘ë  ë•Œë§ˆë‹¤ IP ê°€ ë‹¬ë¼ì ¸ ì„¤ì • ì •ë³´ë¥¼ ë°”ê¿”ì¤˜ì•¼ í•˜ë©°, ì—¬ëŸ¬ Pod ì— íŠ¸ë˜í”½ì„ ë¶„ì‚° í•  ë°©ë²•ì´ ì—†ê²Œ ëœë‹¤.</p>

<p>ë”°ë¼ì„œ Service ë¼ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ í†µí•´ Pod ì•ì— ìœ„ì¹˜í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ ì¶”ìƒí™”í•œ ê³„ì¸µì„ ì¶”ê°€í•˜ì—¬ ë‹¤ìŒì˜ êµ¬ì¡°ë¥¼ ê°€ì ¸ê°„ë‹¤.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">[í´ë¼ì´ì–¸íŠ¸] 
    â†“
[Service: ê³ ì • IP/DNS]
    â†“ (ë¡œë“œë°¸ëŸ°ì‹±)
[Pod-1] [Pod-2] [Pod-3] â† IPëŠ” ê³„ì† ë°”ë€Œì§€ë§Œ ServiceëŠ” ì•ˆì •ì </code></pre></figure>

<p>Service ê°€ ì œê³µí•˜ëŠ” í•µì‹¬ ê¸°ëŠ¥:</p>
<ol>
  <li><strong>ê³ ì • IP ì£¼ì†Œ</strong>: ClusterIP ëŠ” Service ì‚­ì œ ì „ê¹Œì§€ ìœ ì§€</li>
  <li><strong>DNS ì´ë¦„</strong>: <code class="language-plaintext highlighter-rouge">service-name.namespace.svc.cluster.local</code> í˜•íƒœë¡œ ì ‘ê·¼</li>
  <li><strong>ìë™ ë¡œë“œë°¸ëŸ°ì‹±</strong>: ì—¬ëŸ¬ Pod ì— íŠ¸ë˜í”½ì„ ê· ë“± ë¶„ë°°</li>
  <li><strong>í—¬ìŠ¤ì²´í¬</strong>: ë¹„ì •ìƒ Pod ë¡œëŠ” íŠ¸ë˜í”½ì„ ë³´ë‚´ì§€ ì•ŠìŒ</li>
</ol>

<p>ìœ„ë¥¼ í†µí•´ ìš°ë¦¬ëŠ” Pod ê°€ ë³€ê²½, ì¶”ê°€, ì‚­ì œê°€ ë˜ë”ë¼ë„ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ë¥¼ ìš´ìš© ê°€ëŠ¥í•˜ë‹¤.</p>

<h4 id="service-íƒ€ì…">Service íƒ€ì…</h4>

<ol>
  <li>ClusterIP</li>
</ol>

<p>í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ ì „ìš© í†µì‹ ë§ì´ë©°, ì™¸ë¶€ì—ì„  ì ‘ê·¼ì„ ëª»í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">backend-service</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">ClusterIP</span>  <span class="c1"># ìƒëµ ê°€ëŠ¥ (ê¸°ë³¸ê°’)</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">backend</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">8080</span>        <span class="c1"># Service í¬íŠ¸</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="m">8080</span>  <span class="c1"># Pod ì»¨í…Œì´ë„ˆ í¬íŠ¸</span></code></pre></figure>

<ul>
  <li>í”„ë¡ íŠ¸ -&gt; ë°±ì—”ë“œ API í†µì‹ í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©</li>
  <li>ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ ê°„ì˜ ë‚´ë¶€ í†µì‹ </li>
  <li>ë°ì´í„°ë² ì´ìŠ¤, ìºì‹œ ì„œë²„ ì ‘ê·¼</li>
</ul>

<ol>
  <li>NodePort</li>
</ol>

<p>ê° ë…¸ë“œì˜ íŠ¹ì • í¬íŠ¸ë¥¼ ê°œë°©í•˜ì—¬ ì™¸ë¶€ ì ‘ê·¼ì„ í—ˆìš©í•˜ë„ë¡ í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">web-service</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">NodePort</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">web</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="m">80</span>
      <span class="na">nodePort</span><span class="pi">:</span> <span class="m">30080</span>  <span class="c1"># 30000-32767 ë²”ìœ„</span></code></pre></figure>

<p>ë™ì‘ ë°©ì‹:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">[ì™¸ë¶€ í´ë¼ì´ì–¸íŠ¸]
    â†“
http://&lt;ë…¸ë“œIP&gt;:30080
    â†“
[ë…¸ë“œì˜ 30080 í¬íŠ¸]
    â†“
[Service (ClusterIP ìë™ ìƒì„±)]
    â†“
[Podë“¤]</code></pre></figure>

<ul>
  <li>ê°œë°œ / í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ë¹ ë¥¸ ì™¸ë¶€ ë…¸ì¶œì„ ìœ„í•´ ì‚¬ìš©í•˜ë©°</li>
  <li>ë¡œì»¬ Kubernetes í´ëŸ¬ìŠ¤í„°(Docker Desktop, Minikube) ì—ì„œ ì‚¬ìš©í•œë‹¤.</li>
</ul>

<ol>
  <li>LoadBalancer</li>
</ol>

<p>í´ë¼ìš°ë“œ ì œê³µìì˜ ë¡œë“œë°¸ëŸ°ì„œë¥¼ ìë™ ìƒì„±í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">public-web-service</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">LoadBalancer</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">web</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">8080</span></code></pre></figure>

<p><strong>ë™ì‘ ë°©ì‹</strong></p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">[ì¸í„°ë„·]
    â†“
http://a1b2c3-xyz.elb.amazonaws.com
    â†“
[AWS ELB ìë™ ìƒì„±]
    â†“
[Kubernetes Service]
    â†“
[Podë“¤]</code></pre></figure>

<ul>
  <li>AWS, GCP, Azure ë“±ì˜ í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œë§Œ ë™ì‘</li>
</ul>

<h4 id="ì‹¤ìŠµ">ì‹¤ìŠµ</h4>

<p>ì—¬ê¸°ì„œëŠ” ìì£¼ ì‚¬ìš©í•˜ëŠ” NodePort ë¥¼ ë³´ì.</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="nn">---</span>
<span class="c1"># Deployment: nginx ì»¨í…Œì´ë„ˆ ì‹¤í–‰</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">hello-deployment</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>  <span class="c1"># Pod 1ê°œ ì‹¤í–‰</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">hello-nginx</span>  <span class="c1"># ì´ ë¼ë²¨ë¡œ Pod ì„ íƒ</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">hello-nginx</span>  <span class="c1"># Podì— ë¶€ì—¬í•  ë¼ë²¨</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nginx-container</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:alpine</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">80</span>  <span class="c1"># nginx ê¸°ë³¸ í¬íŠ¸</span>

<span class="nn">---</span>
<span class="c1"># Service: NodePortë¡œ ì™¸ë¶€ ë…¸ì¶œ</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">hello-service</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">NodePort</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">hello-nginx</span>  <span class="c1"># ìœ„ Deploymentì˜ ë¼ë²¨ê³¼ ì¼ì¹˜</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>        <span class="c1"># Service ë‚´ë¶€ í¬íŠ¸</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="m">80</span>  <span class="c1"># Podì˜ ì»¨í…Œì´ë„ˆ í¬íŠ¸</span>
      <span class="na">nodePort</span><span class="pi">:</span> <span class="m">30080</span> <span class="c1"># ë…¸ë“œì—ì„œ ê°œë°©í•  í¬íŠ¸ (ì„ íƒì‚¬í•­)</span></code></pre></figure>

<ul>
  <li><code class="language-plaintext highlighter-rouge">spec.ports.port</code>: ì„œë¹„ìŠ¤ê°€ ì œê³µí•  í¬íŠ¸</li>
  <li><code class="language-plaintext highlighter-rouge">spec.ports.targetPort</code>: Pod ë¡œ ì „ë‹¬í•  í¬íŠ¸</li>
  <li><code class="language-plaintext highlighter-rouge">spec.ports.nodePort</code>: ë…¸ë“œì—ì„œ ì—´ í¬íŠ¸(30000-32767)</li>
</ul>

<h5 id="endpoints">Endpoints</h5>

<p>ì—¬ê¸°ì„œ ì´ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ Docker ë‚´ë¶€ì—ì„œëŠ” Service ê°€ ì‹¤í–‰ í›„ íŠ¸ë˜í”½ì„ ë³´ë‚¼ ì‹¤ì œ ëŒ€ìƒì¸ Endpoints ë¼ëŠ” êµ¬ì„±ìš”ì†Œê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ê²Œ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Endpoints</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">hello-service</span>
<span class="na">subsets</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">addresses</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">ip</span><span class="pi">:</span> <span class="s">10.1.0.15</span>  <span class="c1"># Pod IP</span>
    <span class="na">targetRef</span><span class="pi">:</span>
      <span class="na">kind</span><span class="pi">:</span> <span class="s">Pod</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">hello-deployment-7d4f8c9b6d-x5k2m</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span></code></pre></figure>

<blockquote>
  <p>endpoint = service ê°€ íŠ¸ë˜í”½ì„ ë³´ë‚¼ ì‹¤ì œ ëŒ€ìƒ</p>
</blockquote>

<p>ì•„ë˜ ëª…ë ¹ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">kubectl get endpoints hello-service <span class="nt">-o</span> yaml</code></pre></figure>

<h5 id="ë¡œë“œë°¸ëŸ°ì‹±-í™•ì¸">ë¡œë“œë°¸ëŸ°ì‹± í™•ì¸</h5>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">kubectl scale deployment hello-deployment <span class="nt">--replicas</span><span class="o">=</span>3

kubectl get pods <span class="nt">-o</span> wide</code></pre></figure>

<p>ìœ„ë¥¼ ì‹¤í–‰í•˜ë©´ ê°ê¸° ë‹¤ë¥¸ ip ë¡œ 3ê°œì˜ pod ê°€ ì‹¤í–‰ë˜ê³  ìˆìŒì„ ë³¼ ìˆ˜ ìˆê³ , end point ë„ ê·¸ì— ë§ê²Œ ë°”ë€ŒëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">kubectl get endpoints hello-service</code></pre></figure>

<p>ì´ì œ <code class="language-plaintext highlighter-rouge">curl</code> ëª…ë ¹ì„ í†µí•´ ì‹¤ì œë¡œ ë¡œë“œ ë°¸ëŸ°ì‹±ì´ ë˜ëŠ”ì§€ ë³´ì. ìš°ì„  Pod ë§ˆë‹¤ <code class="language-plaintext highlighter-rouge">index.html</code> ì„ ë‹¬ë¦¬ ê°€ì ¸ê°€ì.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/bin/bash</span>

<span class="nb">set</span> <span class="nt">-euo</span> pipefail

<span class="nv">NUM</span><span class="o">=</span>1
<span class="k">for </span>container <span class="k">in</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span><span class="p">;</span> <span class="k">do
    </span>kubectl <span class="nb">exec</span> <span class="nt">-i</span> <span class="s2">"</span><span class="nv">$container</span><span class="s2">"</span> <span class="nt">--</span> sh <span class="nt">-c</span> <span class="s2">"echo 'Pod </span><span class="k">${</span><span class="nv">NUM</span><span class="k">}</span><span class="s2">' &gt; /usr/share/nginx/html/index.html"</span>
    <span class="o">((</span>NUM++<span class="o">))</span>
<span class="k">done</span></code></pre></figure>

<p>ì´ì œ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ index.html ì´ ëœ¨ëŠ”ì§€ ë³´ì.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">for </span>i <span class="k">in</span> <span class="o">{</span>1..10<span class="o">}</span><span class="p">;</span> <span class="k">do
  </span>curl <span class="nt">-s</span> http://localhost:30080
<span class="k">done</span></code></pre></figure>

<h5 id="kube-proxy-ì˜-ì—­í• ">kube-proxy ì˜ ì—­í• </h5>

<p>ê° ë…¸ë“œì˜ <code class="language-plaintext highlighter-rouge">kube-proxy</code> ê°€ Service ê·œì¹™ì„ êµ¬í˜„í•˜ë©°</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">[ì™¸ë¶€ í´ë¼ì´ì–¸íŠ¸] 
    â†“ curl http://192.168.1.100:30080
[ë…¸ë“œì˜ 30080 í¬íŠ¸]
    â†“ "ëˆ„ê°€ 30080ìœ¼ë¡œ ìš”ì²­"
[kube-proxyì˜ iptables/IPVS ê·œì¹™]
    â†“ "ì´ íŠ¸ë˜í”½ì€ hello-serviceë¡œ ê°€ì•¼í•¨ì„ ì•Œë¦¼"
    â†“ "hello-service ì˜ Pod ì¤‘ í•˜ë‚˜ë¥¼ ê³ ë¦„"
    â†“ ë¡œë“œë°¸ëŸ°ì‹± (ëœë¤ ë˜ëŠ” ë¼ìš´ë“œë¡œë¹ˆ)
[ì„ íƒëœ Pod 10.1.0.15:80]
    â†“ nginx ì‘ë‹µ
[í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µ ë°˜í™˜]</code></pre></figure>

<p>ìœ„ì²˜ëŸ¼ ë™ì‘í•˜ê²Œ ëœë‹¤.</p>

<h5 id="service-ì—ì„œì˜-íŒ¨í‚·-íë¦„">Service ì—ì„œì˜ íŒ¨í‚· íë¦„</h5>

<p><strong>ìš”ì²­ íë¦„</strong></p>
<ol>
  <li>
    <p>í´ë¼ì´ì–¸íŠ¸: curl http://192.168.1.100:30080<br />
Src: 203.0.113.50:54321<br />
Dst: 192.168.1.100:30080</p>
  </li>
  <li>
    <p>ë…¸ë“œ ë„ì°© â†’ kube-proxy ê·œì¹™ ì ìš©<br />
â€œ30080? hello-service ë¡œ ê°€ì•¼í•¨ì„ ì•Œì•„ëƒ„â€<br />
â€œPod 3ê°œ ì¤‘â€¦ Pod2 ì„ íƒâ€</p>
  </li>
  <li>
    <p>DNAT ìˆ˜í–‰ (ëª©ì ì§€ ë³€ê²½)<br />
Src: 203.0.113.50:54321<br />
Dst: 10.1.0.16:80  â¬…ï¸ ë³€ê²½</p>
  </li>
  <li>
    <p>Pod ë„ì°© â†’ nginx ì²˜ë¦¬<br />
â€œGET / HTTP/1.1 ë°›ìŒâ€</p>
  </li>
</ol>

<p><strong>ì‘ë‹µ íë¦„ (Response)</strong></p>
<ol>
  <li>
    <p>Pod ì‘ë‹µ ì „ì†¡
Src: 10.1.0.16:80
Dst: 203.0.113.50:54321</p>
  </li>
  <li>
    <p>ë…¸ë“œì—ì„œ SNAT ìˆ˜í–‰ (ì¶œë°œì§€ ë³€ê²½)
Src: 192.168.1.100:30080  â¬…ï¸ ë³€ê²½ë¨
Dst: 203.0.113.50:54321</p>
  </li>
  <li>
    <p>í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì‹ 
â€œ192.168.1.100:30080ì—ì„œ ì‘ë‹µì´ ì˜´â€</p>
  </li>
</ol>

<h5 id="ì „ì²´-ì•„í‚¤í…ì²˜-ìš”ì•½">ì „ì²´ ì•„í‚¤í…ì²˜ ìš”ì•½</h5>

<figure class="highlight"><pre><code class="language-text" data-lang="text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Kubernetes í´ëŸ¬ìŠ¤í„°                  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Worker Node                       â”‚ â”‚
â”‚  â”‚                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  kube-proxy (DaemonSet)                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - API Server ê°ì‹œ                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - Service/Endpoint ë³€ê²½ ê°ì§€              â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - iptables/IPVS ê·œì¹™ ì—…ë°ì´íŠ¸              â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚          â†“ ê·œì¹™ ì ìš©                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  Linux Kernel                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  iptables    â”‚  â”‚    IPVS      â”‚      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  (NAT í…Œì´ë¸”) â”‚   â”‚   (ê°€ìƒì„œë²„)   â”‚      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚          â†“ íŒ¨í‚· ë¼ìš°íŒ…                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Pod 10.1.0.15:80  (nginx)              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Pod 10.1.0.16:80  (nginx)              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Pod 10.1.0.17:80  (nginx)              â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre></figure>

<h3 id="configmap--secret">ConfigMap &amp; Secret</h3>

<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ìš´ì˜í•  ë•Œ ê°€ì¥ ì¤‘ìš”í•œ ì›ì¹™ ì¤‘ í•˜ë‚˜ëŠ” ì„¤ì •ê³¼ ì½”ë“œì˜ ë¶„ë¦¬ì´ë‹¤. ConfigMap ê³¼ Secret ì€ ì´ë¥¼ ì‹¤í˜„í•˜ëŠ” í•µì‹¬ ë¦¬ì†ŒìŠ¤ì´ë‹¤.</p>

<h4 id="configmap">ConfigMap</h4>

<p>ë³´ì—¬ì ¸ë„ ìƒê´€ì´ ì—†ëŠ” ì„¤ì • ë°ì´í„°ë¥¼ key-value ìŒìœ¼ë¡œ ì €ì¥í•˜ëŠ” API ì˜¤ë¸Œì íŠ¸ì´ë‹¤.</p>

<p><strong>íŠ¹ì§•</strong></p>
<ol>
  <li>í™˜ê²½ ë…ë¦½ì„±: ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì™€ ì„¤ì •ì„ ë¶„ë¦¬í•˜ì—¬ ë™ì¼í•œ ì´ë¯¸ì§€ë¥¼ dev/staging/production í™˜ê²½ì—ì„œ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
  <li>ë°ì´ì— í˜•ì‹: UTF-8 ë¬¸ìì—´ ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤(ë°”ì´ë„ˆë¦¬ ë¶ˆê°€)</li>
  <li>í¬ê¸° ì œí•œ: 1MB ê¹Œì§€ ì €ì¥ ê°€ëŠ¥í•˜ë‹¨(etcd ì˜ ì˜¤ë¸Œì íŠ¸ í¬ê¸° ì œí•œ</li>
</ol>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">app-config</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="c1"># ë‹¨ìˆœ key-value</span>
  <span class="na">database_url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">postgresql://db.example.com:5432"</span>
  <span class="na">log_level</span><span class="pi">:</span> <span class="s2">"</span><span class="s">info"</span>
  
  <span class="c1"># íŒŒì¼ í˜•íƒœì˜ ì„¤ì •</span>
  <span class="s">app.properties</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">server.port=8080</span>
    <span class="s">server.timeout=30s</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">apiVersion</code>, <code class="language-plaintext highlighter-rouge">kind</code>, <code class="language-plaintext highlighter-rouge">metadata.name</code> ê¹Œì§€ëŠ” ì „ë¶€ ë™ì¼í•˜ë‹¤. data ë¸”ë¡ì—ì„œ ë‹¨ìˆœ key-value ì˜ í˜•íƒœë¡œ í™˜ê²½ë³€ìˆ˜ë¥¼ ë„£ì–´ì¤„ ìˆ˜ ìˆê³ , ë§Œì•½ íŒŒì¼ë¡œ <code class="language-plaintext highlighter-rouge">app.properties</code> ë¼ëŠ” ê²ƒì„ ë„£ê³  ì‹¶ì„ë•ŒëŠ” ìœ„ì™€ ê°™ì´ <code class="language-plaintext highlighter-rouge">|</code> ê¸°í˜¸ë¥¼ í†µí•´ key-value ìŒìœ¼ë¡œ ë„£ì–´ì£¼ë©´ ë˜ê² ë‹¤.</p>

<h4 id="secret">Secret</h4>

<p>Secret ì€ ë°ì´í„°ê°€ base64ë¡œ ì¸ì½”ë”©ë˜ì–´ ì €ì¥ì´ ë˜ë©°, í´ëŸ¬ìŠ¤í„° ì„¤ì •ì— ë”°ë¼ etcd ì•”í˜¸í™”í•˜ì—¬ ì €ì¥ë„ ê°€ëŠ¥í•˜ë‹¤. <code class="language-plaintext highlighter-rouge">ConfigMap</code> ê³¼ <code class="language-plaintext highlighter-rouge">Secret</code> ì€ ë‘˜ ë‹¤ etcd ì— ì˜êµ¬ ì €ì¥ë˜ì§€ë§Œ, ë‚˜ì¤‘ì— ë°°ìš¸ <code class="language-plaintext highlighter-rouge">Volume</code> ì˜ ë§ˆìš´íŠ¸ ì‹œì— ConfigMap ì€ ì¼ë°˜ íŒŒì¼ì‹œìŠ¤í…œìœ¼ë¡œ, Secret ì€ tmpfs ë¼ëŠ” ë©”ëª¨ë¦¬ì— ë§ˆìš´íŠ¸ ë˜ì–´ Pod ì‚­ì œ ì‹œ ì‚¬ë¼ì§€ê²Œ ëœë‹¤.</p>

<p><strong>ê¸°ëŠ¥</strong></p>
<ul>
  <li>Base64 ì¸ì½”ë”©: ë°ì´í„°ê°€ base64 ë¡œ ì¸ì½”ë”©ë˜ì–´ ì €ì¥</li>
  <li>etcd ì•”í˜¸í™”: í´ëŸ¬ìŠ¤í„° ì„¤ì •ì— ë”°ë¼ <code class="language-plaintext highlighter-rouge">etcd</code> ì— ì•”í˜¸í™”ë˜ì–´ ì €ì¥ ê°€ëŠ¥</li>
  <li>ë©”ëª¨ë¦¬ ì €ì¥: <code class="language-plaintext highlighter-rouge">Secret</code> ì„ volume ìœ¼ë¡œ ë§ˆìš´íŠ¸í•˜ë©´ <code class="language-plaintext highlighter-rouge">tmpfs(RAM)</code> ì— ì €ì¥ë˜ì–´ ë””ìŠ¤í¬ì— ê¸°ë¡ë˜ì§€ ì•ŠìŒ</li>
  <li>RBAC ë¶„ë¦¬: <code class="language-plaintext highlighter-rouge">Secret</code> ê³¼ <code class="language-plaintext highlighter-rouge">ConfigMap</code> íŒŒì¼ì„ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ì ‘ê·¼ ê¶Œí•œ ë‹¬ë¦¬ ì„¤ì • ê°€ëŠ¥</li>
</ul>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">db-secret</span>
<span class="na">type</span><span class="pi">:</span> <span class="s">Opaque</span>  <span class="c1"># ê°€ì¥ ì¼ë°˜ì ì¸ íƒ€ì…</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">YWRtaW4=</span>  <span class="c1"># base64 encoded "admin"</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s">cGFzc3dvcmQxMjM=</span>  <span class="c1"># base64 encoded "password123"</span></code></pre></figure>

<blockquote>
  <p>data ë¸”ë¡ ëŒ€ì‹  stringData ë¸”ë¡ì„ ì“°ë©´ êµ³ì´ encoding ê°’ì„ ì•ˆë„£ì–´ë„ ìë™ìœ¼ë¡œ base64ë¡œ ì¸ì½”ë”© í•´ì¤€ë‹¤.<br />
stringData:<br />
    username: admin<br />
    password: password</p>

  <p>ë˜í•œ Kubernetes 1.21+ ì—ì„œëŠ” ë¶ˆë³€ ì„¤ì •ì„ ì§€ì›í•œë‹¤.<br />
immutable: true</p>
</blockquote>

<h5 id="secret-ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤">Secret ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤</h5>

<p>Secret ì€ base64 ì¸ì½”ë”©ì¼ ë¿ ì•”í˜¸í™”ëŠ” ì•„ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë‹¤ìŒì„ ë³´ì:</p>

<p><strong>ë°©ë²•1: etcd ì•”í˜¸í™” í™œì„±í™”</strong></p>

<p>ì •í™•í•œ ë³´ì•ˆì„ ìœ„í•´ì„œëŠ” <code class="language-plaintext highlighter-rouge">EncryptionConfiguration</code> íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ ì•”í˜¸í™”ë¥¼ í™œì„±í™”í•´ì¤€ë‹¤.</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="c1"># EncryptionConfiguration</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apiserver.config.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">EncryptionConfiguration</span>
<span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">secrets</span>
    <span class="na">providers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">aescbc</span><span class="pi">:</span>
          <span class="na">keys</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">key1</span>
              <span class="na">secret</span><span class="pi">:</span> <span class="s">&lt;base64-encoded-32-byte-key&gt;</span></code></pre></figure>

<p>ìœ„ì²˜ëŸ¼ aes ë°©ì‹ì˜ ì•”í˜¸í™”ë¥¼ ì‹œì¼œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤. ì´ëŸ° <code class="language-plaintext highlighter-rouge">EncryptionConfiguration</code> ì€ ì‘ì„±ë§Œ í•˜ë©´ ë˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ë‹¤ìŒ <code class="language-plaintext highlighter-rouge">kube-apiserver</code> ì‹œì‘ ì˜µì…˜ìœ¼ë¡œ ì ìš©ì‹œì¼œì¤˜ì•¼ í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">kube-apiserver <span class="nt">--encryption-provider-config</span><span class="o">=</span>&lt;encription-config&gt;.yaml</code></pre></figure>

<p><strong>ë°©ë²•2: ì™¸ë¶€ Secret ê´€ë¦¬ ì†”ë£¨ì…˜ ì‚¬ìš©</strong></p>

<ul>
  <li><strong>Sealed Secrets</strong>: GitOps ì›Œí¬í”Œë¡œìš°ì— ì í•©í•˜ë©° ì•”í˜¸í™”ëœ Secret ì„ Gitì— ì•ˆì „í•˜ê²Œ ì €ì¥í•œë‹¤</li>
  <li><strong>External Secrets</strong> Operator: AWS Secrets Manager, HashiCorp Vault ë“±ê³¼ ì—°ë™í•œë‹¤.</li>
  <li><strong>HashiCorp Vault</strong>: ë™ì  Secret ìƒì„±, ìë™ ë¡œí…Œì´ì…˜, ì„¸ë°€í•œ ì ‘ê·¼ ì œì–´</li>
</ul>

<p><strong>ë°©ë²•3: RBAC ì—„ê²©í•˜ê²Œ ì„¤ì •</strong></p>

<p>Role êµ¬ì„± ìš”ì†Œë¥¼ í†µí•´ ê°’ì˜ ì ‘ê·¼ì„ ì œì–´í•  ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Role</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">secret-reader</span>
<span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">"</span><span class="pi">]</span>
    <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">secrets"</span><span class="pi">]</span>
    <span class="na">resourceNames</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">db-secret"</span><span class="pi">]</span>  <span class="c1"># íŠ¹ì • Secretë§Œ ì ‘ê·¼</span>
    <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">get"</span><span class="pi">]</span></code></pre></figure>

<h3 id="volume-1">Volume</h3>

<p>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ Pod ì™€ ì»¨í…Œì´ë„ˆëŠ” ê¸°ë³¸ì ìœ¼ë¡œ íœ˜ë°œì„± ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì•Œê³  ìˆì„ ê²ƒì´ë‹¤. ì´ë¥¼ íœ˜ë°œë˜ì§€ ì•Šë„ë¡ í•˜ëŠ”ê²Œ Volume ì´ë©° ì´ë¥¼ ì‚¬ìš©í•˜ë©´:</p>

<ul>
  <li>ë°ì´í„° ì˜ì†í™”(Persistence) ê°€ ê°€ëŠ¥</li>
  <li>ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆì˜ ê³µìœ  ìŠ¤í† ë¦¬ì§€ ì‚¬ìš© ê°€ëŠ¥</li>
  <li>ì™¸ë¶€ ìŠ¤í† ë¦¬ì§€ ì—°ê²° ê°€ëŠ¥</li>
</ul>

<p>ì™€ ê°™ì€ ê¸°ëŠ¥ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p>

<blockquote>
  <p>ì»¨í…Œì´ë„ˆì˜ íŒŒì¼ì‹œìŠ¤í…œì€ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ì—ì„œ ì‹œì‘ë˜ëŠ”ë°, ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ íŒŒì¼ì„ ìƒì„±í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ë©´, ê·¸ ë³€ê²½ì‚¬í•­ì€ ì»¨í…Œì´ë„ˆ ë ˆì´ì–´ì—ë§Œ ê¸°ë¡ë˜ë©°, ì»¨í…Œì´ë„ˆê°€ ì‚­ì œë˜ë©´ ë‹¹ì—°íˆ ë ˆì´ì–´ë„ í•¨ê»˜ ì‚¬ë¼ì§€ê²Œ ëœë‹¤.</p>
</blockquote>

<h4 id="ephemeral-volume-ì„ì‹œ-ë³¼ë¥¨">Ephemeral Volume ì„ì‹œ ë³¼ë¥¨</h4>

<p>Pod ì˜ ìƒëª…ì£¼ê¸°ì™€ ê°™ì´ ì›€ì§ì´ë©° ì¢…ë¥˜ë¡œëŠ” ë‹¤ìŒì´ ìˆë‹¤:</p>

<ul>
  <li>EmptyDir: ë¹ˆ ë””ë ‰í† ë¦¬ë¡œ ì‹œì‘, Pod ë‚´ ì»¨í…Œì´ë„ˆ ê°„ ì„ì‹œ íŒŒì¼ ê³µìœ ìš©ì´ë‹¤.</li>
  <li>ConfigMap: ì„¤ì • íŒŒì¼ì„ Volume ìœ¼ë¡œ ë§ˆìš´íŠ¸ í•  ë•Œ, Emphemeral Volume ìœ¼ë¡œ ë§ˆìš´íŠ¸</li>
  <li>Secret: ë¯¼ê° ì •ë³´ë¥¼ tmpfs ë¼ëŠ” ë©”ëª¨ë¦¬ì— ì €ì¥</li>
</ul>

<p>ìœ„ëŠ” ì „ë¶€ <code class="language-plaintext highlighter-rouge">Emphemeral Volume</code> ì´ë‹¤.</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">volumes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">cache-volume</span>
    <span class="na">emptyDir</span><span class="pi">:</span> <span class="pi">{}</span>  <span class="c1"># ì„ì‹œ ìºì‹œ ë””ë ‰í† ë¦¬</span></code></pre></figure>

<h4 id="persistent-volume-ì˜ì†ì„±-ë³¼ë¥¨">Persistent Volume ì˜ì†ì„± ë³¼ë¥¨</h4>

<p>Pod ì™€ ë…ë¦½ì ìœ¼ë¡œ ì¡´ì¬í•˜ë©° Pod ê°€ ì‚­ì œë˜ì–´ë„ ë°ì´í„°ëŠ” ìœ ì§€ê°€ ëœë‹¤.</p>

<p><strong>PersistentVolume ë§Œë“¤ê¸°</strong></p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">PersistentVolume</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">my-pv</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">capacity</span><span class="pi">:</span>
    <span class="na">storage</span><span class="pi">:</span> <span class="s">1Gi</span>                    <span class="c1"># ì´ ì°½ê³ ì˜ ì´ ìš©ëŸ‰</span>
  <span class="na">accessModes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">ReadWriteOnce</span>                 <span class="c1"># í•œ ë²ˆì— í•œ ë…¸ë“œë§Œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥</span>
  <span class="na">hostPath</span><span class="pi">:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">/tmp/data</span>                 <span class="c1"># ë…¸ë“œì˜ ì‹¤ì œ ë””ë ‰í† ë¦¬</span>
  <span class="na">persistentVolumeReclaimPolicy</span><span class="pi">:</span> <span class="s">Retain</span>  <span class="c1"># PVC ì‚­ì œ í›„ ë°ì´í„° ì²˜ë¦¬ ë°©ì‹</span></code></pre></figure>

<ul>
  <li><code class="language-plaintext highlighter-rouge">accessModes</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ReadWriteOnce</code>: í•œ ë…¸ë“œì—ì„œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥</li>
      <li><code class="language-plaintext highlighter-rouge">ReadOnlyMany</code>: ì—¬ëŸ¬ ë…¸ë“œì—ì„œ ì½ê¸°ë§Œ ê°€ëŠ¥</li>
      <li><code class="language-plaintext highlighter-rouge">ReadWriteMany</code>: ì—¬ëŸ¬ ë…¸ë“œì—ì„œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>ë…¸ë“œì™€ Pod ëŠ” ë‹¤ë¥¸ ê°œë…ì´ë‹¤. ë…¸ë“œëŠ” ì—¬ëŸ¬ Pod ê°€ ìˆì„ ìˆ˜ ìˆë‹¤ -&gt; ë™ì‹œ ë§ˆìš´íŠ¸ ê°€ëŠ¥<br />
ë‹¤ë¥¸ ë…¸ë“œì˜ Pod -&gt; ë™ì‹œ ë§ˆìš´íŠ¸ ë¶ˆê°€</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">hostPath</code>: <code class="language-plaintext highlighter-rouge">/tmp/data</code>
    <ul>
      <li>ì¿ ë²„ ë„¤í‹°ìŠ¤ <strong>ë…¸ë“œ(ì›Œì»¤ ë…¸ë“œ)</strong>ì˜ ì‹¤ì œ ë””ë ‰í† ë¦¬ë¥¼ ë§í•˜ë©°, ì´ ë””ë ‰í† ë¦¬ë¥¼ PV ë¡œ ë“±ë¡í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>ì£¼ì˜ ì‚¬í•­ì€ HostPath ëŠ” ë¡œì»¬ ë…¸ë“œ(ì˜¤ë¡œì§€ í•˜ë‚˜)ì˜ ë””ë ‰í† ë¦¬ë¥¼ í•­ìƒ ì‚¬ìš©í•œë‹¤. í•˜ì§€ë§Œ ë©€í‹° ë…¸ë“œ í™˜ê²½ì—ì„œëŠ” Pod ê°€ Node A ì— ìŠ¤ì¼€ì¤„ë§ì„ í•˜ë ¤ë©´ Node Aì˜ /tmp/data ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì§€ì •í•´ì•¼ í•˜ë©°, Pod ê°€ ì¬ì‹œì‘ë˜ì–´ Node B ë¡œ ì´ë™í•  ìˆ˜ ë„ ìˆì–´ ì´ë•ŒëŠ” Node B ì˜ /tmp/data ë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤. ë”°ë¼ì„œ ì´ëŸ° ê²½ìš°ëŠ” í…ŒìŠ¤íŠ¸/ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ê¶Œì¥ëœë‹¤.</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">persistentVolumeReclaimPolicy</code>: PVC ê°€ ì‚­ì œëœ í›„ PV ì˜ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í• ì§€
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Retain</code>: ë°ì´í„° ë³´ì¡´, ìˆ˜ë™ ì •ë¦¬ í•„ìš”</li>
      <li><code class="language-plaintext highlighter-rouge">Delete</code>: PV ì™€ ì‹¤ì œ ìŠ¤í† ë¦¬ì§€ ìë™ ì‚­ì œ</li>
    </ul>
  </li>
</ul>

<p>ì´ì œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">kubectl apply <span class="nt">-f</span> pv-hostpath.yaml

kubectl get pv</code></pre></figure>

<p>Status ì»¬ëŸ¼ì€ ì•„ë¬´ë„ ì•ˆì‚¬ìš©í•˜ê³  ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë§í•´ì¤€ë‹¤.</p>

<h4 id="persistent-volume-claim-ìƒì„±">Persistent Volume Claim ìƒì„±</h4>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">PersistentVolumeClaim</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">my-pvc</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">accessModes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">ReadWriteOnce</span>         <span class="c1"># PVì™€ ì¼ì¹˜í•´ì•¼ í•¨</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">storage</span><span class="pi">:</span> <span class="s">500Mi</span>        <span class="c1"># 1Gi PV ì¤‘ 500Mië§Œ ìš”ì²­</span></code></pre></figure>

<p><strong>PVCì˜ ë°”ì¸ë”© ë¡œì§</strong></p>

<p>Kubernetesê°€ ìë™ìœ¼ë¡œ <strong>ì í•©í•œ PVë¥¼ ì°¾ì•„ì„œ ì—°ê²°</strong> í•œë‹¤:</p>

<p><strong>ê³¼ì •</strong></p>
<ol>
  <li><code class="language-plaintext highlighter-rouge">accessModes</code> ê°€ ì¼ì¹˜í•˜ëŠ”ê°€?</li>
  <li>PV ì˜ ìš©ëŸ‰ì´ ìš”ì²­ëŸ‰ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì€ê°€?</li>
  <li><code class="language-plaintext highlighter-rouge">storageClassName</code> ì´ ì¼ì¹˜í•˜ëŠ”ê°€? (ì§€ì • ì•ˆ í–ˆìœ¼ë©´ ë¬´ì‹œ)</li>
</ol>

<p>ì¡°ê±´ ë§Œì¡±í•˜ëŠ” PV ì¤‘ ê°€ì¥ ì‘ì€ ê²ƒì„ ì„ íƒí•˜ê²Œ ëœë‹¤.</p>

<h4 id="deployment-ì—ì„œ-pvc-ì‚¬ìš©í•˜ê¸°">Deployment ì—ì„œ PVC ì‚¬ìš©í•˜ê¸°</h4>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">volume-demo-deploy</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">volume-demo</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">volume-demo</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nginx-container</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:alpine</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">80</span>
        <span class="na">volumeMounts</span><span class="pi">:</span>              <span class="c1"># ì»¨í…Œì´ë„ˆ ê´€ì </span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">my-data-volume</span>     <span class="c1"># volumesì—ì„œ ì •ì˜í•œ ì´ë¦„</span>
          <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/data</span>         <span class="c1"># ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ê²½ë¡œ</span>
      <span class="na">volumes</span><span class="pi">:</span>                     <span class="c1"># Pod ê´€ì </span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">my-data-volume</span>
        <span class="na">persistentVolumeClaim</span><span class="pi">:</span>
          <span class="na">claimName</span><span class="pi">:</span> <span class="s">my-pvc</span>        <span class="c1"># PVC ì´ë¦„ ì§€ì •</span></code></pre></figure>

<p><strong>ë°ì´í„° íë¦„</strong></p>

<ul>
  <li><strong>í˜¸ìŠ¤íŠ¸ ë…¸ë“œ</strong>: <code class="language-plaintext highlighter-rouge">/tmp/data</code></li>
  <li><strong>PV (my-pv)</strong>: Kubernetes ì¶”ìƒí™” ë ˆì´ì–´</li>
  <li><strong>PVC (my-pvc)</strong>: ì‚¬ìš©ì ìš”ì²­</li>
  <li><strong>Pod Volume (my-data-volume)</strong>: Pod ë‚´ë¶€ Volume</li>
  <li><strong>ì»¨í…Œì´ë„ˆ</strong>: <code class="language-plaintext highlighter-rouge">/data</code> ê²½ë¡œë¡œ ë§ˆìš´íŠ¸</li>
</ul>

<blockquote>
  <p>PVC ëŠ” ìš”ì²­, PV ëŠ” ì‹¤ì œ ì €ì¥ì†Œ</p>
</blockquote>

<p>ì´ì œ ì œëŒ€ë¡œ ë™ì‘ë˜ê³  ìˆëŠ”ì§€ ë‹¤ìŒì„ í…ŒìŠ¤íŠ¸í•œë‹¤</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">kubectl <span class="nb">exec</span> <span class="nt">-it</span> &lt;pod-name&gt; /bin/sh <span class="nt">--</span> sh <span class="nt">-c</span> <span class="s2">"echo 'Hello, world!' &gt; &lt;mount-path&gt;/memo.txt"</span>
kubectl delete pod/&lt;pod-name&gt;
kubectl get pods
kubectl <span class="nb">exec</span> <span class="nt">-it</span> &lt;pod-name&gt; /bin/sh <span class="nt">--</span> <span class="nb">cat</span> &lt;mount-path&gt;/memo.txt</code></pre></figure>

<p>ì œëŒ€ë¡œ pv ê°€ ì˜¬ë¼ê°€ê³  ì •ìƒì ìœ¼ë¡œ ë§ˆìš´íŒ…ëë‹¤ë©´ <code class="language-plaintext highlighter-rouge">memo.txt</code> ëŠ” ì‚­ì œë˜ì–´ë„ ê³„ì† ì‚´ì•„ìˆì–´ì•¼ í•  ê²ƒì´ë‹¤.</p>

<h5 id="node">Node</h5>

<p>ë¬¼ë¦¬ì  / ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ëœ ì»´í“¨íŒ… ìì›ì„ ë…¸ë“œë¼ê³  í•˜ëŠ”ë° <code class="language-plaintext highlighter-rouge">kubectl get nodes</code> ë¥¼ í†µí•´ ë…¸ë“œë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.</p>

    </div><div id="disqus_thread" style="margin-top:25px"></div>
    <script>
    var disqus_config = function () {
        this.page.url = 'https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/devops/2025/12/04/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-70%EC%9D%BC%EC%B0%A8-kubernetes.html';
        this.page.identifier = 'https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/devops/2025/12/04/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-70%EC%9D%BC%EC%B0%A8-kubernetes.html';
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = 'https://seonghun.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
    <noscript>Please enable JavaScript to view the <a
            href="https://disqus.com/?ref_noscript" rel="nofollow">comments
            powered by Disqus.</a></noscript></div>
<script>
    mermaid.initialize({startOnLoad:true});
    window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
</script>
            </section>
            <footer class="condensed">
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </footer>
        </main>
        
        <script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>
        
        <script src="/seonghun120614/assets/js/simple-jekyll-search.min.js"></script>
        <script src="/seonghun120614/assets/js/search.js"></script>
        
        <script>
            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                document.getElementById('scroll-progress').style.width = scrollPercent + '%';
            });
        </script>
    </body>
</html>