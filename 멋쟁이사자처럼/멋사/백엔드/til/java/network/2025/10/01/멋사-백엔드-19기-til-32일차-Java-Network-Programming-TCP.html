<!DOCTYPE html>
<html lang="kor">

    <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="icon" href="/seonghun120614/assets/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/seonghun120614/assets/css/style.css">
<title>[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 32ì¼ì°¨ Java Network Programming - TCP</title>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 32ì¼ì°¨ Java Network Programming - TCP | Seonghunâ€™s Blog</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 32ì¼ì°¨ Java Network Programming - TCP" />
<meta name="author" content="Seonghun Park" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/network/2025/10/01/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-32%EC%9D%BC%EC%B0%A8-Java-Network-Programming-TCP.html" />
<meta property="og:url" content="https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/network/2025/10/01/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-32%EC%9D%BC%EC%B0%A8-Java-Network-Programming-TCP.html" />
<meta property="og:site_name" content="Seonghunâ€™s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-10-01T01:55:35+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 32ì¼ì°¨ Java Network Programming - TCP" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Seonghun Park"},"dateModified":"2025-10-01T01:55:35+00:00","datePublished":"2025-10-01T01:55:35+00:00","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 32ì¼ì°¨ Java Network Programming - TCP","mainEntityOfPage":{"@type":"WebPage","@id":"https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/network/2025/10/01/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-32%EC%9D%BC%EC%B0%A8-Java-Network-Programming-TCP.html"},"url":"https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/network/2025/10/01/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-32%EC%9D%BC%EC%B0%A8-Java-Network-Programming-TCP.html"}</script>
<!-- End Jekyll SEO tag -->


<script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>

<!-- Mermaid -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RQTWJRLWGD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-RQTWJRLWGD');
</script></head><script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggle = document.getElementById("dark-toggle");
        
            // ì´ë¯¸ ì‹¤í–‰í•œ ì  ìˆëŠ”ì§€ í™•ì¸
            const hasToggled = localStorage.getItem("darkModeInitialized");
        
            if (!hasToggled && toggle && toggle.checked) {
                toggleDarkMode();
                localStorage.setItem("darkModeInitialized", "true"); // ìµœì´ˆ ì‹¤í–‰ ê¸°ë¡
            }
        });
    </script>

    <body>
        <div id="scroll-progress"></div>
        <main class="container">
            <section class="about">
                <div class="about-header condensed">
                    <div class="about-title">
                        <a href="/seonghun120614/">
                            
                            <img class="light"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            <img class="dark"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            
                        </a>
                        <h2 id="title">
                            <a href="/seonghun120614/">Seonghun Park</a>
                        </h2>
                    </div><p class="tagline">Developer.</p></div>
                
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </section>
            <section class="content">
                <script>
window.MathJax = {
    tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
    },
    options: {
    renderActions: {
        addMenu: []
    }
    }
};
</script>

<script type="text/javascript"
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script><div class="post-container">
    <a class="post-link" href="/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/network/2025/10/01/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-32%EC%9D%BC%EC%B0%A8-Java-Network-Programming-TCP.html">
        <h2 class="post-title">[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 32ì¼ì°¨ Java Network Programming - TCP</h2>
    </a>
    
    <div class="post-meta">
        <div class="post-date"><i class="icon-calendar"></i>Oct 1, 2025</div><ul class="post-categories"><li>ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼</li><li>ë©‹ì‚¬</li><li>ë°±ì—”ë“œ</li><li>TIL</li><li>Java</li><li>Network</li></ul></div>

    <div class="post">
        <!--more-->

<h2 id="-ëª©ì°¨">ğŸ“‚ ëª©ì°¨</h2>
<ul>
  <li><a href="#ip-address">IP Address</a>
    <ul>
      <li><a href="#subnet-mask">Subnet Mask</a></li>
      <li><a href="#ì‚¬ì„¤-ip-ì™€-ê³µì¸-ip">ì‚¬ì„¤ IP ì™€ ê³µì¸ IP</a></li>
      <li><a href="#í¬íŠ¸-ë²ˆí˜¸">í¬íŠ¸ ë²ˆí˜¸</a></li>
    </ul>
  </li>
  <li><a href="#tcp-í†µì‹ ">TCP í†µì‹ </a></li>
  <li><a href="#java-ë„¤íŠ¸ì›Œí¬-í”„ë¡œê·¸ë˜ë°">Java ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë°</a>
    <ul>
      <li><a href="#inetaddress-í´ë˜ìŠ¤">InetAddress í´ë˜ìŠ¤</a></li>
      <li><a href="#socket-programming">Socket Programming</a>
        <ul>
          <li><a href="#tcp-ì†Œì¼“">TCP ì†Œì¼“</a></li>
          <li><a href="#udp-ì†Œì¼“">UDP ì†Œì¼“</a></li>
          <li><a href="#tcp-echo-ì„œë²„-êµ¬í˜„">TCP Echo ì„œë²„ êµ¬í˜„</a></li>
          <li><a href="#multi-threaded-server">Multi-Threaded Server</a></li>
          <li><a href="#tcp-ì±„íŒ…-ì„œë²„">TCP ì±„íŒ… ì„œë²„</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="-ë³¸ë¬¸">ğŸ“š ë³¸ë¬¸</h2>

<h3 id="ip-address">IP Address</h3>

<p>IP ì£¼ì†Œ(Internet Protocol Address)ëŠ” ì¸í„°ë„·ì— ì—°ê²°ëœ ëª¨ë“  ì¥ì¹˜ì— í• ë‹¹ëœ ê³ ìœ í•œ ì£¼ì†Œ ì´ë‹¤.</p>

<ul>
  <li>IPv4: 127.0.0.1 -&gt; 8 ë¹„íŠ¸ì”© 4ê°œ</li>
  <li>IPv6: 2404:6800:400a:080a:0000:0000:0000:2004 -&gt; 16 ë¹„íŠ¸ì”© 8ê°œ</li>
</ul>

<p>ì˜ í˜•íƒœë¥¼ ê°€ì§„ë‹¤. ì—¬ê¸°ì„œ ë³´í†µ 8ë¹„íŠ¸ ë‹¨ìœ„ë¥¼ <strong>Octet</strong> ì´ë¼ê³  ë¶€ë¥´ê³  IPv6 ì—ì„œëŠ” :ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê°ê°ì„ í•„ë“œë¼ê³  ë¶€ë¥¸ë‹¤.</p>

<h4 id="subnet-mask">Subnet Mask</h4>

<p>ì„œë¸Œë„· ë§ˆìŠ¤í¬ëŠ” ë„¤íŠ¸ì›Œí¬ ë¶€ë¶„ê³¼ í˜¸ìŠ¤íŠ¸ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê¸°ì¤€ì„ ë‚˜íƒ€ë‚´ëŠ” ë¹„íŠ¸ íŒ¨í„´ì´ë©°, ì‰½ê²Œ ë§í•˜ë©´ ì£¼ì†Œì˜ ì–´ë–¤ ë¶€ë¶„ì´ ë„¤íŠ¸ì›Œí¬ì¸ì§€, ì–´ë–¤ ë¶€ë¶„ì´ ì¥ì¹˜ì¸ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë§ˆìŠ¤í‚¹ì´ë‹¤.</p>

<ul>
  <li>IPv4 ì˜ˆì‹œ
    <ul>
      <li>IP ì£¼ì†Œ 192.168.1.10: 11000000.10101000.00000001.00001010</li>
      <li>ì„œë¸Œë„· ë§ˆìŠ¤í¬ 255.255.255.0: 11111111.11111111.11111111.00000000</li>
    </ul>
  </li>
</ul>

<p>ìë¦¬ìˆ˜ ë¼ë¦¬ &amp;(and) ì—°ì‚°ì„ í†µí•´ ë„¤íŠ¸ì›Œí¬ ë¶€ë¶„ì„ êµ¬í•  ìˆ˜ ìˆë‹¤.</p>

<h4 id="ì‚¬ì„¤-ip-ì™€-ê³µì¸-ip">ì‚¬ì„¤ IP ì™€ ê³µì¸ IP</h4>

<p><strong>ê³µì¸ IP</strong></p>
<ul>
  <li><strong>ISP(ì¸í„°ë„· ì„œë¹„ìŠ¤ ê³µê¸‰ì)</strong>ê°€ ì œê³µí•˜ëŠ” ì „ì„¸ê³„ì ìœ¼ë¡œ ìœ ì¼í•œ IP ì£¼ì†Œ</li>
  <li>ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥</li>
  <li>ë°©í™”ë²½ ë“±ì˜ ë³´ì•ˆ ì„¤ì • í•„ìš”</li>
</ul>

<blockquote>
  <p>ISP ëŠ” KT, SKT, LG U+ ë“±ë“± ì´ ëŒ€í‘œì ì´ë©°, AWS, Azure ê°™ì€ í´ë¼ìš°ë“œ ì„œë²„ì˜ í¼ë¸”ë¦­ IP ë„ ê·¸ ì˜ˆì´ë‹¤.</p>
</blockquote>

<p><strong>ì‚¬ì„¤ IP</strong></p>
<ul>
  <li>ê°€ì •ì´ë‚˜ íšŒì‚¬ ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ì‚¬ìš©</li>
  <li>ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€ëŠ¥</li>
  <li><strong>NAT(Network Address Translation)</strong>ë¥¼ í†µí•´ ì¸í„°ë„· ì ‘ì†</li>
</ul>

<p>ì‚¬ì„¤ IP ì£¼ì†ŒëŠ” ê³µì¸ IP ì™€ êµ¬ë¶„ë˜ì–´ ë‹¤ìŒ ëŒ€ì—­ì„ ì‚¬ìš©í•˜ê¸°ë¡œ ì•½ì†ë˜ì–´ ìˆë‹¤.</p>

<ul>
  <li>Class A: 10.0.0.0 ~ 10.255.255.255</li>
  <li>Class B: 172.16.0.0 ~ 172.31.255.255</li>
  <li>Class C: 192.168.0.0 ~ 192.168.255.255</li>
</ul>

<p>ì´ë ‡ê²Œ IP ë¥¼ í†µí•´ íƒ€ê³  ë“¤ì–´ê°€ë©´ end user ì— ë‹¿ì„ ìˆ˜ ìˆë‹¤.</p>

<h4 id="í¬íŠ¸-ë²ˆí˜¸">í¬íŠ¸ ë²ˆí˜¸</h4>

<p>end user ì— ë‹¿ì•˜ë‹¤ê³  í•˜ì—¬ì„œ ë°”ë¡œ ë°ì´í„°ê°€ ì»´í“¨í„° ë‚´ë¶€ë¡œ ë“¤ì–´ê°€ëŠ”ê±´ ì•„ë‹ˆë‹¤. ë°ì´í„°ê°€ ë“¤ì–´ê°ˆ ì˜¬ë°”ë¥¸ ì¶œì…êµ¬ì¸ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ ë°ì´í„°ê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤.</p>

<ul>
  <li>0 ~ 1023: Well-known ports (HTTP:80, HTTPS:443, FTP:21)</li>
  <li>1024 ~ 49151: Registered ports</li>
  <li>49152 ~ 65535: Dynamic/Private ports</li>
</ul>

<p>ìœ„ëŠ” ê·¸ ì˜ˆì‹œì´ë‹¤. 0-49151 ê¹Œì§€ëŠ” ì´ë¯¸ ì“°ì´ê³  ìˆê¸° ë•Œë¬¸ì— ë³´í†µ ì»¤ìŠ¤í…€ìœ¼ë¡œ í¬íŠ¸ë¥¼ ì—´ë•Œ(ì„œë²„ë¥¼ ì—´ë•Œ)ëŠ” 49152 ë¶€í„° 65535 ê¹Œì§€ì˜ í¬íŠ¸ ë²ˆí˜¸ ì¤‘ ì•ˆì“°ëŠ” ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—´ì–´ì£¼ë©´ ëœë‹¤.</p>

<p>ì´ë ‡ê²Œ ì„œë²„ì˜ í¬íŠ¸ê°€ ì—´ë¦¬ë©´ ê·¸ ë•Œë¶€í„° ë°ì´í„°ê°€ ë“¤ì–´ì˜¬ í†µë¡œë¥¼ ë§ˆë ¨í•˜ê²Œ ëœë‹¤.</p>

<h3 id="tcp-í†µì‹ ">TCP í†µì‹ </h3>

<p>ì‹ ë¢°ì„± ìˆëŠ” ë°ì´í„° ì „ì†¡ì„ ë³´ì¥í•˜ëŠ” ì—°ê²° ì§€í–¥ì  í”„ë¡œí† ì½œì´ë‹¤.</p>

<ul>
  <li><strong>ì—°ê²° ì§€í–¥ì </strong>: ë°ì´í„° ì „ì†¡ ì „ ìˆ˜ì‹ ìì™€ ì†¡ì‹ ìê°€ 3-way handshake ë¡œ ì—°ê²°</li>
  <li><strong>ì‹ ë¢°ì„± ë³´ì¥</strong>: ë°ì´í„°ê°€ ìœ ì‹¤ë˜ê±°ë‚˜ ìˆœì„œê°€ ë°”ë€Œë©´ ì¬ì „ì†¡ ìˆœì„œ ë³´ì • ë“±ì„ í†µí•´ ë³´ì¥</li>
  <li><strong>ìŠ¤íŠ¸ë¦¼ ê¸°ë°˜</strong>: ë°ì´í„°ë¥¼ íŒ¨í‚· ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë‹¤ë£¸</li>
  <li><strong>í˜¼ì¡ ì œì–´, íë¦„ ì œì–´</strong>: ë„¤íŠ¸ì›Œí¬ê°€ ê³¼ë¶€í•˜ë˜ì§€ ì•Šë„ë¡, ìˆ˜ì‹ ìê°€ ì²˜ë¦¬ ê°€ëŠ¥í•œ ë§Œí¼ë§Œ ì „ì†¡</li>
</ul>

<p><strong>ë™ì‘ ê³¼ì •</strong></p>
<ol>
  <li>3-Way Handshake:
    <ul>
      <li>Client -&gt; Server: SYN (ì—°ê²° ìš”ì²­ ì‹ í˜¸)</li>
      <li>Server -&gt; Client: SYN + ACK (ì—°ê²° í—ˆê°€ + í™•ì¸)</li>
      <li>Client -&gt; Server: ACK (í™•ì¸ ì™„ë£Œ)</li>
    </ul>
  </li>
  <li>ë°ì´í„° ì „ì†¡
    <ul>
      <li>ë°ì´í„°ë¥¼ ì„¸ê·¸ë¨¼íŠ¸ ë‹¨ìœ„ë¡œ ì˜ë¼ ë³´ëƒ„</li>
      <li>ê° ì„¸ê·¸ë¨¼íŠ¸ì— ë²ˆí˜¸ë¥¼ ë¶™ì—¬ ìˆœì„œ í™•ì¸</li>
      <li>ìˆ˜ì‹  ì¸¡ì€ ACK ë¥¼ ë³´ë‚´ì–´ ì˜ ë°›ì•˜ìŒì„ ì•Œë¦¼</li>
    </ul>
  </li>
  <li>ì—°ê²° í•´ì œ (4-Way Handsake)
    <ul>
      <li>ì„œë¡œ FIN ê³¼ ACK ë¥¼ ì£¼ê³  ë°›ìœ¼ë©° ì •ìƒì ìœ¼ë¡œ ì—°ê²°ì„ ëŠìŒ</li>
    </ul>
  </li>
</ol>

<h3 id="java-ë„¤íŠ¸ì›Œí¬-í”„ë¡œê·¸ë˜ë°">Java ë„¤íŠ¸ì›Œí¬ í”„ë¡œê·¸ë˜ë°</h3>

<h4 id="inetaddress-í´ë˜ìŠ¤">InetAddress í´ë˜ìŠ¤</h4>

<p>IP ì£¼ì†Œë¥¼ í‘œí˜„í•˜ê³  ë‹¤ë£¨ëŠ” í´ë˜ìŠ¤ì´ë‹¤. <code class="language-plaintext highlighter-rouge">java.net</code> íŒ¨í‚¤ì§€ì— ë“¤ì–´ìˆê³ , í˜¸ìŠ¤íŠ¸ ì´ë¦„ê³¼ IP ì£¼ì†Œê°„ì˜ ë§¤í•‘ì„ ì²˜ë¦¬í•˜ë©°, ë¡œì»¬/ì›ê²© í˜¸ìŠ¤íŠ¸ì˜ IP ì£¼ì†Œë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.</p>

<p>ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê³ , ì •ì  ë©”ì„œë“œ í˜¸ì¶œì„ í•˜ì—¬ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.</p>
<ul>
  <li>InetAddress.getByName(â€œwww.google.comâ€)</li>
  <li>InetAddress.getAllByName(â€œwww.google.comâ€): ë„ë©”ì¸ ì£¼ì†Œì— ëŒ€í•œ ëª¨ë“  ì„œë²„ IP ë¦¬í„´</li>
  <li>InetAddress.getLocalHost(): í˜„ì¬ ë‚´ ì»´í“¨í„°ì˜ IP</li>
</ul>

<p><strong>isReachable(int timeout)</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReachableExample</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// êµ¬ê¸€ ì„œë²„ ì£¼ì†Œ</span>
            <span class="nc">InetAddress</span> <span class="n">google</span> <span class="o">=</span> <span class="nc">InetAddress</span><span class="o">.</span><span class="na">getByName</span><span class="o">(</span><span class="s">"www.google.com"</span><span class="o">);</span>

            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"í˜¸ìŠ¤íŠ¸ ì´ë¦„: "</span> <span class="o">+</span> <span class="n">google</span><span class="o">.</span><span class="na">getHostName</span><span class="o">());</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"í˜¸ìŠ¤íŠ¸ ì£¼ì†Œ: "</span> <span class="o">+</span> <span class="n">google</span><span class="o">.</span><span class="na">getHostAddress</span><span class="o">());</span>

            <span class="c1">// 5ì´ˆ ë™ì•ˆ ì‘ë‹µ ì—¬ë¶€ í™•ì¸</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">google</span><span class="o">.</span><span class="na">isReachable</span><span class="o">(</span><span class="mi">5000</span><span class="o">))</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"êµ¬ê¸€ ì„œë²„ì— ì—°ê²° ê°€ëŠ¥í•©ë‹ˆë‹¤!"</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"êµ¬ê¸€ ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="c1">// ë¡œì»¬í˜¸ìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸</span>
            <span class="nc">InetAddress</span> <span class="n">local</span> <span class="o">=</span> <span class="nc">InetAddress</span><span class="o">.</span><span class="na">getLocalHost</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">local</span><span class="o">.</span><span class="na">isReachable</span><span class="o">(</span><span class="mi">2000</span><span class="o">))</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ë¡œì»¬í˜¸ìŠ¤íŠ¸ ì—°ê²° ê°€ëŠ¥!"</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<blockquote>
  <p>ë°©í™”ë²½ì— ë§‰í˜€ ìˆìœ¼ë©´ ì‹¤ì œë¡œ ì—°ê²° ê°€ëŠ¥í•œë°ë„ false ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìœ¼ë©°, ë‚´ë¶€ì ìœ¼ë¡œ ICMP ì—°ê²°ì„ ì‚¬ìš©í•œë‹¤. ICMP ëŠ” OS ê¶Œí•œì´ í•„ìš”í•˜ì—¬ ì¼ë¶€ í™˜ê²½ì—ì„œëŠ” false ê°€ ë‚˜ì˜¬ ìˆ˜ ìˆë‹¤.</p>
</blockquote>

<ul>
  <li>isLoopbackAddress(): ìê¸° ìì‹ ì˜ ì£¼ì†Œì¸ì§€ í™•ì¸(localhost)</li>
  <li>isSiteLocalAddress(): ì´ ì£¼ì†Œê°€ ì‚¬ì„¤ IP ì£¼ì†Œì¸ì§€ í™•ì¸í•˜ëŠ” ë©”ì„œë“œì´ë‹¤</li>
</ul>

<blockquote>
  <p>IPv6 ì˜ ë£¨í”„ë°± ì£¼ì†ŒëŠ” ::1 ì´ë‹¤.</p>
</blockquote>

<h4 id="socket-programming">Socket Programming</h4>

<p>ë¨¼ì € ì†Œì¼“ì„ ì•Œì•„ë³´ì. ì†Œì¼“ì€ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì˜ <strong>End-point</strong> ë¥¼ ì˜ë¯¸í•˜ë©°, <strong>í”„ë¡œì„¸ìŠ¤ì™€ ë„¤íŠ¸ì›Œí¬ë¥¼ ì—°ê²°í•˜ëŠ” ì¶”ìƒí™”ëœ ì°½êµ¬</strong>ë¼ê³  í•  ìˆ˜ ìˆë‹¤.</p>

<ul>
  <li>IP ì£¼ì†Œ: ì–´ëŠ ì»´í“¨í„°ì¸ê°€?</li>
  <li>Port ë²ˆí˜¸: ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ì¸ê°€?</li>
  <li>Socket: IP + Port ë¥¼ í•©ì¹œ ë„¤íŠ¸ì›Œí¬ ìƒì˜ ì¶œì…êµ¬</li>
</ul>

<p>ë”°ë¼ì„œ ì†Œì¼“ì€ ë‘ í”„ë¡œì„¸ìŠ¤ê°€ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ í†µì‹ í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ë˜í•œ ì†Œì¼“ì„ ì‚¬ìš©í•˜ë©´ ì–‘ë°©í–¥ ë°ì´í„° ìŠ¤íŠ¸ë¦¼ì„ ì œê³µí•˜ë©°, TCP ì†Œì¼“, UDP ì†Œì¼“ì˜ íƒ€ì…ë„ ê²°ì •í•  ìˆ˜ ìˆë‹¤.</p>

<h5 id="tcp-ì†Œì¼“">TCP ì†Œì¼“</h5>

<ul>
  <li>ì—°ê²° ì§€í–¥ì (3-way handshake)</li>
  <li>ì‹ ë¢°ì„± ë³´ì¥(ìˆœì„œ ë³´ì¥, ë¬´ì†ì‹¤)</li>
</ul>

<h5 id="udp-ì†Œì¼“">UDP ì†Œì¼“</h5>

<ul>
  <li>ë¹„ì—°ê²° ì§€í–¥ì </li>
  <li>ë¹ ë¥´ì§€ë§Œ ì‹ ë¢°ì„± ì—†ìŒ</li>
</ul>

<blockquote>
  <p>ì¡°ê¸ˆ ì†ì‹¤ì´ ì¼ì–´ë‚˜ë„ ê´œì°®ì€ ë°ì´í„°ë¼ë©´ UDP ê°€ ì¢‹ìŒ</p>
</blockquote>

<h5 id="tcp-echo-ì„œë²„-êµ¬í˜„">TCP Echo ì„œë²„ êµ¬í˜„</h5>

<p>ì—ì½” ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì—ê²Œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë©´ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë™ì¼í•œ ë©”ì‹œì§€ë¡œ ë‹¤ì‹œ ë³´ë‚´ëŠ” êµ¬ì¡°ì´ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleEchoServer</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="kt">int</span> <span class="no">PORT</span> <span class="o">=</span> <span class="mi">7777</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

		<span class="c1">// í˜¸ìŠ¤íŠ¸ ì§€ì •ì´ ì—†ìœ¼ë©´ ì„œë²„ê°€ ëª¨ë“  ë„¤íŠ¸ì›Œí¬ì˜ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì ‘ì†ì„ ë°›ì„ ìˆ˜ ìˆìŒ</span>
		<span class="k">try</span> <span class="o">(</span><span class="kt">var</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="no">PORT</span><span class="o">))</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="no">PORT</span> <span class="o">+</span> <span class="s">" í¬íŠ¸ê°€ ì—´ë ¸ìŠµë‹ˆë‹¤."</span><span class="o">);</span>

			<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
				<span class="cm">/*
				accept() ë¡œ í´ë¼ì´ì–¸íŠ¸ê°€ ë“¤ì–´ì˜¤ê¸¸ ê¸°ë‹¤ë¦¼
				í´ë¼ì´ì–¸íŠ¸ê°€ ì ‘ì†ì„ í–ˆë‹¤ë©´ client ì†Œì¼“ì´ ë¦¬í„´ë¨

				í´ë¼ì´ì–¸íŠ¸ì˜ ì†Œì¼“ì„ í†µí•´ì„œ in, out ì˜ ì—°ê²° í†µë¡œê°€ í•„ìš”(ì–‘ë°©í–¥)
				í•­ìƒ ì…ì¶œë ¥ì€ í•˜ë‚˜ì˜ í†µë¡œì—ì„œ ë™ì‘í•  ìˆ˜ ì—†ë‹¤.
				 */</span>
				<span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
				     <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
				     <span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="k">new</span> <span class="nc">BufferedOutputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">()),</span> <span class="kc">true</span><span class="o">))</span> <span class="o">{</span>

					<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"í´ë¼ì´ì–¸íŠ¸ "</span> <span class="o">+</span> <span class="n">socket</span><span class="o">.</span><span class="na">getRemoteSocketAddress</span><span class="o">()</span> <span class="o">+</span> <span class="s">" ë‹˜ ì ‘ì† ì™„ë£Œ"</span><span class="o">);</span>

					<span class="nc">String</span> <span class="n">line</span><span class="o">;</span>

					<span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
						<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ ë©”ì‹œì§€: "</span> <span class="o">+</span> <span class="n">line</span><span class="o">);</span>

						<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Echo "</span> <span class="o">+</span> <span class="n">line</span><span class="o">);</span>

						<span class="k">if</span> <span class="o">(</span><span class="s">"bye"</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">line</span><span class="o">))</span>
							<span class="k">break</span><span class="o">;</span>
					<span class="o">}</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì„œë²„ ì‹œì‘ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ìš°ì„  <code class="language-plaintext highlighter-rouge">Socket</code> ì€ <code class="language-plaintext highlighter-rouge">accept()</code> ë¥¼ í†µí•´ í†µì‹ ì´ ë“¤ì–´ì˜¤ëŠ”ì§€ ì•ˆë“¤ì–´ì˜¤ëŠ”ì§€ íŒë‹¨í•˜ê³ , ë“¤ì–´ì˜¨ë‹¤ë©´ ê·¸ë•Œ <strong>3-Way Handshake</strong> ê°€ ì¼ì–´ë‚˜ê²Œ ëœë‹¤.</p>

<p>ì •ìƒì ì¸ í†µì‹ ì´ ì´ë£¨ì–´ì¡Œë‹¤ë©´, ì˜¬ë°”ë¥¸ ì†Œì¼“ì´ ë§Œë“¤ì–´ì§€ê²Œ ë˜ê³  ì—¬ê¸°ì„œ ì†Œì¼“ì€ <code class="language-plaintext highlighter-rouge">InputStream</code> ê³¼ <code class="language-plaintext highlighter-rouge">OutputStream</code> ì„ ë°˜í™˜í•˜ê²Œ ë˜ëŠ”ë°, ì´ ë‘ í†µë¡œê°€ ë°”ë¡œ in, out ì˜ ì–‘ë°©í–¥ ì†¡ìˆ˜ì‹ ì„ í•˜ê²Œ ë  ì°½êµ¬ì´ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">socket</span><span class="o">.</span><span class="na">getRemoteSocketAddress</span><span class="o">()</span></code></pre></figure>

<p>ì†Œì¼“ì€ ì ‘ì†í•œ í´ë¼ì´ì–¸íŠ¸ì˜ ì†Œì¼“ ì£¼ì†Œë¥¼ ë³¼ ìˆ˜ ìˆìœ¼ë©° ìœ„ ë©”ì„œë“œë¡œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ê²Œ ëœë‹¤. ì´ì œ <code class="language-plaintext highlighter-rouge">in.readLine()</code> ì„ ë¬´í•œíˆ ë°˜ë³µí•˜ì—¬ <code class="language-plaintext highlighter-rouge">readLine()</code> ì—ì„œ <code class="language-plaintext highlighter-rouge">blocking</code> ì´ ë˜ì–´ì„œ ì…ë ¥ì„ ê¸°ë‹¤ë¦¬ê³ , ë°›ì€ ì…ë ¥ì„ ë‹¤ì‹œ out ìœ¼ë¡œ ë‚´ë³´ë‚´ê²Œ ë˜ë©´ì„œ echo ê¸°ëŠ¥ì„ ìˆ˜í–‰í•¨ì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">PrintWriter out = new PrintWriter(new BufferedOutputStream(socket.getOutputStream()), true)</code> ì˜ ë‘ ë²ˆì§¸ ì¸ìëŠ” println, printf, format ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë¬´ì¡°ê±´ ê·¸ ë‹¤ìŒ ìë™ flushë¥¼ í•˜ë„ë¡ í•˜ëŠ” ì˜µì…˜ì´ë‹¤.</p>
</blockquote>

<p>ì„œë²„ë¥¼ ë‹¤ ë§Œë“¤ì—ˆìœ¼ë‹ˆ ì´ì œ í´ë¼ì´ì–¸íŠ¸ ìª½ë„ ë§Œë“¤ì–´ì•¼ í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleEchoClient</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">HOST</span> <span class="o">=</span> <span class="s">"localhost"</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">PORT</span> <span class="o">=</span> <span class="mi">7777</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

		<span class="c1">// í˜¸ìŠ¤íŠ¸ ì§€ì •ì´ ìˆê¸°ì— ì„œë²„ê°€ íŠ¹ì • IP ì£¼ì†Œì—ë§Œ ë°”ì¸ë”© ë¨</span>
		<span class="k">try</span> <span class="o">(</span><span class="kt">var</span> <span class="n">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Socket</span><span class="o">(</span><span class="no">HOST</span><span class="o">,</span> <span class="no">PORT</span><span class="o">);</span>
		     <span class="kt">var</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
		     <span class="kt">var</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="k">new</span> <span class="nc">BufferedOutputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">()),</span> <span class="kc">true</span><span class="o">);</span>
		     <span class="kt">var</span> <span class="n">keyboard</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">))</span> <span class="o">{</span>

			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì ‘ì† ì™„ë£Œ"</span><span class="o">);</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"bye ë¥¼ ì…ë ¥í•˜ì‹œë©´ ì¢…ë£Œë©ë‹ˆë‹¤."</span><span class="o">);</span>

			<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// í´ë¼ì´ì–¸íŠ¸ì˜ ì…ë ¥ì„ ì „ì†¡</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"ì„œë²„ì— ì „ë‹¬í•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”: "</span><span class="o">);</span>
				<span class="kt">var</span> <span class="n">line</span> <span class="o">=</span> <span class="n">keyboard</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
				<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>

				<span class="c1">// ì„œë²„ê°€ ì‘ë‹µí•œ ë‚´ìš©ì„ ì½ì–´ì˜´</span>
				<span class="kt">var</span> <span class="n">response</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>

                <span class="c1">// [ì•ˆì •ì„±] ì„œë²„ê°€ ì—°ê²°ì„ ë¨¼ì € ëŠì—ˆì„ ê²½ìš°ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">response</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì„œë²„ì™€ì˜ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤."</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="o">}</span>

                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

				<span class="k">if</span> <span class="o">(</span><span class="s">"bye"</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">line</span><span class="o">))</span>
					<span class="k">break</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ê±°ì˜ ë™ì¼í•˜ì§€ë§Œ ì¤‘ìš”í•œ ê²ƒì€ <code class="language-plaintext highlighter-rouge">var response = in.readLine();</code> ì„ ìˆ˜í–‰í•  ë•Œ ì„œë²„ê°€ í•´ë‹¹ ìœ ì €ì˜ ì—°ê²°ì„ ê°•ì œë¡œ ëŠì–´ë²„ë ¸ì„ ë•Œì´ë‹¤. ì´ë•ŒëŠ” response ì— null ì´ ë“¤ì–´ê°€ê²Œ ë˜ë¯€ë¡œ ëŠì—ˆì„ ë•ŒëŠ” ìœ ì €ì˜ ì—°ê²°ë„ ëŠì–´ì£¼ì–´ì•¼ í•˜ê¸°ì— if ë¬¸ìœ¼ë¡œ ìì›ì„ íšŒìˆ˜í•œë‹¤.</p>

<h5 id="multi-threaded-server">Multi-Threaded Server</h5>

<p>ìœ„ ì˜ˆì‹œëŠ” ì‚¬ìš©ìê°€ í•œ ëª…ë§Œ ì ‘ì†ì„ í•˜ê²Œ ëœë‹¤. 2ëª… ë¶€í„°ëŠ” ì ‘ì†ì´ ì•ˆë˜ê²Œ ë˜ëŠ”ë°, <code class="language-plaintext highlighter-rouge">accept()</code> ë¥¼ í†µí•´ ì†Œì¼“ì„ ë§Œë“¤ì§€ë§Œ <code class="language-plaintext highlighter-rouge">readLine()</code> ì˜ blocking ë•Œë¬¸ì— ì´ë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.</p>

<p>ë”°ë¼ì„œ ìœ ì €ì˜ ì…ì¶œë ¥ì„ ë¹„ë™ê¸°ë¡œ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•´ì•¼í•˜ë©°, ì¤‘ì²© í´ë˜ìŠ¤ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">static</span> <span class="kd">class</span> <span class="nc">ClientHandler</span> <span class="kd">implements</span> <span class="nc">Runnable</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Socket</span> <span class="n">socket</span><span class="o">;</span>

    <span class="nc">ClientHandler</span><span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">(</span><span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
                <span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">(),</span> <span class="kc">true</span><span class="o">);</span>
        <span class="o">)</span> <span class="o">{</span>
            <span class="nc">SocketAddress</span> <span class="n">clientAddress</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="na">getRemoteSocketAddress</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">clientAddress</span> <span class="o">+</span> <span class="s">" ì‚¬ìš©ì ì ‘ì†í•¨"</span><span class="o">);</span>

            <span class="nc">String</span> <span class="n">inputLine</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">clientAddress</span> <span class="o">+</span> <span class="s">"ë¡œ ë¶€í„° ë°›ì€ ë©”ì‹œì§€ :: "</span> <span class="o">+</span> <span class="n">inputLine</span><span class="o">);</span>
                <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Echo::"</span> <span class="o">+</span> <span class="n">inputLine</span><span class="o">);</span>

                <span class="k">if</span> <span class="o">(</span><span class="s">"bye"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">inputLine</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">break</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>

            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">clientAddress</span> <span class="o">+</span> <span class="s">" ì—°ê²° ì¢…ë£Œ!!"</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">socket</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">()</span> <span class="o">+</span> <span class="s">"ì†Œì¼“ ì¢…ë£Œ ì˜¤ë¥˜!!"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ì´ë ‡ê²Œ ë˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ ë˜ ë‹¤ë¥¸ ì²˜ë¦¬ íë¦„ìœ¼ë¡œ ì „í™˜ì‹œì¼œ <code class="language-plaintext highlighter-rouge">ClientHander</code> ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ í•˜ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="k">try</span> <span class="o">(</span><span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="no">PORT</span><span class="o">))</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì—ì½”ì„œë²„ ì‹œì‘"</span><span class="o">);</span>

    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>

        <span class="c1">//í´ë¼ì´ì–¸íŠ¸ë³„ë¡œ ê°ê° í†µì‹  í•  ìˆ˜ ìˆëŠ” ì“°ë ˆë“œê°€ í•„ìš”í•  ê²ƒ ê°™ì•„ìš”.</span>
        <span class="nc">Thread</span> <span class="n">clientThread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="k">new</span> <span class="nc">ClientHandler</span><span class="o">(</span><span class="n">socket</span><span class="o">));</span>
        <span class="n">clientThread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>ì—¬ê¸°ì„œ <code class="language-plaintext highlighter-rouge">Thread</code> ëŠ” ìŠ¤ë ˆë“œ í’€ë¡œ ë™ì‘í•˜ê²Œ í•  ìˆ˜ ìˆìœ¼ë©°, ë§Œì•½ ì´ˆê³¼í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì ‘ì†ì— ëŒ€í•´ì„œëŠ” <code class="language-plaintext highlighter-rouge">Waiting Queue</code> ë¡œ ë“¤ì–´ê°€ê²Œ í•´ì•¼í•˜ë©°, í´ë¼ì´ì–¸íŠ¸ì—ê²ŒëŠ” <code class="language-plaintext highlighter-rouge">ì ‘ì† ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...</code> ë“±ì˜ í”¼ë“œë°± ë©”ì‹œì§€ë¥¼ ë„ì›Œì¤˜ì•¼ í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="no">PORT</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì—ì½” ì„œë²„ ì‹œì‘, í¬íŠ¸: "</span> <span class="o">+</span> <span class="no">PORT</span><span class="o">);</span>

<span class="c1">// ìŠ¤ë ˆë“œ í’€ê³¼ í ìƒì„±</span>
<span class="nc">BlockingQueue</span><span class="o">&lt;</span><span class="nc">Runnable</span><span class="o">&gt;</span> <span class="n">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayBlockingQueue</span><span class="o">&lt;&gt;(</span><span class="mi">10</span><span class="o">);</span> <span class="c1">// í ìš©ëŸ‰ 10</span>
<span class="nc">ThreadPoolExecutor</span> <span class="n">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ThreadPoolExecutor</span><span class="o">(</span>
        <span class="no">MAX_THREADS</span><span class="o">,</span>
        <span class="no">MAX_THREADS</span><span class="o">,</span>
        <span class="mi">0L</span><span class="o">,</span>
        <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">,</span>
        <span class="n">queue</span>
<span class="o">);</span>

<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>

    <span class="c1">// í’€ê³¼ í ìƒíƒœ í™•ì¸</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">pool</span><span class="o">.</span><span class="na">getActiveCount</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="no">MAX_THREADS</span> <span class="o">&amp;&amp;</span> <span class="n">queue</span><span class="o">.</span><span class="na">remainingCapacity</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ìŠ¤ë ˆë“œì™€ íê°€ ê½‰ ì°¼ë‹¤ë©´ ëŒ€ê¸° ë©”ì‹œì§€ ì „ì†¡ í›„ ì—°ê²° ì¢…ë£Œ</span>
        <span class="k">try</span> <span class="o">(</span><span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">(),</span> <span class="kc">true</span><span class="o">))</span> <span class="o">{</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì„œë²„ ì ‘ì† ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="n">socket</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="c1">// ì²˜ë¦¬ ê°€ëŠ¥í•œ ê²½ìš° ìŠ¤ë ˆë“œ í’€ì— ì œì¶œ</span>
        <span class="n">pool</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="nc">ClientHandler</span><span class="o">(</span><span class="n">socket</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h5 id="tcp-ì±„íŒ…-ì„œë²„">TCP ì±„íŒ… ì„œë²„</h5>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ChatServer</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">PORT</span> <span class="o">=</span> <span class="mi">7777</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">ClientHandler</span><span class="o">&gt;</span> <span class="n">clients</span> <span class="o">=</span> <span class="nc">ConcurrentHashMap</span><span class="o">.</span><span class="na">newKeySet</span><span class="o">();</span>

	<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">broadcast</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
		<span class="k">for</span> <span class="o">(</span><span class="kt">var</span> <span class="n">client</span> <span class="o">:</span> <span class="n">clients</span><span class="o">)</span>
			<span class="n">client</span><span class="o">.</span><span class="na">sendMessage</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì±„íŒ… ì„œë²„ ì‹œì‘"</span><span class="o">);</span>

		<span class="k">try</span> <span class="o">(</span><span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="no">PORT</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
				<span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
				<span class="nc">ClientHandler</span> <span class="n">clientHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ClientHandler</span><span class="o">(</span><span class="n">socket</span><span class="o">);</span>
				<span class="n">clients</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">clientHandler</span><span class="o">);</span>
				<span class="k">new</span> <span class="nf">Thread</span><span class="o">(</span><span class="n">clientHandler</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">static</span> <span class="kd">class</span> <span class="nc">ClientHandler</span> <span class="kd">implements</span> <span class="nc">Runnable</span> <span class="o">{</span>
		<span class="kd">private</span> <span class="nc">Socket</span> <span class="n">socket</span><span class="o">;</span>
		<span class="kd">private</span> <span class="nc">PrintWriter</span> <span class="n">pw</span><span class="o">;</span>
		<span class="kd">private</span> <span class="nc">String</span> <span class="n">nickname</span><span class="o">;</span>

		<span class="kd">public</span> <span class="nf">ClientHandler</span><span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">this</span><span class="o">.</span><span class="na">socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">;</span>
		<span class="o">}</span>

		<span class="nd">@Override</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
			<span class="k">try</span><span class="o">(</span><span class="kt">var</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())))</span> <span class="o">{</span>
				<span class="n">pw</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="k">new</span> <span class="nc">BufferedOutputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">()),</span> <span class="kc">true</span><span class="o">);</span>

				<span class="nc">String</span> <span class="n">message</span><span class="o">;</span>
				<span class="k">while</span> <span class="o">((</span><span class="n">message</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">message</span><span class="o">.</span><span class="na">trim</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">())</span>
					<span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì˜¬ë°”ë¥´ì§€ ì•Šì€ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤."</span><span class="o">);</span>

				<span class="n">nickname</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
				<span class="n">broadcast</span><span class="o">(</span><span class="n">nickname</span> <span class="o">+</span> <span class="s">"ë‹˜ì´ ë“¤ì–´ì™”ìŠµë‹ˆë‹¤."</span><span class="o">);</span>

				<span class="k">if</span> <span class="o">(</span><span class="n">nickname</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
					<span class="k">while</span> <span class="o">((</span><span class="n">message</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
						<span class="k">if</span> <span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">trim</span><span class="o">().</span><span class="na">isBlank</span><span class="o">())</span> <span class="k">continue</span><span class="o">;</span>
						<span class="n">broadcast</span><span class="o">(</span><span class="n">nickname</span> <span class="o">+</span> <span class="s">"\t"</span> <span class="o">+</span> <span class="n">message</span><span class="o">);</span>
					<span class="o">}</span>

			<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>

			<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
				<span class="n">broadcast</span><span class="o">(</span><span class="n">nickname</span> <span class="o">+</span> <span class="s">"ë‹˜ì´ ë‚˜ê°”ìŠµë‹ˆë‹¤."</span><span class="o">);</span>
				<span class="n">pw</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

				<span class="k">try</span> <span class="o">{</span>
					<span class="n">socket</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
				<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
					<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
				<span class="o">}</span>
			<span class="o">}</span>
		<span class="o">}</span>

		<span class="kd">private</span> <span class="kt">void</span> <span class="nf">sendMessage</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">if</span> <span class="o">(</span><span class="n">pw</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="n">pw</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ë‹¤ë¥¸ ì½”ë“œë“¤ì€ ì „ë¶€ í•´ì„í•˜ë©´ ë˜ë©°, <code class="language-plaintext highlighter-rouge">private static Set&lt;ClientHandler&gt; clients = ConcurrentHashMap.newKeySet();</code> ìª½ê³¼ ì˜ˆì™¸ì²˜ë¦¬ì˜ íë¦„ì„ ì˜ ì´í•´í•˜ê³  ì½”ë“œë¥¼ ì§œì•¼í•˜ëŠ” ê²ƒì„ ë³´ì•„ì•¼ í•œë‹¤.</p>

<p>ë§Œì•½ <code class="language-plaintext highlighter-rouge">Collections.synchronizedSet(new HashSet&lt;&gt;())</code> ì„ ì“°ê²Œ ëœë‹¤ë©´ ì´ëŠ” ì „ì²´ Set ì— lock ì„ ê±¸ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ ì €í•˜ê°€ ì¼ì–´ë‚˜ê²Œ ëœë‹¤. í•˜ì§€ë§Œ <code class="language-plaintext highlighter-rouge">ConcurrentHashMap.newKeySet()</code> ì€:</p>

<ul>
  <li><a href="#fine-grained-lock">Fine-grained Lock</a>, <a href="#segment-lock">Segment Lock</a> ë“± ë‚´ë¶€ì— ë™ê¸°í™” êµ¬í˜„ì´ ìµœì í™”ë˜ì–´ ìˆì–´ì„œ ë†’ì€ ë™ì‹œì„±ì„ ì§€ì›í•œë‹¤.</li>
  <li>ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì»¬ë ‰ì…˜ ë³´ë‹¤ ë” íš¨ìœ¨ì ì´ê²Œ ëœë‹¤.</li>
</ul>

<p>ì´ëŸ¬í•œ ì´ìœ ë¡œ í•´ë‹¹ ì •ì  ë©”ì„œë“œë¥¼ í†µí•´ ìµœì í™”ëœ ë™ì‹œì„±ì„ ê°€ì§„ Set ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ChatClient</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">HOST</span> <span class="o">=</span> <span class="s">"localhost"</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">PORT</span> <span class="o">=</span> <span class="mi">7777</span><span class="o">;</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Socket</span><span class="o">(</span><span class="no">HOST</span><span class="o">,</span> <span class="no">PORT</span><span class="o">);</span>
		     <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
		     <span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="k">new</span> <span class="nc">BufferedOutputStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">()),</span> <span class="kc">true</span><span class="o">);</span>
		     <span class="nc">Scanner</span> <span class="n">sc</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
		<span class="o">)</span> <span class="o">{</span>
			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì ‘ì† ì„±ê³µ !"</span><span class="o">);</span>

			<span class="c1">// receiver</span>
			<span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
				<span class="nc">String</span> <span class="n">message</span><span class="o">;</span>
				<span class="k">try</span> <span class="o">{</span>
					<span class="k">while</span> <span class="o">((</span><span class="n">message</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
						<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
				<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
					<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
				<span class="o">}</span>
			<span class="o">});</span>

			<span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”: "</span><span class="o">);</span>
			<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sc</span><span class="o">.</span><span class="na">nextLine</span><span class="o">());</span>

			<span class="c1">// sender</span>
			<span class="nc">String</span> <span class="n">message</span><span class="o">;</span>
			<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
				<span class="n">message</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
				<span class="k">if</span> <span class="o">(</span><span class="s">"bye"</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">message</span><span class="o">))</span> <span class="k">break</span><span class="o">;</span>
				<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
			<span class="o">}</span>

			<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"ì¢…ë£Œ ì™„ë£Œ"</span><span class="o">);</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p><strong>í´ë¼ì´ì–¸íŠ¸ ì…ì¥</strong>
ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ì„œë²„ ìª½ê³¼ì˜ í†µì‹ ì´ë‹¤. ë§Œì•½ ì—°ê²°ì„ ëŠê³  ì‹¶ì„ë•ŒëŠ” <code class="language-plaintext highlighter-rouge">socket.close()</code> ë¥¼ í˜¸ì¶œí•˜ë©´ ë˜ë‚˜, try ë¡œ ë¬¶ì—ˆê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">try-with-resources</code> ë¸”ëŸ­ì´ ëë‚˜ë©´, ì†Œì¼“, in, out ë“± ìì›ì´ íšŒìˆ˜ë˜ê²Œ ë˜ê³  receive thread ëŠ” ìë™ì ìœ¼ë¡œ ë‹«íˆê²Œ ëœë‹¤(<code class="language-plaintext highlighter-rouge">in.readLine()</code> ì˜ ê°’ì´ <code class="language-plaintext highlighter-rouge">null</code> ì´ ë˜ê¸° ë•Œë¬¸). FIN íŒ¨í‚·ì´ ì„œë²„ë¡œ ì „ì†¡ë˜ì–´ <strong>4Way-handsake</strong> ê°€ ë˜ê²Œ ëœë‹¤.</p>

<p><strong>ì„œë²„ ì…ì¥</strong>
ì´ì œ ì„œë²„ ì…ì¥ì´ë‹¤. ì„œë²„ ìª½ì—ì„œëŠ” ì…ë ¥ ìŠ¤íŠ¸ë¦¼ì— ë” ì´ìƒ ì½ì„ê²Œ ì—†ë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹«ê³ , <code class="language-plaintext highlighter-rouge">br.readLine()</code> ì—ì„œ ë¸”ë¡œí‚¹ ëœ íë¦„ì—ì„œ message ê°€ <code class="language-plaintext highlighter-rouge">null</code> ì´ ë˜ê¸° ë•Œë¬¸ì— try ë¬¸ì„ ë²—ì–´ë‚˜ê²Œ ëœë‹¤. ì´í›„ <code class="language-plaintext highlighter-rouge">pw.close()</code> ë¥¼ í†µí•´ out í†µë¡œë¥¼ ë‹«ê³ , <code class="language-plaintext highlighter-rouge">socket.close()</code> ìì›ê¹Œì§€ í˜¸ì¶œí•˜ì—¬ ì „ë¶€ ë‹«ê²Œ ëœë‹¤.</p>

<hr />

<h2 id="ï¸-ìš©ì–´">âœ’ï¸ ìš©ì–´</h2>

<h6 id="fine-grained-lock">Fine-grained Lock</h6>

<p><code class="language-plaintext highlighter-rouge">Lock</code> ë‹¨ìœ„ë¥¼ ì¤„ì—¬ì„œ ì‘ì€ ë‹¨ìœ„ì— ëŒ€í•œ <code class="language-plaintext highlighter-rouge">Lock</code> ì„ ê±¸ì–´ ë™ì‹œì„±ì„ ë†’ì´ëŠ” ì „ëµ</p>

<ul>
  <li>ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ì„œë¡œ ë‹¤ë¥¸ key ë¥¼ ìˆ˜ì •í•  ë•Œ ì¶©ëŒ ì—†ì´ ë™ì‹œ ì ‘ê·¼ì´ ê°€ëŠ¥</li>
  <li>ë™ì‹œì„± ì„±ëŠ¥ì´ í›¨ì”¬ ì¢‹ìŒ</li>
</ul>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">ConcurrentHashMap</code> ì€ ë‚´ë¶€ì ìœ¼ë¡œ keyë“¤ì„ ë²„í‚·(bucket) ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ê³ , ë²„í‚·ë§ˆë‹¤ lockì„ ê±¸ê±°ë‚˜ ì›ìì  ì—°ì‚°ì„ ì‚¬ìš©</p>
</blockquote>

<h6 id="segment-lock">Segment Lock</h6>

<p>ë‚´ë¶€ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">Map</code> ì„ ì—¬ëŸ¬ ê°œ Segment ë¡œ ë‚˜ëˆ„ê³  ê° ì„¸ê·¸ë¨¼íŠ¸ëŠ” ìì²´ Lock ì„ ê°€ì§€ë©°, ìŠ¤ë ˆë“œê°€ Key ë¥¼ ì¶”ê°€/ì‚­ì œí•  ë•Œ í•´ë‹¹ Segment ë§Œ lock ì„ ê±°ëŠ” ê²ƒ, ì¦‰ ì„¸ê·¸ë¨¼íŠ¸ ê°œìˆ˜ë§Œí¼ ë™ì‹œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

    </div><div id="disqus_thread" style="margin-top:25px"></div>
    <script>
    var disqus_config = function () {
        this.page.url = 'https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/network/2025/10/01/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-32%EC%9D%BC%EC%B0%A8-Java-Network-Programming-TCP.html';
        this.page.identifier = 'https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/network/2025/10/01/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-32%EC%9D%BC%EC%B0%A8-Java-Network-Programming-TCP.html';
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = 'https://seonghun.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
    <noscript>Please enable JavaScript to view the <a
            href="https://disqus.com/?ref_noscript" rel="nofollow">comments
            powered by Disqus.</a></noscript></div>
<script>
    mermaid.initialize({startOnLoad:true});
    window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
</script>
            </section>
            <footer class="condensed">
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </footer>
        </main>
        
        <script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>
        
        <script src="/seonghun120614/assets/js/simple-jekyll-search.min.js"></script>
        <script src="/seonghun120614/assets/js/search.js"></script>
        
        <script>
            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                document.getElementById('scroll-progress').style.width = scrollPercent + '%';
            });
        </script>
    </body>
</html>