<!DOCTYPE html>
<html lang="kor">

    <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="icon" href="/seonghun120614/assets/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/seonghun120614/assets/css/style.css">
<title>[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 52ì¼ì°¨ REST API Project</title>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 52ì¼ì°¨ REST API Project | Seonghunâ€™s Blog</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 52ì¼ì°¨ REST API Project" />
<meta name="author" content="Seonghun Park" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/11/10/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-52%EC%9D%BC%EC%B0%A8-rest-api-project.html" />
<meta property="og:url" content="https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/11/10/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-52%EC%9D%BC%EC%B0%A8-rest-api-project.html" />
<meta property="og:site_name" content="Seonghunâ€™s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-11-10T04:40:23+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 52ì¼ì°¨ REST API Project" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Seonghun Park"},"dateModified":"2025-11-10T04:40:23+00:00","datePublished":"2025-11-10T04:40:23+00:00","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 52ì¼ì°¨ REST API Project","mainEntityOfPage":{"@type":"WebPage","@id":"https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/11/10/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-52%EC%9D%BC%EC%B0%A8-rest-api-project.html"},"url":"https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/11/10/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-52%EC%9D%BC%EC%B0%A8-rest-api-project.html"}</script>
<!-- End Jekyll SEO tag -->


<script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>

<!-- Mermaid -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RQTWJRLWGD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-RQTWJRLWGD');
</script></head><script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggle = document.getElementById("dark-toggle");
        
            // ì´ë¯¸ ì‹¤í–‰í•œ ì  ìˆëŠ”ì§€ í™•ì¸
            const hasToggled = localStorage.getItem("darkModeInitialized");
        
            if (!hasToggled && toggle && toggle.checked) {
                toggleDarkMode();
                localStorage.setItem("darkModeInitialized", "true"); // ìµœì´ˆ ì‹¤í–‰ ê¸°ë¡
            }
        });
    </script>

    <body>
        <div id="scroll-progress"></div>
        <main class="container">
            <section class="about">
                <div class="about-header condensed">
                    <div class="about-title">
                        <a href="/seonghun120614/">
                            
                            <img class="light"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            <img class="dark"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            
                        </a>
                        <h2 id="title">
                            <a href="/seonghun120614/">Seonghun Park</a>
                        </h2>
                    </div><p class="tagline">Developer.</p></div>
                
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </section>
            <section class="content">
                <script>
window.MathJax = {
    tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
    },
    options: {
    renderActions: {
        addMenu: []
    }
    }
};
</script>

<script type="text/javascript"
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script><div class="post-container">
    <a class="post-link" href="/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/11/10/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-52%EC%9D%BC%EC%B0%A8-rest-api-project.html">
        <h2 class="post-title">[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 52ì¼ì°¨ REST API Project</h2>
    </a>
    
    <div class="post-meta">
        <div class="post-date"><i class="icon-calendar"></i>Nov 10, 2025</div><ul class="post-categories"><li>ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼</li><li>ë©‹ì‚¬</li><li>ë°±ì—”ë“œ</li><li>TIL</li><li>Java</li><li>Spring</li></ul></div>

    <div class="post">
        <!--more-->

<h2 id="-ëª©ì°¨">ğŸ“‚ ëª©ì°¨</h2>

<ul>
  <li><a href="#base-entity">Base Entity</a></li>
  <li><a href="#paginated-response-wrapper">Paginated Response Wrapper</a></li>
  <li><a href="#authenticationprincipal">@AuthenticationPrincipal</a></li>
  <li><a href="#handlermethodargumentresolver-ë¥¼-í†µí•œ-ì»¤ìŠ¤í…€-ì¸ì-ë°›ì•„ë³´ê¸°">HandlerMethodArgumentResolver ë¥¼ í†µí•œ ì»¤ìŠ¤í…€ ì¸ì ë°›ì•„ë³´ê¸°</a></li>
  <li><a href="#dto-mapper">DTO Mapper</a></li>
  <li><a href="#spring-cacheredis">Spring Cache(Redis)</a></li>
  <li><a href="#entitygraph">EntityGraph</a></li>
  <li><a href="#applicationevent-ë¡œ-ë¹„ë™ê¸°-ì²˜ë¦¬ë¥¼-ë¶„ë¦¬">ApplicationEvent ë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë¶„ë¦¬</a></li>
  <li><a href=""></a></li>
</ul>

<hr />

<h2 id="-ë³¸ë¬¸">ğŸ“š ë³¸ë¬¸</h2>

<h3 id="base-entity">Base Entity</h3>

<p>ëª¨ë“  ì—”í‹°í‹°ì—ì„œ ë°˜ë³µë˜ëŠ” í•„ë“œë¥¼ ìƒì†ìœ¼ë¡œ ì •ë¦¬í•  ìˆ˜ ìˆëŠ” ì—”í‹°í‹°ë¥¼ ì‘ì„±í•´ë³´ì. ì´ì „ì— <code class="language-plaintext highlighter-rouge">EnableJpaAuditing</code> ì–´ë…¸í…Œì´ì…˜ì„ ë³´ì•˜ë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ë©´ <code class="language-plaintext highlighter-rouge">CreatedDate</code>, <code class="language-plaintext highlighter-rouge">LastModifiedDate</code>, <code class="language-plaintext highlighter-rouge">CreatedBy</code> ë“±ë“± í•„ë“œë¥¼ ìë™ìœ¼ë¡œ ì±„ì›Œì¤„ ìˆ˜ ìˆëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.</p>

<p>ì—”í‹°í‹°ì—ê²Œ</p>

<p><strong>ê³µí†µ</strong></p>
<ul>
  <li>id(PK)</li>
  <li>createdAt, updatedAt</li>
  <li>createdBy updatedBy</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Getter</span>
<span class="nd">@MappedSuperclass</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">BaseEntity</span> <span class="o">{</span>

    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@CreatedDate</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">updatable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">createdAt</span><span class="o">;</span>

    <span class="nd">@LastModifiedDate</span>
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">updatedAt</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">@MappedSuperclass</code> í…Œì´ë¸”ì€ ì—†ê³ , í•„ë“œë§Œ ìì‹ ì—”í‹°í‹°ì— í¬í•¨ì‹œí‚¤ê³  ì‹¶ì„ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ ì‹œê°„ì„ ê¸°ë¡í•  ìˆ˜ ìˆëŠ” <code class="language-plaintext highlighter-rouge">@CreatedDate</code>, <code class="language-plaintext highlighter-rouge">@LastModifiedDate</code> ë“±ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê² ë‹¤.</p>

<p>ë˜ ëˆ„ê°€ ìˆ˜ì •í–ˆëŠ”ì§€, ëˆ„ê°€ ê°±ì‹ í–ˆëŠ”ì§€ë„ <code class="language-plaintext highlighter-rouge">@LastModifiedBy</code>, <code class="language-plaintext highlighter-rouge">@CreatedBy</code> ì–´ë…¸í…Œì´ì…˜ ë§Œìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ”ë°, <code class="language-plaintext highlighter-rouge">AuditorAware</code> ë¥¼ ë¨¼ì € ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì¤˜ì•¼ í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Configuration</span>
<span class="nd">@EnableJpaAuditing</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JpaConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">AuditorAware</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">auditorAware</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"system"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p><strong>AwareAudit ë™ì‘</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Entity</span> <span class="n">ì €ì¥</span><span class="o">/</span><span class="n">ìˆ˜ì •</span> <span class="n">ë°œìƒ</span>
       <span class="err">â†“</span>
<span class="nc">Spring</span> <span class="nc">Data</span> <span class="no">JPA</span> <span class="nc">AuditingHandler</span> <span class="n">ì‘ë™</span>
       <span class="err">â†“</span>
<span class="nc">AuditingHandler</span> <span class="n">ê°€</span> <span class="nc">AuditorAware</span><span class="o">.</span><span class="na">getCurrentAuditor</span><span class="o">()</span> <span class="n">í˜¸ì¶œ</span>
       <span class="err">â†“</span>
<span class="nc">AuditorAware</span> <span class="n">êµ¬í˜„ì²´ê°€</span> <span class="s">"system"</span> <span class="n">ë°˜í™˜</span>
       <span class="err">â†“</span>
<span class="nc">AuditingHandler</span> <span class="n">ê°€</span> <span class="n">ì—”í‹°í‹°ì˜</span> <span class="nd">@CreatedBy</span> <span class="o">/</span> <span class="nd">@LastModifiedBy</span> <span class="n">í•„ë“œë¥¼</span> <span class="n">ìë™ìœ¼ë¡œ</span> <span class="n">ì±„ì›€</span></code></pre></figure>

<p>ë”°ë¼ì„œ system ì€ ë”°ë¡œ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤.</p>

<h3 id="paginated-response-wrapper">Paginated Response Wrapper</h3>

<p>í”„ë¡œì íŠ¸ì—ì„œ ëª»í•´ë´¤ì§€ë§Œ, ë³´í†µ í˜ì´ì§€ë¥¼ API ì‘ë‹µ ë³´ë‚¼ ë•Œ ê³µí†µ í¬ë§·ì„ ë§Œë“¤ë©´ í”„ë¡ íŠ¸ì™€ í˜‘ì—…ì´ í¸í•´ì§„ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">record</span> <span class="nc">ApiPageResponse</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;(</span>
		<span class="nc">List</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">content</span><span class="o">,</span>
		<span class="kt">int</span> <span class="n">page</span><span class="o">,</span>
		<span class="kt">int</span> <span class="n">size</span><span class="o">,</span>
		<span class="kt">long</span> <span class="n">totalElements</span>
<span class="o">)</span> <span class="o">{</span> <span class="o">}</span></code></pre></figure>

<h3 id="authenticationprincipal">@AuthenticationPrincipal</h3>

<p>ë˜í•œ í”„ë¡œì íŠ¸ë¥¼ í•  ë•Œ êµ‰ì¥íˆ ë¶ˆí¸í–ˆë˜ ê²ƒì€ ì»¨íŠ¸ë¡¤ëŸ¬ë§ˆë‹¤ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì´ ì¸ì¦ì´ ë˜ì—ˆëŠ”ì§€ ì•ˆë˜ì—ˆëŠ”ì§€ ë“±ì˜ ê²€ì¦ì´ í•„ìš”í•œë°, ì´ë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì¸ìì—ì„œ <code class="language-plaintext highlighter-rouge">@AuthenticationPrincipal</code> ë§Œìœ¼ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/me"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">UserResponse</span> <span class="nf">me</span><span class="o">(</span><span class="nd">@AuthenticationPrincipal</span> <span class="nc">CustomUserDetails</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">UserResponse</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
<span class="o">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">CustomUserDetails</code> ë¿ë§Œ ì•„ë‹ˆë¼ <code class="language-plaintext highlighter-rouge">Principal</code> ë„ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤.</p>

<h4 id="handlermethodargumentresolver-ë¥¼-í†µí•œ-ì»¤ìŠ¤í…€-ì¸ì-ë°›ì•„ë³´ê¸°">HandlerMethodArgumentResolver ë¥¼ í†µí•œ ì»¤ìŠ¤í…€ ì¸ì ë°›ì•„ë³´ê¸°</h4>

<p>Spring MVCì—ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ íŒŒë¼ë¯¸í„°ë¥¼ ê¸°ë³¸ íƒ€ì…ì´ë‚˜ ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ ì‰½ê²Œ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì§ì ‘ ì •ì˜í•œ ì»¤ìŠ¤í…€ ê°ì²´ë¥¼ ì£¼ì…í•˜ê³  ì‹¶ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">HandlerMethodArgumentResolver</code>ë¥¼ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ì–´, ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ë¥¼ <code class="language-plaintext highlighter-rouge">@CurrentUser</code> ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë°”ë¡œ ë°›ì•„ì˜¤ë„ë¡ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<ol>
  <li><strong>ì»¤ìŠ¤í…€ ì• ë…¸í…Œì´ì…˜ ìƒì„±</strong></li>
</ol>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Target</span><span class="o">(</span><span class="nc">ElementType</span><span class="o">.</span><span class="na">PARAMETER</span><span class="o">)</span>
<span class="nd">@Retention</span><span class="o">(</span><span class="nc">RetentionPolicy</span><span class="o">.</span><span class="na">RUNTIME</span><span class="o">)</span>
<span class="kd">public</span> <span class="nd">@interface</span> <span class="nc">CurrentUser</span> <span class="o">{</span> <span class="o">}</span></code></pre></figure>

<ol>
  <li><strong>Argument Resolver êµ¬í˜„</strong></li>
</ol>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Component</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CurrentUserArgumentResolver</span> <span class="kd">implements</span> <span class="nc">HandlerMethodArgumentResolver</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">supportsParameter</span><span class="o">(</span><span class="nc">MethodParameter</span> <span class="n">parameter</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">parameter</span><span class="o">.</span><span class="na">getParameterAnnotation</span><span class="o">(</span><span class="nc">CurrentUser</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">!=</span> <span class="kc">null</span>
                <span class="o">&amp;&amp;</span> <span class="n">parameter</span><span class="o">.</span><span class="na">getParameterType</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="nc">User</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">resolveArgument</span><span class="o">(</span><span class="nc">MethodParameter</span> <span class="n">parameter</span><span class="o">,</span> 
                                  <span class="nc">ModelAndViewContainer</span> <span class="n">mavContainer</span><span class="o">,</span>
                                  <span class="nc">NativeWebRequest</span> <span class="n">webRequest</span><span class="o">,</span>
                                  <span class="nc">WebDataBinderFactory</span> <span class="n">binderFactory</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="nc">Authentication</span> <span class="n">authentication</span> <span class="o">=</span> <span class="nc">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">().</span><span class="na">getAuthentication</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">authentication</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="n">authentication</span><span class="o">.</span><span class="na">isAuthenticated</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="nc">String</span> <span class="n">email</span> <span class="o">=</span> <span class="n">authentication</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">email</span><span class="o">)</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">UsernameNotFoundException</span><span class="o">(</span><span class="s">"User not found"</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<ol>
  <li><strong>Resolver ë“±ë¡</strong></li>
</ol>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebConfig</span> <span class="kd">implements</span> <span class="nc">WebMvcConfigurer</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CurrentUserArgumentResolver</span> <span class="n">currentUserArgumentResolver</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addArgumentResolvers</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">HandlerMethodArgumentResolver</span><span class="o">&gt;</span> <span class="n">resolvers</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">resolvers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">currentUserArgumentResolver</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ì´ì œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/me"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">UserResponse</span> <span class="nf">me</span><span class="o">(</span><span class="nd">@CurrentUser</span> <span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">UserResponse</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
<span class="o">}</span></code></pre></figure>

<h3 id="dto-mapper">DTO Mapper</h3>

<p><code class="language-plaintext highlighter-rouge">@Mapper</code> ì€ MapStructor ì—ê²Œ ì´ ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ë¼ê³  ì§€ì‹œí•˜ëŠ” ì• ë…¸í…Œì´ì…˜ì´ë©°, ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ MapStruct ê°€ ì»´íŒŒì¼ ì‹œì ì— ìƒì„±í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Mapper</span><span class="o">(</span><span class="n">componentModel</span> <span class="o">=</span> <span class="s">"spring"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
    <span class="nc">UserResponse</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
    <span class="nc">User</span> <span class="nf">toEntity</span><span class="o">(</span><span class="nc">CreateUserRequest</span> <span class="n">req</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">toDto</code> ëŠ” User ë¥¼ ë³€í™˜í• í…ë°, ì´ë•Œ í•„ë“œëª…ì€ ê°™ì€ ëª…ìœ¼ë¡œ ë§¤í•‘ì´ ëœë‹¤. ë§Œì•½ í•„ë“œëª…ì„ ë‹¤ë¥´ê²Œ ê°€ì ¸ê°€ê³  ì‹¶ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">@Mapping</code> ì„ ì¶”ê°€í•´ì„œ ì¡°ì •í•´ì¤˜ì•¼ í•œë‹¤. <code class="language-plaintext highlighter-rouge">toEntity</code> ë„ ë™ì¼í•˜ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Mapper</span><span class="o">(</span><span class="n">componentModel</span> <span class="o">=</span> <span class="s">"spring"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>

    <span class="nd">@Mapping</span><span class="o">(</span><span class="n">source</span> <span class="o">=</span> <span class="s">"email"</span><span class="o">,</span> <span class="n">target</span> <span class="o">=</span> <span class="s">"userEmail"</span><span class="o">)</span>
    <span class="nc">UserResponse</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">source</code> ëŠ” ì—”í‹°í‹° ìª½, ì¦‰ ì›ë³¸, <code class="language-plaintext highlighter-rouge">target</code>ì€ ëª©ì ì§€ ìª½ì´ë‹¤. ì´ëŸ° ê¸°ëŠ¥ ë§ê³ ë„ ì¤‘ì²©ëœ ê°ì²´ì—ì„œë„ êº¼ë‚¼ ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Mapping</span><span class="o">(</span><span class="n">source</span> <span class="o">=</span> <span class="s">"address.city"</span><span class="o">,</span> <span class="n">target</span> <span class="o">=</span> <span class="s">"city"</span><span class="o">)</span>
<span class="nc">UserResponse</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">);</span></code></pre></figure>

<p>ì›í•˜ì§€ ì•ŠëŠ” í•„ë“œëŠ” ë¬´ì‹œí•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">ignore</code> ì†ì„±ì„ ì‚¬ìš©í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Mapping</span><span class="o">(</span><span class="n">target</span> <span class="o">=</span> <span class="s">"password"</span><span class="o">,</span> <span class="n">ignore</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
<span class="nc">UserResponse</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">);</span></code></pre></figure>

<p>íŠ¹ì • ê°’ì´ë‚˜ Java ì½”ë“œë¡œ ê³„ì‚°í•˜ì—¬ ë„£ê³  ì‹¶ì„ë•ŒëŠ” <code class="language-plaintext highlighter-rouge">constant</code>, <code class="language-plaintext highlighter-rouge">expression</code> ì„ ì‚¬ìš©í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Mapping</span><span class="o">(</span><span class="n">target</span> <span class="o">=</span> <span class="s">"role"</span><span class="o">,</span> <span class="n">constant</span> <span class="o">=</span> <span class="s">"USER"</span><span class="o">)</span>

<span class="nd">@Mapping</span><span class="o">(</span><span class="n">target</span> <span class="o">=</span> <span class="s">"createdAt"</span><span class="o">,</span> <span class="n">expression</span> <span class="o">=</span> <span class="s">"java(LocalDateTime.now())"</span><span class="o">)</span></code></pre></figure>

<p>ìœ„ ë§¤í•‘ ë‘ ê°œë¥¼ ë™ì‹œì— ì§€ì •í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">Mappings</code> ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Mappings</span><span class="o">({</span>
    <span class="nd">@Mapping</span><span class="o">(</span><span class="n">source</span> <span class="o">=</span> <span class="s">"email"</span><span class="o">,</span> <span class="n">target</span> <span class="o">=</span> <span class="s">"userEmail"</span><span class="o">),</span>
    <span class="nd">@Mapping</span><span class="o">(</span><span class="n">source</span> <span class="o">=</span> <span class="s">"address.city"</span><span class="o">,</span> <span class="n">target</span> <span class="o">=</span> <span class="s">"city"</span><span class="o">),</span>
    <span class="nd">@Mapping</span><span class="o">(</span><span class="n">target</span> <span class="o">=</span> <span class="s">"password"</span><span class="o">,</span> <span class="n">ignore</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
<span class="o">})</span>
<span class="nc">UserResponse</span> <span class="nf">toDto</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">);</span></code></pre></figure>

<h3 id="spring-cacheredis">Spring Cache(Redis)</h3>

<p>ì¡°íšŒ ìš”ì²­ì´ ë§ì€ ì—”ë“œí¬ì¸íŠ¸ì— ìºì‹±ì„ ê±¸ë©´ íš¨ìœ¨ì´ ì˜¬ë¼ê°€ê²Œ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Cacheable</span><span class="o">(</span><span class="n">cacheNames</span> <span class="o">=</span> <span class="s">"user"</span><span class="o">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s">"#id"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">User</span> <span class="nf">getUser</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span></code></pre></figure>

<h3 id="entitygraph">EntityGraph</h3>

<p><code class="language-plaintext highlighter-rouge">Page</code> ë¡œ ë°˜í™˜í• ë•Œ ê°€ë” fetch join ì„ ì¨ë„ ìµœì í™”ê°€ ì•ˆë¨¹íˆëŠ” ê²½ìš°ê°€ ìˆë‹¤. ì´ëŸ´ë•Œ N+1 ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒì„ ì“¸ ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@EntityGraph</span><span class="o">(</span><span class="n">attributePaths</span> <span class="o">=</span> <span class="o">{</span><span class="s">"posts"</span><span class="o">,</span> <span class="s">"comments"</span><span class="o">})</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span></code></pre></figure>

<h3 id="applicationevent-ë¡œ-ë¹„ë™ê¸°-ì²˜ë¦¬ë¥¼-ë¶„ë¦¬">ApplicationEvent ë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë¶„ë¦¬</h3>

<p>íšŒì›ê°€ì… ì§í›„ ì´ë©”ì¼ ë°œì†¡, ë¡œê·¸ ìƒì„± ë“±ê³¼ ê°™ì€ ë¡œì§ì´ í•„ìš”í•  ìˆ˜ ìˆë‹¤. ì´ë•Œ application ìˆ˜ì¤€ì—ì„œ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì˜ subscriber ë“¤ì—ê²Œ ì•Œë¦´ ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserCreatedEvent</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Long</span> <span class="n">userId</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">UserCreatedEvent</span><span class="o">(</span><span class="nc">Long</span> <span class="n">userId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userId</span> <span class="o">=</span> <span class="n">userId</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">getUserId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userId</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">applicationEventPublisher</span><span class="o">.</span><span class="na">publishEvent</span><span class="o">(</span><span class="k">new</span> <span class="nc">UserCreatedEvent</span><span class="o">(</span><span class="n">userId</span><span class="o">));</span></code></pre></figure>

<p>ì´ë¡œì¨ í•µì‹¬ ì„œë¹„ìŠ¤ ì½”ë“œëŠ” ê°€ë²¼ì›Œì§€ê³  í™•ì¥ì„±ì´ ì¦ê°€ë˜ê²Œ ëœë‹¤. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€ ë°˜ë“œì‹œ ë¦¬ìŠ¤ë„ˆ(subscriber) ì— <code class="language-plaintext highlighter-rouge">@Async</code> ë¥¼ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Component</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserCreatedListener</span> <span class="o">{</span>

    <span class="nd">@Async</span>
    <span class="nd">@EventListener</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handle</span><span class="o">(</span><span class="nc">UserCreatedEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// ì´ë©”ì¼ ë°œì†¡, ë¡œê·¸ ê¸°ë¡ ë“±</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ê·¸ë¦¬ê³  ì´ê²Œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •ì— ë‹¤ìŒ <code class="language-plaintext highlighter-rouge">Async</code> í™œì„±í™”ê°€ í•„ìš”í•˜ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Configuration</span>
<span class="nd">@EnableAsync</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AsyncConfig</span> <span class="o">{}</span></code></pre></figure>


    </div><div id="disqus_thread" style="margin-top:25px"></div>
    <script>
    var disqus_config = function () {
        this.page.url = 'https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/11/10/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-52%EC%9D%BC%EC%B0%A8-rest-api-project.html';
        this.page.identifier = 'https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/11/10/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-52%EC%9D%BC%EC%B0%A8-rest-api-project.html';
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = 'https://seonghun.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
    <noscript>Please enable JavaScript to view the <a
            href="https://disqus.com/?ref_noscript" rel="nofollow">comments
            powered by Disqus.</a></noscript></div>
<script>
    mermaid.initialize({startOnLoad:true});
    window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
</script>
            </section>
            <footer class="condensed">
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </footer>
        </main>
        
        <script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>
        
        <script src="/seonghun120614/assets/js/simple-jekyll-search.min.js"></script>
        <script src="/seonghun120614/assets/js/search.js"></script>
        
        <script>
            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                document.getElementById('scroll-progress').style.width = scrollPercent + '%';
            });
        </script>
    </body>
</html>