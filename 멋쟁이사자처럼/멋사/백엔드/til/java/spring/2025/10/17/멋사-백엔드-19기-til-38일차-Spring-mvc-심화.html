<!DOCTYPE html>
<html lang="kor">

    <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="icon" href="/seonghun120614/assets/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/seonghun120614/assets/css/style.css">
<title>[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 38ì¼ì°¨ Spring MVC ì‹¬í™”</title>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 38ì¼ì°¨ Spring MVC ì‹¬í™” | Seonghunâ€™s Blog</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 38ì¼ì°¨ Spring MVC ì‹¬í™”" />
<meta name="author" content="Seonghun Park" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/17/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-38%EC%9D%BC%EC%B0%A8-Spring-mvc-%EC%8B%AC%ED%99%94.html" />
<meta property="og:url" content="https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/17/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-38%EC%9D%BC%EC%B0%A8-Spring-mvc-%EC%8B%AC%ED%99%94.html" />
<meta property="og:site_name" content="Seonghunâ€™s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-10-17T04:12:51+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 38ì¼ì°¨ Spring MVC ì‹¬í™”" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Seonghun Park"},"dateModified":"2025-10-17T04:12:51+00:00","datePublished":"2025-10-17T04:12:51+00:00","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 38ì¼ì°¨ Spring MVC ì‹¬í™”","mainEntityOfPage":{"@type":"WebPage","@id":"https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/17/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-38%EC%9D%BC%EC%B0%A8-Spring-mvc-%EC%8B%AC%ED%99%94.html"},"url":"https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/17/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-38%EC%9D%BC%EC%B0%A8-Spring-mvc-%EC%8B%AC%ED%99%94.html"}</script>
<!-- End Jekyll SEO tag -->


<script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>

<!-- Mermaid -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RQTWJRLWGD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-RQTWJRLWGD');
</script></head><script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggle = document.getElementById("dark-toggle");
        
            // ì´ë¯¸ ì‹¤í–‰í•œ ì  ìˆëŠ”ì§€ í™•ì¸
            const hasToggled = localStorage.getItem("darkModeInitialized");
        
            if (!hasToggled && toggle && toggle.checked) {
                toggleDarkMode();
                localStorage.setItem("darkModeInitialized", "true"); // ìµœì´ˆ ì‹¤í–‰ ê¸°ë¡
            }
        });
    </script>

    <body>
        <div id="scroll-progress"></div>
        <main class="container">
            <section class="about">
                <div class="about-header condensed">
                    <div class="about-title">
                        <a href="/seonghun120614/">
                            
                            <img class="light"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            <img class="dark"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            
                        </a>
                        <h2 id="title">
                            <a href="/seonghun120614/">Seonghun Park</a>
                        </h2>
                    </div><p class="tagline">Developer.</p></div>
                
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </section>
            <section class="content">
                <script>
window.MathJax = {
    tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
    },
    options: {
    renderActions: {
        addMenu: []
    }
    }
};
</script>

<script type="text/javascript"
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script><div class="post-container">
    <a class="post-link" href="/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/17/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-38%EC%9D%BC%EC%B0%A8-Spring-mvc-%EC%8B%AC%ED%99%94.html">
        <h2 class="post-title">[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 38ì¼ì°¨ Spring MVC ì‹¬í™”</h2>
    </a>
    
    <div class="post-meta">
        <div class="post-date"><i class="icon-calendar"></i>Oct 17, 2025</div><ul class="post-categories"><li>ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼</li><li>ë©‹ì‚¬</li><li>ë°±ì—”ë“œ</li><li>TIL</li><li>Java</li><li>Spring</li></ul></div>

    <div class="post">
        <!--more-->

<h2 id="-ëª©ì°¨">ğŸ“‚ ëª©ì°¨</h2>
<ul>
  <li><a href="#cookie">Cookie</a>
    <ul>
      <li><a href="#cookie-ì˜-êµ¬ì„±ìš”ì†Œ">Cookie ì˜ êµ¬ì„±ìš”ì†Œ</a></li>
      <li><a href="#spring-ì—ì„œ-cookie-ë‹¤ë£¨ê¸°">Spring ì—ì„œ Cookie ë‹¤ë£¨ê¸°</a>
        <ul>
          <li><a href="#sethttponly">setHttpOnly</a></li>
          <li><a href="#setsecure">setSecure</a></li>
          <li><a href="#setsamesite">setSameSite</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#session">Session</a>
    <ul>
      <li><a href="#session-ë™ì‘-ì›ë¦¬">Session ë™ì‘ ì›ë¦¬</a>
        <ul>
          <li><a href="#session-ìƒì„±">Session ìƒì„±</a></li>
        </ul>
      </li>
      <li><a href="#session-êµ¬ì¡°">Session êµ¬ì¡°</a></li>
      <li><a href="#session-í™œìš©-ì˜ˆì‹œ">Session í™œìš© ì˜ˆì‹œ</a></li>
    </ul>
  </li>
  <li><a href="#exception-handling">Exception Handling</a>
    <ul>
      <li><a href="#exceptionhandler-ê·œì¹™">ExceptionHandler ê·œì¹™</a></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="-ë³¸ë¬¸">ğŸ“š ë³¸ë¬¸</h2>

<h3 id="cookie">Cookie</h3>

<p>ì›¹ ë¸Œë¼ìš°ì €ì™€ ì„œë²„ ì‚¬ì´ì—ì„œ ì •ë³´ë¥¼ ì‘ê³  ë‹¨ìˆœí•œ ë¬¸ìì—´ í˜•íƒœë¡œ ì €ì¥í•˜ê³  ì£¼ê³  ë°›ëŠ” ë°©ë²•ì´ë©°, ì„œë²„ê°€ ë¸Œë¼ìš°ì €ì— ë°ì´í„°ë¥¼ ì ê¹ ê¸°ì–µí•´ë‹¬ë¼ê³  ìš”ì²­í•˜ë©´ ë¸Œë¼ìš°ì €ëŠ” ì´ë¥¼ ë¡œì»¬ì— ì €ì¥í•˜ê³  ê°™ì€ ë„ë©”ì¸ìœ¼ë¡œ ìš”ì²­í•  ë•Œë§ˆë‹¤ ì„œë²„ì— ë‹¤ì‹œ ì „ë‹¬í•˜ê²Œ ëœë‹¤.</p>

<p><strong>ìš©ë„</strong></p>
<ul>
  <li>ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€(Session ID ì €ì¥)</li>
  <li>ì‚¬ìš©ì ì„ í˜¸ ì„¤ì • ì €ì¥(ì–¸ì–´, í…Œë§ˆ)</li>
  <li>íŠ¸ë˜í‚¹ ë° ë¶„ì„(ë°©ë¬¸ ê¸°ë¡, ì¥ë°”êµ¬ë‹ˆ ì •ë³´)</li>
</ul>

<p>ì„œë²„ì¸¡ì—ì„œëŠ” ì‘ë‹µìœ¼ë¡œ ë³´ë‚¼ë•Œ ì¿ í‚¤ë¥¼ ì €ì¥í•´ë‹¬ë¼ê³  ìš”ì²­í•  ìˆ˜ ìˆê³ , ê·¸ë•Œ HTTP ì—ëŠ” <code class="language-plaintext highlighter-rouge">Set-Cookie</code> í—¤ë”ê°€ í¬í•¨ë˜ê²Œ ëœë‹¤. ì´í›„ì— ë¸Œë¼ìš°ì €ê°€ ìš”ì²­ì„ ì„œë²„ì— í•œë‹¤ë©´ ìë™ìœ¼ë¡œ ì´ ì¿ í‚¤ë“¤ì´ ì „ì†¡ë˜ê²Œ ëœë‹¤.</p>

<p><strong>ì„œë²„ -&gt; ë¸Œë¼ìš°ì € Set-Cookie í—¤ë”</strong></p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Set-Cookie: userId=park123; Path=/; Max-Age=3600; HttpOnly; Secure</code></pre></figure>

<p><strong>ë¸Œë¼ìš°ì € -&gt; ì„œë²„ Cookie</strong></p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Cookie: userId=park123</code></pre></figure>

<blockquote>
  <p>HTTP ìƒíƒœë¥¼ ë³´ì¡´í•˜ëŠ” ê°€ì¥ ë‚®ì€ ë ˆë²¨ì˜ ë©”ì»¤ë‹ˆì¦˜ì´ ë°”ë¡œ Cookie ì´ë‹¤.</p>
</blockquote>

<h4 id="cookie-ì˜-êµ¬ì„±ìš”ì†Œ">Cookie ì˜ êµ¬ì„±ìš”ì†Œ</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Name</code>: ì´ë¦„</li>
  <li><code class="language-plaintext highlighter-rouge">Value</code>: ê°’</li>
  <li><code class="language-plaintext highlighter-rouge">Domain</code>: ì¿ í‚¤ê°€ ì ìš©ë  ë„ë©”ì¸</li>
  <li><code class="language-plaintext highlighter-rouge">Path</code>: ì¿ í‚¤ê°€ ì ìš©ë  ê²½ë¡œ</li>
  <li><code class="language-plaintext highlighter-rouge">Max-Age</code>: ì¿ í‚¤ ìœ íš¨ê¸°ê°„(-1 ì´ë©´ ì°½ì„ ê»ë‹¤ í‚¤ë©´ ì‚¬ë¼ì§€ëŠ” ì˜µì…˜)</li>
  <li><code class="language-plaintext highlighter-rouge">Secure</code>: HTTPS ì—ì„œë§Œ ì „ì†¡</li>
  <li><code class="language-plaintext highlighter-rouge">HttpOnly</code>: JS ì—ì„œ ì ‘ê·¼ ë¶ˆê°€, XSS ë°©ì–´ìš©</li>
  <li><code class="language-plaintext highlighter-rouge">SameSite</code>: CSRF ê³µê²© ë°©ì§€(<code class="language-plaintext highlighter-rouge">Strict</code>, <code class="language-plaintext highlighter-rouge">Lax</code>, <code class="language-plaintext highlighter-rouge">None</code>)</li>
</ul>

<h4 id="spring-ì—ì„œ-cookie-ë‹¤ë£¨ê¸°">Spring ì—ì„œ Cookie ë‹¤ë£¨ê¸°</h4>

<p><strong>@CookieValue ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ì½ì–´ì˜¤ê¸°</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/viewCookie"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">viewCookie</span><span class="o">(</span><span class="nd">@CookieValue</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"userId"</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="nc">String</span> <span class="n">userId</span><span class="o">,</span>
                         <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"userId"</span><span class="o">,</span> <span class="n">userId</span><span class="o">);</span>
    <span class="k">return</span> <span class="s">"cookie_view"</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<blockquote>
  <p>ë¸Œë¼ìš°ì €ì— ì¿ í‚¤ê°€ ì €ì¥ë˜ì–´ ìˆê³  <code class="language-plaintext highlighter-rouge">userId</code> ë¼ëŠ” ì´ë¦„ì˜ ì¿ í‚¤ê°€ ìˆë‹¤ë©´ ë“¤ê³ ì˜´ ì—†ìœ¼ë©´ <code class="language-plaintext highlighter-rouge">null</code></p>
</blockquote>

<p><strong>ì¿ í‚¤ ìƒì„± ë° ì €ì¥</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/addCookie"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">addCookie</span><span class="o">(</span><span class="nc">CookieRequest</span> <span class="n">cookieRequest</span><span class="o">,</span> <span class="cm">/* @ModelAttribute ìƒëµ ê°€ëŠ¥ */</span>
                        <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>

    <span class="nc">Cookie</span> <span class="n">cookie</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cookie</span><span class="o">(</span><span class="n">cookieRequest</span><span class="o">.</span><span class="na">cookieName</span><span class="o">(),</span> <span class="n">cookieRequest</span><span class="o">.</span><span class="na">cookieValue</span><span class="o">());</span>
    <span class="n">cookie</span><span class="o">.</span><span class="na">setPath</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
    <span class="n">cookie</span><span class="o">.</span><span class="na">setMaxAge</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>

    <span class="n">response</span><span class="o">.</span><span class="na">addCookie</span><span class="o">(</span><span class="n">cookie</span><span class="o">);</span>

    <span class="k">return</span> <span class="s">"redirect:/viewCookie"</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">@ModelAttribute</code> ëŠ” í•˜ë‚˜ì˜ object ë§Œì´ ìš”ì²­ìœ¼ë¡œ ì˜¤ê²Œ ë˜ë©´ ìƒëµì´ ê°€ëŠ¥í•˜ë‹¤.</p>
</blockquote>

<p><strong>ì¿ í‚¤ ì‚­ì œ</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/delCookie"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">deleteCookie</span><span class="o">(</span><span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Cookie</span> <span class="n">cookie</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cookie</span><span class="o">(</span><span class="s">"userId"</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
    <span class="n">cookie</span><span class="o">.</span><span class="na">setMaxAge</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span> <span class="c1">// ë§Œë£Œ</span>
    <span class="n">cookie</span><span class="o">.</span><span class="na">setPath</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
    <span class="n">response</span><span class="o">.</span><span class="na">addCookie</span><span class="o">(</span><span class="n">cookie</span><span class="o">);</span>
    <span class="k">return</span> <span class="s">"cookie_deleted"</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<blockquote>
  <p>ë¸Œë¼ìš°ì €ì—ì„œ ì¿ í‚¤ë¥¼ ì œê±°í•˜ë ¤ë©´ ê°™ì€ ì´ë¦„, ê°™ì€ <code class="language-plaintext highlighter-rouge">Path</code>, <code class="language-plaintext highlighter-rouge">MaxAge=0</code> ìœ¼ë¡œ ë‹¤ì‹œ ë³´ë‚´ì•¼ í•¨</p>
</blockquote>

<h5 id="sethttponly">setHttpOnly</h5>

<p>ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì¿ í‚¤ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ì°¨ë‹¨í•œë‹¤. ì¦‰, <code class="language-plaintext highlighter-rouge">document.cookie</code> ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ê²Œ ëœë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">XSS</code> ê³µê²© ë°©ì§€ìš©</li>
  <li><code class="language-plaintext highlighter-rouge">SessionID</code> ê°€ ë“œëŸ¬ë‚˜ì§€ ì•Šë„ë¡</li>
</ul>

<h5 id="setsecure">setSecure</h5>

<p>HTTPS ì—°ê²°ì—ì„œë§Œ ì¿ í‚¤ë¥¼ ì „ì†¡í•˜ë„ë¡ ì œí•œì„í•˜ë©°, HTTP ìš”ì²­ì—ì„œëŠ” ì´ ì¿ í‚¤ê°€ ì „ì†¡ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>

<ul>
  <li>ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ ì¿ í‚¤ê°€ ë…¸ì¶œë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³ </li>
  <li>HTTP ì˜ ì•”í˜¸í™” ë¶€ì¬ë¡œ, ëˆ„êµ°ê°€ íŠ¸ë˜í”½ ê°ì²­ ì‹œ ì„¸ì…˜ID ê°€ ë…¸ì¶œë˜ë©´ ì•ˆëœë‹¤</li>
</ul>

<h5 id="setsamesite">setSameSite</h5>

<p><code class="language-plaintext highlighter-rouge">CSRF</code> ê³µê²© ë°©ì§€ë¥¼ ìœ„í•´ ì¿ í‚¤ê°€ ì–´ë–¤ ìš”ì²­ ìƒí™©ì—ì„œ ì „ì†¡ë  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì œí•œí•˜ëŠ” ì˜µì…˜ì´ë‹¤. ê¸°ë³¸ê°’ì€ <code class="language-plaintext highlighter-rouge">Lax</code> ì´ë‹¤.</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">CSRF</code> ëŠ” ìš”ì²­ì„ ë³´ë‚¸ í˜ì´ì§€ì˜ ë„ë©”ì¸ ê³¼ ìš”ì²­ì„ ë°›ëŠ” ì„œë²„ì˜ ë„ë©”ì¸ì´ ë‹¤ë¥¼ ìˆ˜ ìˆëŠ”ë° ì´ëŸ´ë•Œ í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìš”ì²­ì´ë¼ê³  í•œë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì˜ ìš”ì²­ì€ ì¿ í‚¤ë¥¼ ì „ì†¡í•˜ì§€ ì•ŠëŠ”ë‹¤.</p>
</blockquote>

<h3 id="session">Session</h3>

<p>ì›¹ì—ì„œ <code class="language-plaintext highlighter-rouge">HTTP</code> ëŠ” <code class="language-plaintext highlighter-rouge">stateless</code> í”„ë¡œí† ì½œì´ë‹¤. ì¦‰, ìš”ì²­ -&gt; ì‘ë‹µ ì‚¬ì´ì— ì„œë²„ëŠ” ì‚¬ìš©ìë¥¼ ê¸°ì–µí•˜ì§€ ëª»í•˜ëŠ”ë°, ëŒ€ë¶€ë¶„ì˜ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ì‚¬ìš©ì ìƒíƒœ ìœ ì§€ê°€ í•„ìš”í•˜ë‹¤.</p>

<p>ì—¬ê¸°ì„œ ë“±ì¥í•˜ëŠ” ê²ƒì´ <code class="language-plaintext highlighter-rouge">session</code> ì´ë©°, ì„¸ì…˜ì€ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ ë³„ë¡œ ìœ ì§€í•˜ëŠ” ì¼ì‹œì  ë°ì´í„° ì €ì¥ ê³µê°„ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.</p>

<h4 id="session-ë™ì‘-ì›ë¦¬">Session ë™ì‘ ì›ë¦¬</h4>

<ol>
  <li>ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ë¡œ ìš”ì²­ì„ ë³´ëƒ„</li>
  <li>ì„œë²„ëŠ” ì„¸ì…˜ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ê³ ìœ í•œ Session ID ë¥¼ ë°œê¸‰ ë°›ìŒ</li>
  <li>ì„¸ì…˜ ID ëŠ” ì£¼ë¡œ ì¿ í‚¤(JSESSIONID) ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬ë¨</li>
  <li>í´ë¼ì´ì–¸íŠ¸ëŠ” ì´í›„ ìš”ì²­ë§ˆë‹¤ ì„¸ì…˜ ID ë¥¼ ì„œë²„ì— ë³´ë‚´ê³ , ì„œë²„ëŠ” ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ ì €ì¥ì†Œë¥¼ ì¡°íšŒí•˜ê²Œ ëœë‹¤.</li>
</ol>

<h5 id="session-ìƒì„±">Session ìƒì„±</h5>

<p>Spring MVC ì—ì„œ Session ì€ <code class="language-plaintext highlighter-rouge">HttpSession</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì œê³µë˜ì§€ë§Œ, ì‹¤ì œë¡œëŠ” <code class="language-plaintext highlighter-rouge">Servlet</code> ì»¨í…Œì´ë„ˆ(Tomcat, Jetty ë“±)ì—ì„œ ê´€ë¦¬í•œë‹¤. ì¦‰, Spring ì´ ì§ì ‘ ì„¸ì…˜ ê°ì²´ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìš”ì²­ ì‹œ <code class="language-plaintext highlighter-rouge">Servlet</code> ì»¨í…Œì´ë„ˆê°€ ì„¸ì…˜ì„ ì •í•˜ê³  Spring ì€ ê·¸ê±¸ í™œìš©í•œë‹¤.</p>

<p>ë”°ë¼ì„œ <code class="language-plaintext highlighter-rouge">DispatcherServlet</code> ì—ì„œ ë°›ì•„ì§„ <code class="language-plaintext highlighter-rouge">HttpServletRequest</code> ì•ˆì— <code class="language-plaintext highlighter-rouge">Session</code> ì´ ë“¤ì–´ìˆê²Œ ëœë‹¤.</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">request.getSession()</code> í˜¸ì¶œ
    <ol>
      <li>ìš”ì²­ ì¿ í‚¤ì— <code class="language-plaintext highlighter-rouge">JSESSIONID</code> ë¥¼ í™•ì¸</li>
      <li>ì—†ìœ¼ë©´ ìƒˆë¡œìš´ ì„¸ì…˜ ê°ì²´ ìƒˆì„±</li>
      <li>ê³ ìœ í•œ ì„¸ì…˜ ID ë¥¼ ìƒì„±(<code class="language-plaintext highlighter-rouge">UUID</code> ë˜ëŠ” ëœë¤ ë¬¸ìì—´)</li>
      <li>ì„œë²„ ë©”ëª¨ë¦¬(ê¸°ë³¸ì€ <code class="language-plaintext highlighter-rouge">HashMap</code> ë“±)ì— ì„¸ì…˜ ì €ì¥</li>
      <li>í´ë¼ì´ì–¸íŠ¸ì—ê²Œ <code class="language-plaintext highlighter-rouge">Set-Cookie: JSESSIONID=ëœë¤ê°’</code> ì „ì†¡</li>
    </ol>
  </li>
  <li>ì´í›„ ìš”ì²­ì—ì„œ ì„¸ì…˜ ì‚¬ìš©
    <ol>
      <li>ë¸Œë¼ìš°ì €ê°€ <code class="language-plaintext highlighter-rouge">JSESSIONID</code> ì¿ í‚¤ë¥¼ ë³´ë‚´ë©´ ì»¨í…Œì´ë„ˆê°€ ì„¸ì…˜ ê°ì²´ë¥¼ ì¡°íšŒí•´ì„œ ë°˜í™˜</li>
      <li>Spring <code class="language-plaintext highlighter-rouge">Controller</code> ì—ì„œ ë°”ë¡œ <code class="language-plaintext highlighter-rouge">session.getAttribute("user")</code> ë“±ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥</li>
    </ol>
  </li>
</ol>

<h4 id="session-êµ¬ì¡°">Session êµ¬ì¡°</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">HttpSession</code>: ì¸í„°í˜ì´ìŠ¤</li>
  <li><code class="language-plaintext highlighter-rouge">StandardSession</code> (Tomcat êµ¬í˜„)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">id</code>: ì„¸ì…˜ ì‹ë³„ì</li>
      <li><code class="language-plaintext highlighter-rouge">creationTime</code>: ì„¸ì…˜ ìƒì„± ì‹œê°„</li>
      <li><code class="language-plaintext highlighter-rouge">lastAccessedTime</code>: ë§ˆì§€ë§‰ ì ‘ê·¼ ì‹œê°„</li>
      <li><code class="language-plaintext highlighter-rouge">attributes</code>: ì„¸ì…˜ì— ì €ì¥ëœ key-value <code class="language-plaintext highlighter-rouge">Map</code></li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>Servlet ì´ ìƒì„±í•¨ì„ ì•Œê³  ìˆì</p>
</blockquote>

<h4 id="session-í™œìš©-ì˜ˆì‹œ">Session í™œìš© ì˜ˆì‹œ</h4>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/login"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">login</span><span class="o">(</span><span class="nc">HttpSession</span> <span class="n">session</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ë¡œê·¸ì¸ ì„±ê³µ í›„ ì‚¬ìš©ì ì •ë³´ë¥¼ ì„¸ì…˜ì— ì €ì¥</span>
    <span class="n">session</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"user"</span><span class="o">,</span> <span class="s">"park"</span><span class="o">);</span>
    <span class="n">session</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"role"</span><span class="o">,</span> <span class="s">"admin"</span><span class="o">);</span>
    <span class="k">return</span> <span class="s">"home"</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<blockquote>
  <p>ì´ë•Œ String, <code class="language-plaintext highlighter-rouge">Object</code> ë¡œ ë“¤ì–´ê°€ëŠ”ë°, <code class="language-plaintext highlighter-rouge">Object</code> ëŠ” <code class="language-plaintext highlighter-rouge">Serializable</code> í•´ì•¼ í•œë‹¤.</p>
</blockquote>

<p><strong>SessionAttribute</strong></p>

<p><code class="language-plaintext highlighter-rouge">@ModelAttribute</code> ì²˜ëŸ¼ ì—¬ê¸°ì„œë„ <code class="language-plaintext highlighter-rouge">@SessionAttribute</code> ì˜ <code class="language-plaintext highlighter-rouge">name</code> ì˜µì…˜ì€ ìƒëµ ê°€ëŠ¥í•˜ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/dashboard"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">dashboard</span><span class="o">(</span><span class="nd">@SessionAttribute</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"user"</span><span class="o">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span> <span class="nc">String</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">user</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">return</span> <span class="s">"redirect:/login"</span><span class="o">;</span>
    <span class="k">return</span> <span class="s">"dashboard"</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p><strong>SessionAttributes</strong></p>

<p>ì´ ì–´ë…¸í…Œì´ì…˜ì€ ì‚´ì§ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ”ë°, ìƒˆë¡­ê²Œ ì ‘ì†í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ëŠ” ì“¸ë ¤ëŠ” <code class="language-plaintext highlighter-rouge">key</code> ê°€ <code class="language-plaintext highlighter-rouge">Session</code> ì— ì—†ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">@ModelAttribute</code> ë¡œ <code class="language-plaintext highlighter-rouge">key</code> ê°€ ìƒì„±ë˜ë©´ <code class="language-plaintext highlighter-rouge">@SessionAttributes</code> ë•ë¶„ì— ì´ ê°’ì´ ì„¸ì…˜ì—ë„ ì €ì¥ë˜ê²Œ ëœë‹¤. ì¦‰, HTTP Session ì´ ìƒì„±ë  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ì €ì¥í•˜ë„ë¡ ì§€ì •í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@SessionAttributes</span><span class="o">(</span><span class="s">"visitCount"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SessionController</span> <span class="o">{</span>

	<span class="c1">// HTTP Request ì—ì„œ ëª¨ë¸ì— ê°’ì´ ì—†ì„ ë•Œë§Œ í˜¸ì¶œë˜ëŠ” ì• ë„ˆí…Œì´ì…˜ì´ë‹¤.</span>
    <span class="c1">// í•˜ì§€ë§Œ, ìœ„ì—ì„œ SessionAttributes ë¡œ HTTP Session ë²”ìœ„ë¡œ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— í•´ë‹¹ key ëŠ” ì„¸ì…˜ì´ ëë‚ ë•Œê¹Œì§€ ê³„ì† ìœ ì§€</span>
	<span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">"visitCount"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="nc">Integer</span> <span class="nf">initVisitCount</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"initVisitCount"</span><span class="o">);</span>
		<span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
	<span class="o">}</span>

    <span class="o">...</span>
<span class="o">}</span></code></pre></figure>

<blockquote>
  <p>ë§Œì•½ í´ë¼ì´ì–¸íŠ¸ê°€ ê°™ì€ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë‹¤ë¥¸ ìš”ì²­ì„ ë‹¤ì‹œ ë³´ë‚´ê²Œ ë˜ë©´ ì„¸ì…˜ì— ì´ë¯¸ <code class="language-plaintext highlighter-rouge">key</code> ê°€ ì¡´ì¬í•´ì„œ, ì´ ê°’ì„ ìë™ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">Model</code> ì— ì ìš©í•˜ê³ , ì´ ì–´ë…¸í…Œì´ì…˜ì€ <code class="language-plaintext highlighter-rouge">Controller</code> ë‹¨ìœ„ë¡œ ì ìš©ë˜ë¯€ë¡œ ë‹¤ë¥¸ ì»¨í‹€ë¡¤ëŸ¬ì—ì„œëŠ” í•´ë‹¹ <code class="language-plaintext highlighter-rouge">key-value</code> ë¥¼ ëª»ì“´ë‹¤. ë‹¤ë§Œ, ë‹¤ë¥¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë™ì¼ key ë¥¼ ìˆ˜ë™ìœ¼ë¡œ êº¼ë‚´ì„œ ì“°ëŠ”ê±´ ê°€ëŠ¥í•˜ë‹¤. ì„¸ì…˜ì€ ê³µìœ  ì˜ì—­ì´ê¸° ë•Œë¬¸</p>
</blockquote>

<h3 id="exception-handling">Exception Handling</h3>

<p>ë³´í†µ ìë°”ì—ì„œ ì—ëŸ¬ë¥¼ ë§Œë‚˜ê²Œ ë˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ try-catch ë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬ë¥¼ í•˜ê²Œ ëœë‹¤. í•˜ì§€ë§Œ ì´ë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë©”ì„œë“œ í•˜ë‚˜í•˜ë‚˜ ë§ˆë‹¤ ìƒì„±ì‹œí‚¨ë‹¤ê³  í•œë‹¤ë©´ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§„ë‹¤.</p>

<p>ì´ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ê²Œ <code class="language-plaintext highlighter-rouge">@ExceptionHandler</code> ì´ë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ ë‹¨ìœ„ì—ì„œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•´ì£¼ê³  ì˜ˆì™¸ë¥¼ í•œ ê³³ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ í•˜ë‚˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì— ëŒ€í•´ì„œ Exception Handling ì„ í•˜ê³  ì‹¶ë‹¤ë©´ ê·¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ë¶€ì— <code class="language-plaintext highlighter-rouge">@ExceptionHandler</code> ê°€ ë¶™ì€ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserController</span> <span class="o">{</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/user"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUser</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">name</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nc">IllegalArgumentException</span><span class="o">(</span><span class="s">"ì´ë¦„ì´ ì—†ìŠµë‹ˆë‹¤!"</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">"user"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleIllegalArgument</span><span class="o">(</span><span class="nc">IllegalArgumentException</span> <span class="n">e</span><span class="o">,</span> <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"error"</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="k">return</span> <span class="s">"error"</span><span class="o">;</span> <span class="c1">// error.html ë¡œ í¬ì›Œë”©</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ ì¦‰, ì „ì—­ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ í´ë˜ìŠ¤ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ <code class="language-plaintext highlighter-rouge">@ControllerAdvice</code> ë¥¼ í´ë˜ìŠ¤ì— ë¶™ì—¬ì£¼ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@ControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GlobalExceptionHandler</span> <span class="o">{</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">IllegalArgumentException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleIllegalArgument</span><span class="o">(</span><span class="nc">IllegalArgumentException</span> <span class="n">e</span><span class="o">,</span> <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"error"</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="k">return</span> <span class="s">"error"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">Exception</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleGeneral</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">,</span> <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"error"</span><span class="o">,</span> <span class="s">"ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">"error"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">ControllerAdvice</code> ëŠ” ë‹¤ìŒ ì˜µì…˜ì„ ì œê³µí•œë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">basePackages</code>: íŠ¹ì • íŒ¨í‚¤ì§€ í•˜ìœ„ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì—ë§Œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì ìš©í•  ë•Œ ì‚¬ìš©</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@ControllerAdvice</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="s">"com.example.user"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserExceptionHandler</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span></code></pre></figure>

<ul>
  <li><code class="language-plaintext highlighter-rouge">basePackageClasses</code>: í´ë˜ìŠ¤ ê¸°ì¤€ìœ¼ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤. í•´ë‹¹ í´ë˜ìŠ¤ê°€ ì†í•œ íŒ¨í‚¤ì§€ê°€ ìë™ ì¸ì‹ëœë‹¤. ì•„ë˜ì™€ ê°™ì´ ì“°ë©´ <code class="language-plaintext highlighter-rouge">UserController</code> ê°€ ì†í•œ íŒ¨í‚¤ì§€ì˜ ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì— ì ìš©ë¨</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@ControllerAdvice</span><span class="o">(</span><span class="n">basePackageClasses</span> <span class="o">=</span> <span class="nc">UserController</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserExceptionHandler</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span></code></pre></figure>

<ul>
  <li><code class="language-plaintext highlighter-rouge">assignableTypes</code>: íŠ¹ì • í´ë˜ìŠ¤ë‚˜ íƒ€ì…(ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤)ì—ë§Œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ì ìš©, <code class="language-plaintext highlighter-rouge">basePackageClasses</code> ë‘ ë‹¤ë¥¸ ì ì€ ì†í•œ í´ë˜ìŠ¤ì˜ ì ìš© ìœ ë¬´ì´ë‹¤.</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@ControllerAdvice</span><span class="o">(</span><span class="n">assignableTypes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">AdminController</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="nc">UserController</span><span class="o">.</span><span class="na">class</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpecificControllerAdvice</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span></code></pre></figure>

<ul>
  <li><code class="language-plaintext highlighter-rouge">annotations</code>: íŠ¹ì • ì• ë„ˆí…Œì´ì…˜ì´ ë¶™ì€ ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì—ë§Œ ì ìš©</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@ControllerAdvice</span><span class="o">(</span><span class="n">annotations</span> <span class="o">=</span> <span class="nc">RestController</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RestApiExceptionHandler</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span></code></pre></figure>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">RestControllerAdvice</code> ëŠ” REST API ìš© ì „ì—­ ì²˜ë¦¬</p>
</blockquote>

<h4 id="exceptionhandler-ê·œì¹™">ExceptionHandler ê·œì¹™</h4>

<p>ëª¨ë“  í¸ë¦¬í•œ ê²ƒì—ëŠ” ê·œì¹™ì´ ìˆìŒì„ ìŠì§€ ë§ê³  ì—¬ê¸°ì„œë„ ê·œì¹™ì„ ì§€í‚¤ë„ë¡ ì–´ë–¤ ê·œì¹™ì´ ìˆëŠ”ì§€ ë³´ì.</p>

<p>ë³´í†µ <code class="language-plaintext highlighter-rouge">@ExceptionHandler</code> ë©”ì„œë“œê°€ ìë™ìœ¼ë¡œ ì£¼ì… ë°›ì„ ìˆ˜ ìˆëŠ” ì¸ìëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì¼ë°˜ í•¸ë“¤ëŸ¬ ë©”ì„œë“œì™€ ë™ì¼í•œ ê·œì¹™ìœ¼ë¡œ ì¸ìë¥¼ í•´ê²°í•œë‹¤. ì¦‰ <code class="language-plaintext highlighter-rouge">HandlerMethodArgumentResolver</code> ë“¤ì´ ì§€ì›í•˜ëŠ” ëª¨ë“  íƒ€ì…ì´ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.</p>

<ol>
  <li>ì˜ˆì™¸ íƒ€ì…</li>
  <li>HTTP ê´€ë ¨ í‘œì¤€ íƒ€ì…
    <ul>
      <li><code class="language-plaintext highlighter-rouge">HttpServletRequest</code></li>
      <li><code class="language-plaintext highlighter-rouge">HttpServletResponse</code></li>
      <li><code class="language-plaintext highlighter-rouge">HttpSession</code></li>
      <li><code class="language-plaintext highlighter-rouge">ServletRequest</code> / <code class="language-plaintext highlighter-rouge">ServletResponse</code></li>
      <li><code class="language-plaintext highlighter-rouge">WebRequest</code></li>
    </ul>
  </li>
  <li>Spring MVC ì˜ ì›¹ë ˆë²¨ ë„ìš°ë¯¸
    <ul>
      <li><code class="language-plaintext highlighter-rouge">HttpEntity</code></li>
      <li><code class="language-plaintext highlighter-rouge">Locale</code></li>
      <li><code class="language-plaintext highlighter-rouge">Principal</code></li>
      <li><code class="language-plaintext highlighter-rouge">InputStream</code> / <code class="language-plaintext highlighter-rouge">Reader</code> ë“±ë“±</li>
    </ul>
  </li>
  <li>ëª¨ë¸ ê´€ë ¨ íƒ€ì…(ë³´í†µ key-value ë¥¼ ë‚˜íƒ€ë‚´ëŠ”ê±°-Map ë©´ ë‹¤ ëœë‹¤)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Model</code></li>
      <li><code class="language-plaintext highlighter-rouge">ModelMap</code></li>
      <li><code class="language-plaintext highlighter-rouge">ModelAndView</code></li>
      <li><code class="language-plaintext highlighter-rouge">Map&lt;String, Object&gt;</code></li>
    </ul>
  </li>
  <li>ìš”ì²­ ë°”ì¸ë”© ê´€ë ¨
    <ul>
      <li><code class="language-plaintext highlighter-rouge">@RequestParam</code></li>
      <li><code class="language-plaintext highlighter-rouge">@RequestHeader</code></li>
      <li><code class="language-plaintext highlighter-rouge">@RequestBody</code></li>
      <li><code class="language-plaintext highlighter-rouge">@PathVariable</code></li>
      <li><code class="language-plaintext highlighter-rouge">@ModelAttribute</code></li>
      <li><code class="language-plaintext highlighter-rouge">@CookieValue</code></li>
      <li><code class="language-plaintext highlighter-rouge">@SessionValue</code></li>
      <li>â€¦</li>
    </ul>
  </li>
</ol>

<p>ìœ„ íƒ€ì…ë“¤ì€ ìë™ìœ¼ë¡œ ì£¼ì… ë°›ëŠ”ë‹¤. ë”°ë¼ì„œ ë³´í†µ ì²« ì¸ìë¡œ <code class="language-plaintext highlighter-rouge">Exception</code> í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ì¸ìë¥¼ ì •ì˜í•´ì£¼ë©´ ë‚´ë¶€ì—ì„œ ì´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ë³´í†µ Error ì²˜ë¦¬ë¥¼ í•  ë•Œ, Status ì½”ë“œì™€ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì—´ê±°í˜•ìœ¼ë¡œ ì„ ì–¸í•˜ê³  ì´ë¥¼ ì‚¬ìš©í•´ì£¼ëŠ”ê²Œ ê¹”ë”í•  ê²ƒ ê°™ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@ControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GlobalExceptionHandler</span> <span class="o">{</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">ResourceNotFoundException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ModelAndView</span> <span class="nf">handleNotFound</span><span class="o">(</span><span class="nc">ResourceNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ModelAndView</span> <span class="n">mav</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ModelAndView</span><span class="o">(</span><span class="s">"error/404"</span><span class="o">);</span>
        <span class="n">mav</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">"message"</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">mav</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">ValidationException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleValidation</span><span class="o">(</span><span class="nc">ValidationException</span> <span class="n">e</span><span class="o">,</span> <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"errors"</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getErrors</span><span class="o">());</span>
        <span class="k">return</span> <span class="s">"error/validation"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">DataAccessException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleDatabaseError</span><span class="o">(</span><span class="nc">DataAccessException</span> <span class="n">e</span><span class="o">,</span>
                                     <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Database error"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"error"</span><span class="o">,</span> <span class="s">"Database error occurred"</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">"error/500"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">Exception</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleGeneral</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">,</span> <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Unexpected error"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
        <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"error"</span><span class="o">,</span> <span class="s">"An unexpected error occurred"</span><span class="o">);</span>
        <span class="k">return</span> <span class="s">"error/general"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Custom Exception</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResourceNotFoundException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">ResourceNotFoundException</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

    </div><div id="disqus_thread" style="margin-top:25px"></div>
    <script>
    var disqus_config = function () {
        this.page.url = 'https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/17/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-38%EC%9D%BC%EC%B0%A8-Spring-mvc-%EC%8B%AC%ED%99%94.html';
        this.page.identifier = 'https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/17/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-38%EC%9D%BC%EC%B0%A8-Spring-mvc-%EC%8B%AC%ED%99%94.html';
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = 'https://seonghun.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
    <noscript>Please enable JavaScript to view the <a
            href="https://disqus.com/?ref_noscript" rel="nofollow">comments
            powered by Disqus.</a></noscript></div>
<script>
    mermaid.initialize({startOnLoad:true});
    window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
</script>
            </section>
            <footer class="condensed">
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </footer>
        </main>
        
        <script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>
        
        <script src="/seonghun120614/assets/js/simple-jekyll-search.min.js"></script>
        <script src="/seonghun120614/assets/js/search.js"></script>
        
        <script>
            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                document.getElementById('scroll-progress').style.width = scrollPercent + '%';
            });
        </script>
    </body>
</html>