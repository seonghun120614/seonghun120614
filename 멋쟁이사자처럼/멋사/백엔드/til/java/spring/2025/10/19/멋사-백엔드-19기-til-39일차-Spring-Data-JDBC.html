<!DOCTYPE html>
<html lang="kor">

    <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="icon" href="/seonghun120614/assets/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/seonghun120614/assets/css/style.css">
<title>[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 39ì¼ì°¨ Spring Data JDBC</title>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 39ì¼ì°¨ Spring Data JDBC | Seonghunâ€™s Blog</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 39ì¼ì°¨ Spring Data JDBC" />
<meta name="author" content="Seonghun Park" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ğŸ“‚ ëª©ì°¨ Spring JDBC JdbcTemplate ë‹¨ì¼ Query ì—°ì‚° ë‹¤ìˆ˜ Query ì—°ì‚° ìˆ˜ì • ì—°ì‚°(insert, delete, update ë“±ë“±) NamedParameterJdbcTemplate DataAccessException ê³„ì¸µ SimpleJdbcInsert Spring Data JDBC &amp; R2DBC Repository ì¸í„°í˜ì´ìŠ¤ CrudRepository ì¸í„°í˜ì´ìŠ¤ PagingAndSortingRepository ì¸í„°í˜ì´ìŠ¤ Slice â­ï¸ New Entity Detection @NoRepositoryBean ë¥¼ ì •ì˜í•˜ì—¬ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë“¤ ì •ì˜ ì €ì¥ì†Œ í™œì„±í™” êµ¬ì„± ì •ì˜í•˜ê¸° â­ï¸ Query Method Query Lookup Strategies Query Creation Reserved Method Names Property Expressions Repository Methods Returning Collections or Iterables Streaming Query Results Asynchronous Query Results Paging, Iterating Large Results, Sorting &amp; Limiting" />
<meta property="og:description" content="ğŸ“‚ ëª©ì°¨ Spring JDBC JdbcTemplate ë‹¨ì¼ Query ì—°ì‚° ë‹¤ìˆ˜ Query ì—°ì‚° ìˆ˜ì • ì—°ì‚°(insert, delete, update ë“±ë“±) NamedParameterJdbcTemplate DataAccessException ê³„ì¸µ SimpleJdbcInsert Spring Data JDBC &amp; R2DBC Repository ì¸í„°í˜ì´ìŠ¤ CrudRepository ì¸í„°í˜ì´ìŠ¤ PagingAndSortingRepository ì¸í„°í˜ì´ìŠ¤ Slice â­ï¸ New Entity Detection @NoRepositoryBean ë¥¼ ì •ì˜í•˜ì—¬ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë“¤ ì •ì˜ ì €ì¥ì†Œ í™œì„±í™” êµ¬ì„± ì •ì˜í•˜ê¸° â­ï¸ Query Method Query Lookup Strategies Query Creation Reserved Method Names Property Expressions Repository Methods Returning Collections or Iterables Streaming Query Results Asynchronous Query Results Paging, Iterating Large Results, Sorting &amp; Limiting" />
<link rel="canonical" href="https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/19/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-39%EC%9D%BC%EC%B0%A8-Spring-Data-JDBC.html" />
<meta property="og:url" content="https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/19/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-39%EC%9D%BC%EC%B0%A8-Spring-Data-JDBC.html" />
<meta property="og:site_name" content="Seonghunâ€™s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-10-19T06:30:58+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 39ì¼ì°¨ Spring Data JDBC" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Seonghun Park"},"dateModified":"2025-10-19T06:30:58+00:00","datePublished":"2025-10-19T06:30:58+00:00","description":"ğŸ“‚ ëª©ì°¨ Spring JDBC JdbcTemplate ë‹¨ì¼ Query ì—°ì‚° ë‹¤ìˆ˜ Query ì—°ì‚° ìˆ˜ì • ì—°ì‚°(insert, delete, update ë“±ë“±) NamedParameterJdbcTemplate DataAccessException ê³„ì¸µ SimpleJdbcInsert Spring Data JDBC &amp; R2DBC Repository ì¸í„°í˜ì´ìŠ¤ CrudRepository ì¸í„°í˜ì´ìŠ¤ PagingAndSortingRepository ì¸í„°í˜ì´ìŠ¤ Slice â­ï¸ New Entity Detection @NoRepositoryBean ë¥¼ ì •ì˜í•˜ì—¬ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë“¤ ì •ì˜ ì €ì¥ì†Œ í™œì„±í™” êµ¬ì„± ì •ì˜í•˜ê¸° â­ï¸ Query Method Query Lookup Strategies Query Creation Reserved Method Names Property Expressions Repository Methods Returning Collections or Iterables Streaming Query Results Asynchronous Query Results Paging, Iterating Large Results, Sorting &amp; Limiting","headline":"[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 39ì¼ì°¨ Spring Data JDBC","mainEntityOfPage":{"@type":"WebPage","@id":"https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/19/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-39%EC%9D%BC%EC%B0%A8-Spring-Data-JDBC.html"},"url":"https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/19/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-39%EC%9D%BC%EC%B0%A8-Spring-Data-JDBC.html"}</script>
<!-- End Jekyll SEO tag -->


<script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>

<!-- Mermaid -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RQTWJRLWGD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-RQTWJRLWGD');
</script></head><script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggle = document.getElementById("dark-toggle");
        
            // ì´ë¯¸ ì‹¤í–‰í•œ ì  ìˆëŠ”ì§€ í™•ì¸
            const hasToggled = localStorage.getItem("darkModeInitialized");
        
            if (!hasToggled && toggle && toggle.checked) {
                toggleDarkMode();
                localStorage.setItem("darkModeInitialized", "true"); // ìµœì´ˆ ì‹¤í–‰ ê¸°ë¡
            }
        });
    </script>

    <body>
        <div id="scroll-progress"></div>
        <main class="container">
            <section class="about">
                <div class="about-header condensed">
                    <div class="about-title">
                        <a href="/seonghun120614/">
                            
                            <img class="light"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            <img class="dark"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            
                        </a>
                        <h2 id="title">
                            <a href="/seonghun120614/">Seonghun Park</a>
                        </h2>
                    </div><p class="tagline">Developer.</p></div>
                
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </section>
            <section class="content">
                <script>
window.MathJax = {
    tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
    },
    options: {
    renderActions: {
        addMenu: []
    }
    }
};
</script>

<script type="text/javascript"
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script><div class="post-container">
    <a class="post-link" href="/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/19/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-39%EC%9D%BC%EC%B0%A8-Spring-Data-JDBC.html">
        <h2 class="post-title">[ë©‹ì‚¬ ë°±ì—”ë“œ 19ê¸°] TIL 39ì¼ì°¨ Spring Data JDBC</h2>
    </a>
    
    <div class="post-meta">
        <div class="post-date"><i class="icon-calendar"></i>Oct 19, 2025</div><ul class="post-categories"><li>ë©‹ìŸì´ì‚¬ìì²˜ëŸ¼</li><li>ë©‹ì‚¬</li><li>ë°±ì—”ë“œ</li><li>TIL</li><li>Java</li><li>Spring</li></ul></div>

    <div class="post">
        <h2 id="-ëª©ì°¨">ğŸ“‚ ëª©ì°¨</h2>
<ul>
  <li><a href="#spring-jdbc">Spring JDBC</a>
    <ul>
      <li><a href="#jdbctemplate">JdbcTemplate</a>
        <ul>
          <li><a href="#ë‹¨ì¼-query-ì—°ì‚°">ë‹¨ì¼ Query ì—°ì‚°</a></li>
          <li><a href="#ë‹¤ìˆ˜-query-ì—°ì‚°">ë‹¤ìˆ˜ Query ì—°ì‚°</a></li>
          <li><a href="#ìˆ˜ì •-ì—°ì‚°insert-delete-update-ë“±ë“±">ìˆ˜ì • ì—°ì‚°(insert, delete, update ë“±ë“±)</a></li>
          <li><a href="#namedparameterjdbctemplate">NamedParameterJdbcTemplate</a></li>
          <li><a href="#dataaccessexception-ê³„ì¸µ">DataAccessException ê³„ì¸µ</a></li>
        </ul>
      </li>
      <li><a href="#simplejdbcinsert">SimpleJdbcInsert</a></li>
    </ul>
  </li>
  <li><a href="#spring-data-jdbc--r2dbc">Spring Data JDBC &amp; R2DBC</a>
    <ul>
      <li><a href="#repository-ì¸í„°í˜ì´ìŠ¤">Repository ì¸í„°í˜ì´ìŠ¤</a>
        <ul>
          <li><a href="#crudrepository-ì¸í„°í˜ì´ìŠ¤">CrudRepository ì¸í„°í˜ì´ìŠ¤</a></li>
          <li><a href="#pagingandsortingrepository-ì¸í„°í˜ì´ìŠ¤">PagingAndSortingRepository ì¸í„°í˜ì´ìŠ¤</a></li>
          <li><a href="#slice">Slice</a></li>
        </ul>
      </li>
      <li><a href="#ï¸-new-entity-detection">â­ï¸ New Entity Detection</a></li>
      <li><a href="#norepositorybean-ë¥¼-ì •ì˜í•˜ì—¬-ìì£¼-ì‚¬ìš©í•˜ëŠ”-ë©”ì„œë“œë“¤-ì •ì˜">@NoRepositoryBean ë¥¼ ì •ì˜í•˜ì—¬ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë“¤ ì •ì˜</a></li>
      <li><a href="#ì €ì¥ì†Œ-í™œì„±í™”-êµ¬ì„±-ì •ì˜í•˜ê¸°">ì €ì¥ì†Œ í™œì„±í™” êµ¬ì„± ì •ì˜í•˜ê¸°</a></li>
      <li><a href="#ï¸-query-method">â­ï¸ Query Method</a>
        <ul>
          <li><a href="#query-lookup-strategies">Query Lookup Strategies</a></li>
          <li><a href="#query-creation">Query Creation</a></li>
          <li><a href="#reserved-method-names">Reserved Method Names</a></li>
          <li><a href="#property-expressions">Property Expressions</a></li>
          <li><a href="#repository-methods-returning-collections-or-iterables">Repository Methods Returning Collections or Iterables</a></li>
          <li><a href="#streaming-query-results">Streaming Query Results</a></li>
          <li><a href="#asynchronous-query-results">Asynchronous Query Results</a></li>
          <li><a href="#paging-iterating-large-results-sorting--limiting">Paging, Iterating Large Results, Sorting &amp; Limiting</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="-ë³¸ë¬¸">ğŸ“š ë³¸ë¬¸</h2>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Connection</span> <span class="n">conn</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">PreparedStatement</span> <span class="n">pstmt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">dataSource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>
    <span class="n">pstmt</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"SELECT * FROM users WHERE id = ?"</span><span class="o">);</span>
    <span class="n">pstmt</span><span class="o">.</span><span class="na">setLong</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">userId</span><span class="o">);</span>
    <span class="n">rs</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
    
    <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">User</span><span class="o">(</span>
            <span class="n">rs</span><span class="o">.</span><span class="na">getLong</span><span class="o">(</span><span class="s">"id"</span><span class="o">),</span>
            <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"name"</span><span class="o">),</span>
            <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"email"</span><span class="o">)</span>
        <span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">rs</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="k">try</span> <span class="o">{</span> <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">pstmt</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="k">try</span> <span class="o">{</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">conn</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="k">try</span> <span class="o">{</span> <span class="n">conn</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{}</span>
<span class="o">}</span></code></pre></figure>

<p>ì´ì „ì˜ ìˆœìˆ˜ JDBC ì˜ DB ì—ê²Œ SQL ë¬¸ì„ ë˜ì§€ëŠ” ê³¼ì •ì´ë‹¤. ì´ë ‡ê²Œ ì¥í™©í•˜ê³  ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì‹ ì½”ë“œëŠ” ë§¤ìš° ìœ ì§€ë³´ìˆ˜ê°€ ê¹Œë‹¤ë¡­ê³  í˜ë“¤ë‹¤. ì´ë¥¼ Spring ê³¼ í•©ì¹˜ë©´ ë§¤ìš° ê°„ë‹¨í•œ ì½”ë“œê°€ ëœë‹¤.</p>

<p><strong>ë‹¨ì </strong></p>
<ol>
  <li>ë°˜ë³µë˜ëŠ” ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œ</li>
  <li>ë³µì¡í•œ ì˜ˆì™¸ì²˜ë¦¬: Checked Exception ì¸ SQLException ì„ ë§¤ë²ˆ ì²˜ë¦¬</li>
  <li>ë¦¬ì†ŒìŠ¤ ëˆ„ìˆ˜ ìœ„í—˜: finally ë¸”ë¡ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ close() í•´ì•¼í•¨</li>
  <li>ê°€ë…ì„± ì €í•˜: ë‹¤ë¥¸ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ ë•Œë¬¸ì— ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ í•µì‹¬ ë¡œì§ì´ ë³´ì´ì§€ê°€ ì•ŠìŒ</li>
</ol>

<h3 id="spring-jdbc">Spring JDBC</h3>

<p>ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” JDBC í…œí”Œë¦¿ ê¸°ë°˜ ì¶”ìƒí™” ê³„ì¸µì´ë©°, ì˜ˆì™¸, ìì› í•´ì œ, íŠ¸ëœì­ì…˜(ìœ„ ì½”ë“œ) ë“±ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì¤€ë‹¤. ê°œë°œìëŠ” SQL ê³¼ ë§¤í•‘ ë¡œì§ë§Œ ì´í•´í•˜ë©´ ëœë‹¤.</p>

<h4 id="jdbctemplate">JdbcTemplate</h4>

<p>Template Method íŒ¨í„´ìœ¼ë¡œ, â€œë³€í•˜ëŠ” ê²ƒê³¼ ë³€í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë¶„ë¦¬í•˜ë¼â€ ë¥¼ ë”°ë¼ì„œ ë‹¤ìŒìœ¼ë¡œ êµ¬ë¶„ëœë‹¤.</p>

<p><strong>ë³€í•˜ì§€ ì•ŠëŠ” ê²ƒ(Template)</strong></p>
<ul>
  <li>Connection íšë“/ë°˜í™˜</li>
  <li>Statement ìƒì„±/ì‹¤í–‰</li>
  <li>ì˜ˆì™¸ ë³€í™˜</li>
  <li>ë¦¬ì†ŒìŠ¤ ì •ë¦¬</li>
</ul>

<p><strong>ë³€í•˜ëŠ” ê²ƒ(Callback)</strong></p>
<ul>
  <li>SQL ì¿¼ë¦¬</li>
  <li>íŒŒë¼ë¯¸í„° ë°”ì¸ë”©</li>
  <li>ê²°ê³¼ ë§¤í•‘ ë¡œì§</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// JdbcTemplateì˜ ë‚´ë¶€ êµ¬ì¡° (ë‹¨ìˆœí™”)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JdbcTemplate</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="nc">DataSource</span> <span class="n">dataSource</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="no">T</span> <span class="nf">query</span><span class="o">(</span><span class="nc">String</span> <span class="n">sql</span><span class="o">,</span> <span class="nc">RowMapper</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">rowMapper</span><span class="o">,</span> <span class="nc">Object</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Connection</span> <span class="n">conn</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">PreparedStatement</span> <span class="n">pstmt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">// 1. ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„: ë¦¬ì†ŒìŠ¤ íšë“</span>
            <span class="n">conn</span> <span class="o">=</span> <span class="n">dataSource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>
            <span class="n">pstmt</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
            
            <span class="c1">// 2. ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„: íŒŒë¼ë¯¸í„° ë°”ì¸ë”©</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">pstmt</span><span class="o">.</span><span class="na">setObject</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="o">}</span>
            
            <span class="c1">// 3. ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„: ì¿¼ë¦¬ ì‹¤í–‰</span>
            <span class="n">rs</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
            
            <span class="c1">// 4. ë³€í•˜ëŠ” ë¶€ë¶„: ê²°ê³¼ ë§¤í•‘ (Callback!)</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">rowMapper</span><span class="o">.</span><span class="na">mapRow</span><span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
            
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// 5. ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„: ì˜ˆì™¸ ë³€í™˜</span>
            <span class="k">throw</span> <span class="nf">translateException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="c1">// 6. ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„: ë¦¬ì†ŒìŠ¤ ì •ë¦¬</span>
            <span class="n">closeResultSet</span><span class="o">(</span><span class="n">rs</span><span class="o">);</span>
            <span class="n">closeStatement</span><span class="o">(</span><span class="n">pstmt</span><span class="o">);</span>
            <span class="n">closeConnection</span><span class="o">(</span><span class="n">conn</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h5 id="ë‹¨ì¼-query-ì—°ì‚°">ë‹¨ì¼ Query ì—°ì‚°</h5>

<p>JDBC ëŠ” <code class="language-plaintext highlighter-rouge">queryForObject</code> ì„ ì‚¬ìš©í•˜ì—¬ ë”± í•˜ë‚˜ì˜ row ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</p>

<p><strong>ë°©ë²• 1: RowMapper ì§ì ‘ êµ¬í˜„</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nc">User</span> <span class="nf">findById</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"SELECT * FROM users WHERE id = ?"</span><span class="o">;</span>
    
    <span class="k">return</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">queryForObject</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> 
        <span class="o">(</span><span class="n">rs</span><span class="o">,</span> <span class="n">rowNum</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span>
            <span class="n">rs</span><span class="o">.</span><span class="na">getLong</span><span class="o">(</span><span class="s">"id"</span><span class="o">),</span>
            <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"name"</span><span class="o">),</span>
            <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"email"</span><span class="o">),</span>
            <span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"age"</span><span class="o">)</span>
        <span class="o">),</span> 
        <span class="n">id</span>
    <span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">jdbcTemplate</code> ëŠ” í•„ë“œì— ì„ ì–¸ë˜ê³  ì˜ì¡´ì„± ì£¼ì…ì„ ë°›ì•„ ì‚¬ìš©í•œë‹¤. ì´ë•Œ <code class="language-plaintext highlighter-rouge">jdbcTemplate</code> ì˜ <code class="language-plaintext highlighter-rouge">queryForObject</code> ë©”ì„œë“œë¥¼ í†µí•´ sqlê³¼ <code class="language-plaintext highlighter-rouge">RowMapper</code> ê·¸ë¦¬ê³  ê·¸ ì´í›„ë¶€í„°ëŠ” íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì„ ìœ„í•œ í•„ìš”í•œ ë³€ìˆ˜ë“¤ì„ ë‚˜ì—´í•´ì¤€ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">RowMapper</code> ëŠ” <code class="language-plaintext highlighter-rouge">BiFunction</code> ì´ê³ , í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ê°€ ë“¤ì–´ê°€ë©°, <code class="language-plaintext highlighter-rouge">ResultSet</code> ê³¼ ëª‡ ë²ˆì§¸ row ì¸ì§€ë¥¼ ì•Œë ¤ì£¼ê²Œ ëœë‹¤. ì´ë¥¼ í†µí•´ P.S. ê°€ ì™„ì„±ë˜ê³ , ê±°ê¸°ì— binding í•˜ê²Œ ëœë‹¤.</p>

<p><strong>ë°©ë²• 2: BeanPropertyRowMapper (ìë™ ë§¤í•‘)</strong></p>

<p>ê°€ì¥ ê°„ë‹¨í•˜ë©°, ê°€ì ¸ì˜¬ í´ë˜ìŠ¤ ëª…ì„ ì§ì ‘ ë„£ì–´ì£¼ê¸°ë§Œ í•˜ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nc">User</span> <span class="nf">findByIdAuto</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"SELECT * FROM users WHERE id = ?"</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">queryForObject</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> 
        <span class="k">new</span> <span class="nc">BeanPropertyRowMapper</span><span class="o">&lt;&gt;(</span><span class="nc">User</span><span class="o">.</span><span class="na">class</span><span class="o">),</span> 
        <span class="n">id</span>
    <span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<h5 id="ë‹¤ìˆ˜-query-ì—°ì‚°">ë‹¤ìˆ˜ Query ì—°ì‚°</h5>

<p>ì—¬ëŸ¬ ê°œì˜ rows ë¥¼ ë“¤ê³ ì˜¤ëŠ” ì¿¼ë¦¬ë¥¼ ë‚ ë¦´ ë•ŒëŠ” <code class="language-plaintext highlighter-rouge">query</code>, <code class="language-plaintext highlighter-rouge">queryForList</code> ë¥¼ ì‚¬ìš©í•œë‹¤. ëª…ì¹­ì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë¬¸ë²•ì´ë‚˜ ì‚¬ìš©ë²•ì€ ìœ„ì™€ ë™ì¼í•˜ë‹ˆ ê·¸ëƒ¥ ë„˜ì–´ê°„ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByAgeGreaterThan</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"SELECT * FROM users WHERE age &gt; ?"</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">userRowMapper</span><span class="o">,</span> <span class="n">age</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// queryForList ëŠ” List ë¡œ ë°›ì„ ìˆ˜ ìˆëŠ” ë©”ì„œë“œì´ë©° í´ë˜ìŠ¤ ëª…ì„ ëª…ì‹œí•´ì¤˜ì•¼ í•œë‹¤.</span>
<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">findAllEmails</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"SELECT email FROM users"</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">queryForList</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<h5 id="ìˆ˜ì •-ì—°ì‚°insert-delete-update-ë“±ë“±">ìˆ˜ì • ì—°ì‚°(insert, delete, update ë“±ë“±)</h5>

<p>ê°„ë‹¨í•œ <code class="language-plaintext highlighter-rouge">INSERT-INTO-VALUES</code> ë‚˜ <code class="language-plaintext highlighter-rouge">DELETE-FROM-WHERE</code> í˜¹ì€ <code class="language-plaintext highlighter-rouge">UPDATE-SET-WHERE</code> ë“±ì˜ ë‹¨ìˆœí•œ ê²ƒë“¤ì€ ìƒëµí•˜ê² ë‹¤.</p>

<p><strong>ìë™ ìƒì„±ëœ í‚¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•  ë•Œ</strong></p>

<p>ë©”ì„œë“œ ë‚´ì˜ ì¸ì ë°°ì—´ì´ ì¡°ê¸ˆ ë‹¬ë¼ì§€ëŠ”ë°, ì²«ë²ˆì¬ ì¸ìë¡œ <code class="language-plaintext highlighter-rouge">(connection) -&gt; ...</code> ì˜ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ê°€ ë“¤ì–´ê°€ë©° ë°˜í™˜ ê°’ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">Statement</code> ë¥¼ ë‚´ë±‰ëŠ”ë‹¤. ì´ë•Œ í•´ë‹¹ ë°˜í™˜ê°’ì„ ì„¤ì •í•  ë•Œ, <code class="language-plaintext highlighter-rouge">connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)</code> ë¥¼ ì„ ì–¸í•˜ì—¬ ps ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ í•œë‹¤(<code class="language-plaintext highlighter-rouge">executeUpdate()</code> í›„ì— <code class="language-plaintext highlighter-rouge">getGeneratedKeys()</code> ë¡œ ì–»ì„ ìˆ˜ ìˆìŒ). ê·¸ ë‹¤ìŒìœ¼ë¡œ ë¯¸ë¦¬ ì„ ì–¸í•´ë†“ì€ KeyHolder(í‚¤ ë³´ìœ ì) ë¥¼ ì„ ì–¸í•˜ì—¬ ìƒì„±ëœ í‚¤ë¥¼ ë³´ê´€í•  ìˆ˜ ìˆë„ë¡ ë°”êµ¬ë‹ˆë¥¼ 3ë²ˆì§¸ ì¸ìì— ê±´ë‚´ì£¼ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// ìë™ ìƒì„±ëœ í‚¤ ë°˜í™˜</span>
<span class="kd">public</span> <span class="kt">long</span> <span class="nf">insertAndGetId</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"INSERT INTO users (name, email, age) VALUES (?, ?, ?)"</span><span class="o">;</span>
    
    <span class="nc">KeyHolder</span> <span class="n">keyHolder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GeneratedKeyHolder</span><span class="o">();</span>
    
    <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">connection</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> 
            <span class="nc">Statement</span><span class="o">.</span><span class="na">RETURN_GENERATED_KEYS</span><span class="o">);</span>
        <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
        <span class="n">ps</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">ps</span><span class="o">;</span>
    <span class="o">},</span> <span class="n">keyHolder</span><span class="o">);</span>
    
    <span class="k">return</span> <span class="n">keyHolder</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">longValue</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<p>ê°€ì ¸ì˜¬ ë•ŒëŠ” ìœ„ì™€ ê°™ì´ ê°€ì ¸ì˜¤ë©´ ëœë‹¤.</p>

<p><strong>ë°°ì¹˜ ì‚½ì…</strong></p>

<p><code class="language-plaintext highlighter-rouge">BatchPreparedStatementSetter</code> ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•˜ì—¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ë©”ì„œë“œë¥¼ ì •ì˜ì‹œì¼œì£¼ë©´ ëœë‹¤. ì´ë•Œ <code class="language-plaintext highlighter-rouge">setValues()</code> ëŠ” i ë²ˆì§¸ì— í•´ë‹¹í•˜ëŠ” ìœ ì € ê°’ì„ ps ì— ë„˜ê²¨ì£¼ê¸°ë§Œ í•˜ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// ë°°ì¹˜ ì‚½ì… (ëŒ€ëŸ‰ ë°ì´í„°)</span>
<span class="kd">public</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">batchInsert</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">users</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"INSERT INTO users (name, email, age) VALUES (?, ?, ?)"</span><span class="o">;</span>
    
    <span class="k">return</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">batchUpdate</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="k">new</span> <span class="nc">BatchPreparedStatementSetter</span><span class="o">()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setValues</span><span class="o">(</span><span class="nc">PreparedStatement</span> <span class="n">ps</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
            <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>
        <span class="o">}</span>
        
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getBatchSize</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">users</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span></code></pre></figure>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">jdbcTemplate.batchUpdate(sql, users, 1000, Mapper)</code> ë¡œ ì¨ë„ ëœë‹¤.</p>
</blockquote>

<h5 id="namedparameterjdbctemplate">NamedParameterJdbcTemplate</h5>

<p>ìˆœì„œ ê¸°ë°˜ íŒŒë¼ë¯¸í„°ì˜ ë¬¸ì œì :</p>
<ul>
  <li>íŒŒë¼ë¯¸í„° ìˆœì„œ ì‹¤ìˆ˜ ê°€ëŠ¥</li>
  <li>ê°€ë…ì„± ì €í•˜</li>
  <li>ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€</li>
</ul>

<p>ì´ë¥¼ ìœ„í•´ ì´ë¦„ ê¸°ë°˜ì˜ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì„ í•˜ëŠ” í…œí”Œë¦¿ ë“±ì¥</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserRepository</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">NamedParameterJdbcTemplate</span> <span class="n">namedJdbcTemplate</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="nf">UserRepository</span><span class="o">(</span><span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">namedJdbcTemplate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NamedParameterJdbcTemplate</span><span class="o">(</span>
            <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">getDataSource</span><span class="o">()</span>
        <span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">// Map ì‚¬ìš©</span>
    <span class="kd">public</span> <span class="nc">User</span> <span class="nf">findById</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"SELECT * FROM users WHERE id = :id"</span><span class="o">;</span>
        
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"id"</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
        
        <span class="k">return</span> <span class="n">namedJdbcTemplate</span><span class="o">.</span><span class="na">queryForObject</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">params</span><span class="o">,</span> <span class="n">userRowMapper</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">// SqlParameterSource ì‚¬ìš© (ë” íƒ€ì… ì•ˆì „)</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">insert</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"""
            INSERT INTO users (name, email, age) 
            VALUES (:name, :email, :age)
        """</span><span class="o">;</span>
        
        <span class="nc">SqlParameterSource</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MapSqlParameterSource</span><span class="o">()</span>
            <span class="o">.</span><span class="na">addValue</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">())</span>
            <span class="o">.</span><span class="na">addValue</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())</span>
            <span class="o">.</span><span class="na">addValue</span><span class="o">(</span><span class="s">"age"</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>
        
        <span class="k">return</span> <span class="n">namedJdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">params</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">// BeanPropertySqlParameterSource (ê°ì²´ ìë™ ë§¤í•‘)</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">insertAuto</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"""
            INSERT INTO users (name, email, age) 
            VALUES (:name, :email, :age)
        """</span><span class="o">;</span>
        
        <span class="nc">SqlParameterSource</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BeanPropertySqlParameterSource</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">namedJdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">params</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ëŒ€ì¶© ë³´ë©´ ì•Œê² ì§€ë§Œ, <code class="language-plaintext highlighter-rouge">:(parameterëª…)</code> ì„ ê¸°ì¤€ìœ¼ë¡œ parameter binding ì´ ì¼ì–´ë‚˜ê²Œ ë˜ê³ , <code class="language-plaintext highlighter-rouge">SqlParameterSource</code> ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì ë‹¹í•œ êµ¬í˜„ì²´ë¥¼ ì„ ì–¸í•˜ì—¬ ì¿¼ë¦¬ í˜¹ì€ ìˆ˜ì • ì‹¤í–‰ ë©”ì„œë“œì— ì¸ìë¡œ ê°™ì´ ë„£ê³  ìˆìŒì„ ë³¼ ìˆ˜ ìˆë‹¤. ë„£ì„ ìˆ˜ ìˆëŠ” ê²ƒë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Map&lt;String, Object&gt;</code></li>
  <li><code class="language-plaintext highlighter-rouge">MapSqlParameterSource</code>: method chaining ê°€ëŠ¥</li>
  <li><code class="language-plaintext highlighter-rouge">BeanPropertySqlParameterSource</code>: ìë™ ë§¤í•‘ì„ ì‹œì¼œì¤Œ</li>
</ul>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// IN ì ˆ ì²˜ë¦¬ (ì—¬ëŸ¬ ê°’)</span>
<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByIds</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Long</span><span class="o">&gt;</span> <span class="n">ids</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"SELECT * FROM users WHERE id IN (:ids)"</span><span class="o">;</span>
    
    <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="nc">Map</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"ids"</span><span class="o">,</span> <span class="n">ids</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">namedJdbcTemplate</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">params</span><span class="o">,</span> <span class="n">userRowMapper</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<h5 id="dataaccessexception-ê³„ì¸µ">DataAccessException ê³„ì¸µ</h5>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">DataAccessException</span> <span class="o">(</span><span class="n">unchecked</span><span class="o">)</span>
<span class="err">â”œâ”€â”€</span> <span class="nc">DataIntegrityViolationException</span>
<span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="nc">DuplicateKeyException</span>
<span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="nc">ConstraintViolationException</span>
<span class="err">â”œâ”€â”€</span> <span class="nc">DataRetrievalFailureException</span>
<span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="nc">EmptyResultDataAccessException</span>
<span class="err">â”œâ”€â”€</span> <span class="nc">DeadlockLoserDataAccessException</span>
<span class="err">â””â”€â”€</span> <span class="nc">TransientDataAccessResourceException</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">Unchecked</code> ì¸ ì´ìœ ëŠ” <code class="language-plaintext highlighter-rouge">SQLException</code> ì˜ ëŒ€ë¶€ë¶„ì€ ë³µêµ¬ê°€ ë¶ˆê°€ëŠ¥í•˜ë©°, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œì˜ ì˜ˆì™¸ ì²˜ë¦¬ ê°•ì œëŠ” ë¶€ì ì ˆí•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ ì´ë¥¼ null ì´ë‚˜ Optional ë¡œ ì ì ˆíˆ í˜ë ¤ë³´ë‚´ì–´ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.</p>

<h4 id="simplejdbcinsert">SimpleJdbcInsert</h4>

<p>ë°ì´í„°ë² ì´ìŠ¤ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ë˜‘ë˜‘í•œ ì‚½ì…ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserRepository</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">SimpleJdbcInsert</span> <span class="n">simpleJdbcInsert</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="nf">UserRepository</span><span class="o">(</span><span class="nc">DataSource</span> <span class="n">dataSource</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">simpleJdbcInsert</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleJdbcInsert</span><span class="o">(</span><span class="n">dataSource</span><span class="o">)</span>
            <span class="o">.</span><span class="na">withTableName</span><span class="o">(</span><span class="s">"users"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">usingGeneratedKeyColumns</span><span class="o">(</span><span class="s">"id"</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">insert</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">parameters</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
        <span class="n">parameters</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">parameters</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
        <span class="n">parameters</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"age"</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getAge</span><span class="o">());</span>
        
        <span class="c1">// INSERT ë¬¸ì„ ìë™ ìƒì„±!</span>
        <span class="nc">Number</span> <span class="n">newId</span> <span class="o">=</span> <span class="n">simpleJdbcInsert</span><span class="o">.</span><span class="na">executeAndReturnKey</span><span class="o">(</span><span class="n">parameters</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">newId</span><span class="o">.</span><span class="na">longValue</span><span class="o">();</span>
    <span class="o">}</span>
    
    <span class="c1">// BeanPropertySqlParameterSource ì‚¬ìš©</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">insertAuto</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SqlParameterSource</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BeanPropertySqlParameterSource</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">simpleJdbcInsert</span><span class="o">.</span><span class="na">executeAndReturnKey</span><span class="o">(</span><span class="n">params</span><span class="o">).</span><span class="na">longValue</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h3 id="spring-data-jdbc--r2dbc">Spring Data JDBC &amp; R2DBC</h3>

<p>Spring Data JDBC ëŠ” ì–´ë– í•œ êµ¬í˜„ì²´ë„ ì—†ì´ ê·¸ì € í•¨ìˆ˜ëª… ë§Œìœ¼ë¡œ í•¨ìˆ˜ ë‚´ë¶€ì˜ ë¡œì§ì„ ì•Œì•„ì„œ ì „ë¶€ ì§œì£¼ëŠ” ê²½ì§€ê¹Œì§€ ì´ë¥´ì§€ë§Œ, ë³µì¡í•œ ì¿¼ë¦¬ë‚˜ ìµœì í™”ê°€ í•„ìš”í•œ ì¿¼ë¦¬ë§Œ ì¼ë¶€ ì§œì•¼ í•œë‹¤.</p>

<p>ìš°ì„  ê·¸ëŸ¬ë ¤ë©´ Spring Data JDBC ì—ì„œ ì œê³µí•´ì£¼ëŠ” <code class="language-plaintext highlighter-rouge">Repository</code> ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¨¼ì € ì•Œì•„ì•¼ í•œë‹¤.</p>

<p><a href="https://docs.spring.io/spring-data/relational/reference/">Spring Data JDBC ê³µì‹ ë¬¸ì„œ</a></p>

<h4 id="repository-ì¸í„°í˜ì´ìŠ¤">Repository ì¸í„°í˜ì´ìŠ¤</h4>

<p>Spring ë°ì´í„° ì €ì¥ì†Œ ì¶”ìƒí™”ì˜ ì¤‘ì‹¬ì€ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ë§¤ê°œë³€ìˆ˜í™” íƒ€ì…ìœ¼ë¡œ ê´€ë¦¬í•  ë„ë©”ì¸ í´ë˜ìŠ¤ <code class="language-plaintext highlighter-rouge">T</code> ì™€ ë„ë©”ì¸ í´ë˜ìŠ¤ì˜ ì‹ë³„ì ìœ í˜•(PK ìœ í˜•) <code class="language-plaintext highlighter-rouge">ID</code> ë¥¼ ì¸ìˆ˜ë¡œ ë°›ê³ , <code class="language-plaintext highlighter-rouge">Repository</code> ëŠ” ì´ ì‘ì—…í•  ìœ í˜•ì„ ìº¡ì²˜í•˜ê³  ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì°¾ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” <strong>ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ ì—­í• </strong>ì„ í•˜ê²Œ ëœë‹¤.</p>

<blockquote>
  <p>Spring Data ì—ì„œëŠ” <strong>ë„ë©”ì¸ ìœ í˜•</strong>, ì¦‰ T ë¥¼ <strong>ì—”í‹°í‹°</strong> ë¡œ ê°„ì£¼í•˜ë©°, ë°ì´í„°ì˜ ë‹¨ìœ„ë¡œ ê°„ì£¼í•œë‹¤. ë”°ë¼ì„œ ì „ì²´ì—ì„œ <strong>ì—”í‹°í‹°</strong>ë¼ëŠ” ìš©ì–´ê°€ <strong>ë„ë©”ì¸ ìœ í˜•</strong> ë˜ëŠ” <strong>ì§‘ê³„</strong> ë¼ëŠ” ìš©ì–´ì™€ í˜¼ìš©ë˜ì–´ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.</p>
</blockquote>

<h5 id="crudrepository-ì¸í„°í˜ì´ìŠ¤">CrudRepository ì¸í„°í˜ì´ìŠ¤</h5>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Repository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="o">&lt;</span><span class="no">S</span> <span class="kd">extends</span> <span class="no">T</span><span class="o">&gt;</span> <span class="no">S</span> <span class="nf">save</span><span class="o">(</span><span class="no">S</span> <span class="n">entity</span><span class="o">);</span>
  <span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findById</span><span class="o">(</span><span class="no">ID</span> <span class="n">primaryKey</span><span class="o">);</span>
  <span class="nc">Iterable</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>
  <span class="kt">long</span> <span class="nf">count</span><span class="o">();</span>
  <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="no">T</span> <span class="n">entity</span><span class="o">);</span>
  <span class="kt">boolean</span> <span class="nf">existsById</span><span class="o">(</span><span class="no">ID</span> <span class="n">primaryKey</span><span class="o">);</span>
  <span class="c1">// â€¦ more functionality omitted.</span>
<span class="o">}</span></code></pre></figure>

<p>ëª¨ë¥¼ ë• ì½”ë“œ ë‚´ë¶€ë¥¼ ëœ¯ì–´ë³´ë©´ ë˜ë‹ˆ ê·¸ëƒ¥ ì™¸ìš°ì§€ ë§ì. <code class="language-plaintext highlighter-rouge">CrudRepository</code> ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë“¤ì„ ì œê³µí•œë‹¤. ê°ê°ì€ í•¨ìˆ˜ëª…ì²˜ëŸ¼ ì§ê´€ì ì´ê²Œ ë™ì‘í•˜ë©°, ì´ ì¸í„°í˜ì´ìŠ¤ì— ì„ ì–¸ëœ ë©”ì„œë“œëŠ” ì¼ë°˜ì ìœ¼ë¡œ CRUD ì—°ì‚°ì„ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê²Œ ëœë‹¤.</p>

<blockquote>
  <p>ë‚˜ì¤‘ì— ë©”ì„œë“œ ëª…ì— ë”°ë¼ ë‹¤ë¥¸ ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ í•  ìˆ˜ ìˆëŠ”ë°, ì´ëŠ” ì¿¼ë¦¬ ë©”ì„œë“œ ì •ì˜ì—ì„œ ë³´ë©°, ì´ ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œ <code class="language-plaintext highlighter-rouge">JpaRepository</code> ë˜í•œ ì´ì™€ ê°™ì€ ê²ƒì„ ì œê³µí•˜ë©° <code class="language-plaintext highlighter-rouge">MongoRepository</code> ë„ ë§ˆì°¬ê°€ì§€ì´ë‹¤.</p>
</blockquote>

<h5 id="pagingandsortingrepository-ì¸í„°í˜ì´ìŠ¤">PagingAndSortingRepository ì¸í„°í˜ì´ìŠ¤</h5>

<p>ìš°ë¦¬ê°€ ì–´ë–¤ ì‚¬ì´íŠ¸ì˜ ê²€ìƒ‰ì„ í†µí•´ ë‹¤ì–‘í•œ ê²ƒì„ ê²€ìƒ‰í•  ë•Œ, ê²€ìƒ‰ ëŒ€ìƒì˜ íŠ¹ì„±ì— ë”°ë¼ ë‚´ë¦¼ì°¨ìˆœ ì˜¤ë¦„ì°¨ìˆœ ì •ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆëŠ”ë°, ì´ê²ƒì´ <code class="language-plaintext highlighter-rouge">PagingAndSortingRepository</code> ì˜ ê¸°ëŠ¥ì´ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">PagingAndSortingRepository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span>  <span class="o">{</span>

  <span class="nc">Iterable</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">(</span><span class="nc">Sort</span> <span class="n">sort</span><span class="o">);</span>

  <span class="nc">Page</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>ì—¬ê¸°ëŠ” Crud ê°€ ì—†ê¸°ì— ê°™ì´ extends ë¥¼ í•´ì£¼ì–´ì„œ ì‚¬ìš©í•´ì•¼í•œë‹¤. ì¦‰, ë‘ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°™ì´ ì‚¬ìš©í•˜ë©´ ëœë‹¤.</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">List</code> ë°˜í™˜ ë³´ë‹¤ëŠ” <code class="language-plaintext highlighter-rouge">Iterable</code> ë°˜í™˜</p>
</blockquote>

<p><strong>Pageable</strong></p>

<p>í˜ì´ì§• ê¸°ëŠ¥ì„ êµ¬í˜„í•  ë•Œ í•µì‹¬ì´ ë˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì¸ë° í˜ì´ì§€ ë‹¨ìœ„ë¥¼ ë“¤ê³ ì˜¬ ë•Œ <code class="language-plaintext highlighter-rouge">Pageable</code> ì„ êµ¬í˜„í•œ ê°ì²´ë¥¼ í†µí•´ <code class="language-plaintext highlighter-rouge">Page</code> ë¥¼ ê°€ì ¸ì˜¤ê²Œ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Pageable</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">getPageNumber</span><span class="o">();</span>  <span class="c1">// í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ (0ë¶€í„° ì‹œì‘)</span>
    <span class="kt">int</span> <span class="nf">getPageSize</span><span class="o">();</span>    <span class="c1">// í•œ í˜ì´ì§€ë‹¹ ë³´ì—¬ì¤„ ë°ì´í„° ê°œìˆ˜</span>
    <span class="kt">long</span> <span class="nf">getOffset</span><span class="o">();</span>     <span class="c1">// ëª‡ ë²ˆì§¸ ë°ì´í„°ë¶€í„° ì‹œì‘í• ì§€ (pageNumber * pageSize)</span>
    <span class="nc">Sort</span> <span class="nf">getSort</span><span class="o">();</span>       <span class="c1">// ì •ë ¬ ê¸°ì¤€ (Sort ê°ì²´)</span>
    <span class="nc">Pageable</span> <span class="nf">next</span><span class="o">();</span>      <span class="c1">// ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™</span>
    <span class="nc">Pageable</span> <span class="nf">previousOrFirst</span><span class="o">();</span> <span class="c1">// ì´ì „ í˜ì´ì§€ ë˜ëŠ” ì²« í˜ì´ì§€ë¡œ ì´ë™</span>
    <span class="nc">Pageable</span> <span class="nf">first</span><span class="o">();</span>     <span class="c1">// ì²« í˜ì´ì§€ë¡œ ì´ë™</span>
    <span class="kt">boolean</span> <span class="nf">hasPrevious</span><span class="o">();</span> <span class="c1">// ì´ì „ í˜ì´ì§€ê°€ ìˆëŠ”ì§€ ì—¬ë¶€</span>
<span class="o">}</span></code></pre></figure>

<p>ì£¼ìš” ë©”ì„œë“œëŠ” ìœ„ì™€ ê°™ì€ë°, ì´ë¥¼ ë‹¤ êµ¬í˜„í•˜ê¸°ëŠ” ë¹¡ì„ê³ , <code class="language-plaintext highlighter-rouge">PageRequest.of</code> ë¥¼ í†µí•´ <code class="language-plaintext highlighter-rouge">Pageable</code> ì„ ê°„ë‹¨íˆ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Pageable</span> <span class="n">pageable</span> <span class="o">=</span> <span class="nc">PageRequest</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span> <span class="c1">// 0ë²ˆ í˜ì´ì§€, í˜ì´ì§€ë‹¹ 10ê°œ</span>
<span class="nc">Pageable</span> <span class="n">pageable</span> <span class="o">=</span> <span class="nc">PageRequest</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="nc">Sort</span><span class="o">.</span><span class="na">by</span><span class="o">(</span><span class="s">"name"</span><span class="o">).</span><span class="na">ascending</span><span class="o">());</span></code></pre></figure>

<p>ì´ë•Œ Spring MVC ì™€ í•¨ê»˜ ì“´ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ê°„ë‹¨íˆ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/users"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">getUsers</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">pageable</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// GET /users?page=0&amp;size=5&amp;sort=name,desc</span></code></pre></figure>

<p><strong>Page</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Page</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">page</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">pageable</span><span class="o">);</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="na">getContent</span><span class="o">();</span>     <span class="c1">// í˜„ì¬ í˜ì´ì§€ ë°ì´í„°</span>
<span class="kt">int</span> <span class="n">pageNumber</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="na">getNumber</span><span class="o">();</span>        <span class="c1">// í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸</span>
<span class="kt">int</span> <span class="n">totalPages</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="na">getTotalPages</span><span class="o">();</span>    <span class="c1">// ì „ì²´ í˜ì´ì§€ ìˆ˜</span>
<span class="kt">long</span> <span class="n">totalElements</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="na">getTotalElements</span><span class="o">();</span> <span class="c1">// ì „ì²´ ë°ì´í„° ê°œìˆ˜</span>
<span class="kt">boolean</span> <span class="n">hasNext</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="na">hasNext</span><span class="o">();</span>         <span class="c1">// ë‹¤ìŒ í˜ì´ì§€ ì¡´ì¬ ì—¬ë¶€</span></code></pre></figure>

<p>Page ëŠ” totalElements ë¥¼ ê³„ì‚°í•˜ê¸° ë•Œë¬¸ì— ì¡°ê¸ˆ ë¬´ê²ë‹¤. ëŒ€ì‹  Slice ë¥¼ ì‚¬ìš©í•˜ë©´ ì´ë¥¼ ê³„ì‚°í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.</p>

<h5 id="slice">Slice</h5>

<p>ì „ì²´ ë°ì´í„° ê°œìˆ˜(total count)ë¥¼ ê³„ì‚°í•˜ì§€ ì•Šê³ , ë‹¤ìŒ í˜ì´ì§€ê°€ ìˆëŠ”ì§€ë§Œ ì•Œë ¤ì£¼ëŠ” ë°©ì‹ì´ë‹¤.</p>

<p><strong>Page ë™ì‘</strong></p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">users</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">id</span> <span class="k">LIMIT</span> <span class="mi">10</span> <span class="k">OFFSET</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">users</span><span class="p">;</span></code></pre></figure>

<p><strong>Slice ë™ì‘</strong></p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">users</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">id</span> <span class="k">LIMIT</span> <span class="mi">11</span> <span class="k">OFFSET</span> <span class="mi">0</span><span class="p">;</span></code></pre></figure>

<p>ë‚˜ë¨¸ì§€ëŠ” ë‹¤ ê°™ê³  ê·¸ëƒ¥ ë°˜í™˜ê°’ë§Œ Slice ë¡œ í•´ì£¼ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserRepository</span> <span class="kd">extends</span> <span class="nc">PagingAndSortingRepository</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nc">Slice</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByAgeGreaterThan</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<h4 id="ï¸-new-entity-detection">â­ï¸ New Entity Detection</h4>

<p>ê¸°ë³¸ì ìœ¼ë¡œ Spring Data ì˜ ì—”í‹°í‹°ê°€ ìƒˆë¡œìš´ì§€ ì•ˆìƒˆë¡œìš´ì§€ì˜ íŒë‹¨í•´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ <code class="language-plaintext highlighter-rouge">save()</code> ë©”ì„œë“œëŠ” C ê¸°ëŠ¥ê³¼ U ê¸°ëŠ¥ì„ í•¨ê»˜ í•˜ëŠ” ë©”ì„œë“œì´ë‹¤(ë§Œì•½ ìƒˆë¡œìš´ ì—”í‹°í‹°ë¼ë©´ Create ê¸°ëŠ¥ìœ¼ë¡œ, ìƒˆë¡œìš´ ì—”í‹°í‹°ê°€ ì•„ë‹ˆë¼ë©´ Update ê¸°ëŠ¥ìœ¼ë¡œ ì‹¤í–‰ë¨).</p>

<p>ê·œì¹™ì€ ìœ„ë¶€í„° ì•„ë˜ë¡œ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§„ë‹¤.</p>

<p><strong>ê·œì¹™</strong></p>
<ol>
  <li><code class="language-plaintext highlighter-rouge">@Id</code> ì• ë„ˆí…Œì´ì…˜(í”„ë¡œí¼í‹°)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">INSERT</code>: null í˜¹ì€ ì›ì‹œ íƒ€ì…ì—ì„œ default value ì¸ ê²½ìš° = ì‹ ê·œ</li>
      <li><code class="language-plaintext highlighter-rouge">UPDATE</code>: ê·¸ ì™¸</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">@Version</code> ì• ë„ˆí…Œì´ì…˜(í”„ë¡œí¼í‹°) ì´ ìˆë‹¤ë©´ ë‹¤ìŒ ê¸°ì¤€ìœ¼ë¡œ ì‹ ê·œ ì—¬ë¶€ íŒë‹¨
    <ul>
      <li><code class="language-plaintext highlighter-rouge">INSERT</code>: null ë˜ëŠ” ì›ì‹œí˜• = ì‹ ê·œ</li>
      <li><code class="language-plaintext highlighter-rouge">UPDATE</code>: ê°’ì´ ì¡´ì¬í•˜ê³  0ì´ ì•„ë‹˜</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">org.springframework.data.domain.Persistable</code> ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ ì‹œ
    <ul>
      <li>Spring Data ëŠ” ì—”í‹°í‹° ë‚´ë¶€ì˜ <code class="language-plaintext highlighter-rouge">isNew()</code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì‹ ê·œ ì—¬ë¶€ë¥¼ íŒë‹¨í•œë‹¤.</li>
    </ul>
  </li>
</ol>

<blockquote>
  <p>TIP. <code class="language-plaintext highlighter-rouge">AccessType.PROPERTY</code> ë¥¼ ì‚¬ìš©í•˜ë©´ <code class="language-plaintext highlighter-rouge">Persistable</code> ì†ì„±ì´ ê°ì§€ë˜ì–´ ìœ ì§€ë©ë‹ˆë‹¤. ì´ë¥¼ ë°©ì§€í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">@Transient</code> ë¥¼ ì‚¬ìš©</p>
</blockquote>

<h4 id="norepositorybean-ë¥¼-ì •ì˜í•˜ì—¬-ìì£¼-ì‚¬ìš©í•˜ëŠ”-ë©”ì„œë“œë“¤-ì •ì˜">@NoRepositoryBean ë¥¼ ì •ì˜í•˜ì—¬ ìì£¼ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë“¤ ì •ì˜</h4>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@NoRepositoryBean</span>
<span class="kd">interface</span> <span class="nc">MyBaseRepository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Repository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">// ëª¨ë“  Repository ê°€ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•  ë©”ì„œë“œ</span>
    <span class="k">default</span> <span class="kt">void</span> <span class="nf">printEntityInfo</span><span class="o">(</span><span class="no">T</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Entity info: "</span> <span class="o">+</span> <span class="n">entity</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="c1">// ê³µí†µì ì¸ find ë©”ì„œë“œ ê·œì•½ ì •ì˜</span>
    <span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findByName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">UserRepository</span> <span class="kd">extends</span> <span class="nc">MyBaseRepository</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span> <span class="err">â€¦</span> <span class="o">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">NoRepositoryBean</code> ì€ <code class="language-plaintext highlighter-rouge">Bean</code> ìœ¼ë¡œ ë“±ë¡ë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ì• ë„ˆí…Œì´ì…˜ì´ë‹¤. ì´ë¥¼ í†µí•´ <code class="language-plaintext highlighter-rouge">MyBaseRepository</code> ëŠ” Bean ìœ¼ë¡œ ë“±ë¡ë˜ì§€ ì•Šê³ , ì´ë¥¼ ìƒì†í•œ í•˜ìœ„ ì¸í„°í˜ì´ìŠ¤ë“¤ë§Œ ì‹¤ì œ Bean ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ì‚¬ìš©ëœë‹¤.</p>

<p>ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ìœ ìš©í•œ ì´ìœ ëŠ” ê³µí†µ ë¡œì§ì´ë‚˜ ê·œì•½ì„ ë¬¶ì–´ë‘ëŠ” ë² ì´ìŠ¤ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì •ì˜í•  ë•Œ, Spring Data ê°€ ì´ë¥¼ ì‹¤ìˆ˜ë¡œ ì‹¤ì œ êµ¬í˜„ ëŒ€ìƒìœ¼ë¡œ ê°ì§€í•˜ì§€ ì•Šê²Œ ë§Œë“¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.</p>

<h4 id="ì €ì¥ì†Œ-í™œì„±í™”-êµ¬ì„±-ì •ì˜í•˜ê¸°">ì €ì¥ì†Œ í™œì„±í™” êµ¬ì„± ì •ì˜í•˜ê¸°</h4>

<p><code class="language-plaintext highlighter-rouge">ComponentScan</code> ì²˜ëŸ¼ <code class="language-plaintext highlighter-rouge">EnableJpaRepositories</code> ë‚˜ <code class="language-plaintext highlighter-rouge">EnableJdbcRepositories</code> ë¥¼ í†µí•´ Jdbc ë ˆí¬ì§€í† ë¦¬ì˜ ë²”ìœ„ë¥¼ ì§€ì •í•  ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Configuration</span>
<span class="nd">@EnableJpaRepositories</span><span class="o">(</span><span class="s">"com.acme.repositories"</span><span class="o">)</span>
<span class="kd">class</span> <span class="nc">ApplicationConfiguration</span> <span class="o">{</span>

  <span class="nd">@Bean</span>
  <span class="nc">EntityManagerFactory</span> <span class="nf">entityManagerFactory</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// â€¦</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableJdbcRepositories</span><span class="o">(</span><span class="s">"${app.scan.packages}"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ApplicationConfiguration</span> <span class="o">{</span>
  <span class="c1">// â€¦</span>
<span class="o">}</span></code></pre></figure>

<p>í•„í„° ì‚¬ìš©ì€ <code class="language-plaintext highlighter-rouge">ComponentScan</code> ê³¼ ë™ì¼í•˜ë‹¤.</p>

<h4 id="ï¸-query-method">â­ï¸ Query Method</h4>

<p><code class="language-plaintext highlighter-rouge">Repository Proxy</code> ëŠ” ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ìŠ¤í† ë¦¬ì§€ ë³„ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²• 2ê°€ì§€ë¥¼ ì œê³µí•˜ê²Œ ëœë‹¤.</p>

<ol>
  <li>ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œë¶€í„° ì§ì ‘ ì¿¼ë¦¬ë¥¼ ìœ ë„í•¨</li>
  <li>ìˆ˜ë™ìœ¼ë¡œ ì •ì˜ëœ <code class="language-plaintext highlighter-rouge">@Query</code> ë¥¼ ì‚¬ìš©í•¨</li>
</ol>

<p>ì´ë ‡ê²Œ ì •ì˜ëœ ì‚¬ìš© ê°€ëŠ¥í•œ ì¸í„°í˜ì´ìŠ¤ ë©”ì„œë“œë“¤ì€ ì‹¤ì œ ë°ì´í„° ìŠ¤í† ì–´ì— ë”°ë¼ ë‚´ë¶€ì ì¸ ì¿¼ë¦¬ êµ¬ì¡°ê°€ ë‹¬ë¼ì§€ì§€ë§Œ, ì´ ì¿¼ë¦¬ êµ¬ì¡°ë“¤ ì¤‘ì— ë°˜ë“œì‹œ <strong>ì–´ë–¤ ì¿¼ë¦¬ê°€ ì‹¤í–‰ë ì§€ë¥¼ ê²°ì •í•˜ëŠ” ì „ëµì´ ì¡´ì¬</strong>í•´ì•¼ë§Œ í•œë‹¤. ì´ë¥¼ <code class="language-plaintext highlighter-rouge">Query Lookup Strategies</code> ë¼ê³  í•œë‹¤.</p>

<h5 id="query-lookup-strategies">Query Lookup Strategies</h5>

<p>ë ˆí¬ì§€í† ë¦¬ í”„ë¡ì‹œê°€ ì¿¼ë¦¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì „ëµì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<ul>
  <li>XML ì„¤ì •ì—ì„œëŠ” query-lookup-strategy ì†ì„±ì„ í†µí•´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìˆ˜ì¤€ì—ì„œ ì „ëµì„ ì§€ì •</li>
  <li>Java ì„¤ì •ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">@EnableJdbcRepositories</code> ì• ë„ˆí…Œì´ì…˜ì˜ <code class="language-plaintext highlighter-rouge">queryLookupStrategy</code> ì†ì„±ì„ ì‚¬ìš© ê°€ëŠ¥</li>
</ul>

<p>ìš°ë¦¬ëŠ” ë‘ë²ˆì§¸ë¥¼ ì£¼ë¡œ ì´ìš©í•˜ê²Œ ëœë‹¤.</p>

<blockquote>
  <p>ì¼ë¶€ ì „ëµì€ íŠ¹ì • ë°ì´í„° ìŠ¤í† ì–´ì—ì„œëŠ” ì§€ì›ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ</p>
</blockquote>

<p><strong>ì „ëµ ì¢…ë¥˜</strong></p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">CREATE</code>
    <ul>
      <li>ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œë¶€í„° ìŠ¤í† ì–´ë³„ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ë ¤ê³  ì‹œë„í•œë‹¤.</li>
      <li>ì¼ë°˜ì ì¸ ì ‘ê·¼ ë°©ì‹ì€ ë©”ì„œë“œ ì´ë¦„ì—ì„œ ì˜ ì•Œë ¤ì§„ prefix ë¥¼ ì œê±°í•˜ê³  ë‚˜ë¨¸ì§€ ì´ë¦„ì„ íŒŒì‹±í•˜ì—¬ ì¿¼ë¦¬ë¥¼ êµ¬ì„±</li>
      <li>prefix ë¼ê³  í•¨ì€ <code class="language-plaintext highlighter-rouge">find</code>, <code class="language-plaintext highlighter-rouge">get</code>, <code class="language-plaintext highlighter-rouge">update</code> ë“±ë“± ì§€ì •ëœ ë‹¨ì–´ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒ</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">USE_DECLARED_QUERY</code>
    <ul>
      <li>ì´ë¯¸ ì„ ì–¸ëœ ì¿¼ë¦¬ë¥¼ ì°¾ìœ¼ë ¤ê³  ì‹œë„í•˜ë©°, ì„ ì–¸ëœ ì¿¼ë¦¬ë¥¼ ì°¾ì§€ ëª»í•˜ë©´ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚´</li>
      <li>ì¿¼ë¦¬ëŠ” ì–´ë…¸í…Œì´ì…˜(<code class="language-plaintext highlighter-rouge">@Query</code>)ì´ë‚˜ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ë¯¸ë¦¬ ì •ì˜ë  ìˆ˜ ìˆìŒ</li>
      <li>íŠ¹ì • ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì˜µì…˜ì€ í•´ë‹¹ ìŠ¤í† ë¦¬ì§€ ë¬¸ì„œë¥¼ ì°¸ê³ </li>
      <li>ë¦¬í¬ì§€í† ë¦¬ ì¸í”„ë¼ê°€ ë¶€íŠ¸ìŠ¤íŠ¸ë© ì‹œì ì— ë©”ì„œë“œì— ëŒ€í•œ ì„ ì–¸ëœ ì¿¼ë¦¬ë¥¼ ì°¾ì§€ ëª»í•˜ë©´ ì‹¤íŒ¨</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">CREATE_IF_NOT_FOUND</code>(ê¸°ë³¸ê°’)
    <ul>
      <li><code class="language-plaintext highlighter-rouge">CREATE</code> ì™€ <code class="language-plaintext highlighter-rouge">USE_DECLARED_QUERY</code> ë¥¼ ê²°í•©í•œ ì „ëµì´ë©°</li>
      <li>ë¨¼ì € ì„ ì–¸ëœ ì¿¼ë¦¬ë¥¼ ì°¾ê³ , ì—†ìœ¼ë©´ ë©”ì„œë“œ ì´ë¦„ ê¸°ë°˜ ì»¤ìŠ¤í…€ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ê²Œ ëœë‹¤.</li>
      <li>ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ ì „ëµìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.</li>
      <li>ë©”ì„œë“œ ì´ë¦„ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì¿¼ë¦¬ë¥¼ ì •ì˜í•  ìˆ˜ ìˆìœ¼ë©°, í•„ìš”ì— ë”°ë¼ ì„ ì–¸ëœ ì¿¼ë¦¬ë¥¼ ì¶”ê°€í•´ ì„¸ë°€í•˜ê²Œ ì¡°ì • ê°€ëŠ¥í•˜ë‹¤.</li>
    </ul>
  </li>
</ol>

<h5 id="query-creation">Query Creation</h5>

<p>ì¿¼ë¦¬ë¥¼ ì´ì œ ìƒì„±í•˜ëŠ” ê·œì¹™ì„ ë³´ì. í¬ê²Œ ì¿¼ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ë‰˜ê²Œ ëœë‹¤.</p>

<ul>
  <li>ì£¼ì–´(subject): ì²« ë²ˆì§¸ ë¶€ë¶„(findâ€¦By, existsâ€¦By)ì€ <strong>ì¿¼ë¦¬ì˜ ì£¼ì–´ë¥¼ ì •ì˜</strong>í•˜ê³ 
    <ul>
      <li>ì£¼ì–´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë„ì… ì ˆ(introducing clause) ì€ ì¶”ê°€ <code class="language-plaintext highlighter-rouge">expressions</code> ì„ í¬í•¨í•  ìˆ˜ ìˆë‹¤.</li>
      <li><code class="language-plaintext highlighter-rouge">introducing clause</code>: ì´ ì ˆì˜ ëª¨ë“  í…ìŠ¤íŠ¸ëŠ” descriptive ìœ¼ë¡œ ê°„ì£¼ë˜ë©° <code class="language-plaintext highlighter-rouge">Distinct</code>, <code class="language-plaintext highlighter-rouge">Top</code>, <code class="language-plaintext highlighter-rouge">First</code> ë“±ì„ ì‚¬ìš©í•˜ë©´ ì¿¼ë¦¬ì— distinct í”Œë˜ê·¸ë¥¼ ì„¤ì •í•˜ê±°ë‚˜ ê²°ê³¼ ê°œìˆ˜ë¥¼ ì œí•œí•  ìˆ˜ ìˆê²Œ ëœë‹¤.</li>
    </ul>
  </li>
  <li>ìˆ ì–´(predicate): ë‘ ë²ˆì§¸ ë¶€ë¶„ì€ ì¿¼ë¦¬ì˜ ì¡°ê±´ì„ ì •ì˜í•œë‹¤.
    <ul>
      <li>ë¶€ë¡(appendix): ë§ˆì§€ë§‰ ë¶€ë¶„ì—ëŠ” <strong>ì •ë ¬(sorting)</strong>ê³¼ <strong>ëŒ€ì†Œë¬¸ì(letter-casing) ìˆ˜ì •ì</strong>ë¥¼ í¬í•¨í•œ ì¿¼ë¦¬ ë©”ì„œë“œ <strong>ì£¼ì–´(subject) í‚¤ì›Œë“œ</strong>ì™€ ì¿¼ë¦¬ ë©”ì„œë“œ <strong>ìˆ ì–´(predicate) í‚¤ì›Œë“œ</strong>ì˜ ì½œë¼ë³´ì´ë‹¤.<br />
  í•˜ì§€ë§Œ ì²« ë²ˆì§¸ <code class="language-plaintext highlighter-rouge">By</code> ëŠ” ì‹¤ì œ <code class="language-plaintext highlighter-rouge">predicate</code> ì˜ ì‹œì‘ì„ ë‚˜íƒ€ë‚´ëŠ” <code class="language-plaintext highlighter-rouge">delimiter</code> ì—­í• ì„ í•˜ê²Œ ë˜ê³ , ê¸°ë³¸ì ìœ¼ë¡œ ì—”í‹°í‹° ì†ì„±ì— ì¡°ê±´ì„ ì •ì˜í•˜ê³  <code class="language-plaintext highlighter-rouge">And</code>, <code class="language-plaintext highlighter-rouge">Or</code> ë¡œ ì—°ê²° í•  ìˆ˜ ìˆë‹¤. ì´ëŸ° ë¶€ë¡ì´ ì—°ê²°ìë¥¼ í†µí•´ ê³„ì† ì—°ê²°ë  ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
</ul>

<p>ì‹¤ì œ ë©”ì„œë“œ íŒŒì‹± ê²°ê³¼ëŠ” <strong>ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” ì˜ì†ì„± ì €ì¥ì†Œ(persistence store)</strong> ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤. í•˜ì§€ë§Œ ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒ ì‚¬í•­ë“¤ì€ ìœ ì§€ëœë‹¤.</p>

<ul>
  <li>
    <p>expression ì€ ì£¼ë¡œ <strong>property ì ‘ê·¼ê³¼ operator ì˜ ê²°í•©</strong>ìœ¼ë¡œ ì´ë£¨ì–´ì§€ë©°, ì†ì„± í‘œí˜„ì‹ì€ And ì™€ Or ë¡œ ê²°í•© ê°€ëŠ¥í•˜ë‹¤.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Between</code>, <code class="language-plaintext highlighter-rouge">LessThan</code>, <code class="language-plaintext highlighter-rouge">GreaterThan</code>, <code class="language-plaintext highlighter-rouge">Like</code> ë“±ì˜ ì—°ì‚°ìë¥¼ ì†ì„± í‘œí˜„ì‹(ë¶€ë¡)ì— ì ìš©í•  ìˆ˜ ìˆìœ¼ë©° ì§€ì›ë˜ëŠ” ì—°ì‚°ìëŠ” ì €ì¥ì†Œë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.</p>
  </li>
  <li>
    <p>ë©”ì„œë“œ íŒŒì„œëŠ” ê°œë³„ ì†ì„±ì— ëŒ€í•´ <code class="language-plaintext highlighter-rouge">IgnoreCase</code> í”Œë˜ê·¸ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</p>
  </li>
</ul>

<h5 id="reserved-method-names">Reserved Method Names</h5>

<p>ë ˆí¬ì§€í† ë¦¬ì˜ ë©”ì„œë“œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì†ì„± ì´ë¦„ìœ¼ë¡œ ë°”ì¸ë”© ë˜ì§€ë§Œ, ê¸°ë³¸ ë ˆí¬ì§€í† ë¦¬ì—ì„œ ìƒì† ë°›ì€ íŠ¹ì • ë©”ì„œë“œ ì´ë¦„ê³¼ ê´€ë ¨í•´ì„œëŠ” ëª‡ ê°€ì§€ ì˜ˆì™¸ê°€ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ <code class="language-plaintext highlighter-rouge">findById</code> ì™€ ê°™ì€ Id ëŠ” ì‹¤ì œ <code class="language-plaintext highlighter-rouge">@Id</code> ê°€ í’‘ì–´ìˆëŠ” ì†ì„±ì„ ëŒ€ìƒìœ¼ë¡œ í•˜ê²Œ ëœë‹¤(<code class="language-plaintext highlighter-rouge">findByPk</code> í•´ë„ ëœë‹¤).</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
  <span class="nd">@Id</span> <span class="nc">Long</span> <span class="n">pk</span><span class="o">;</span>      <span class="c1">// ì‹ë³„ì ì†ì„±</span>

  <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>          <span class="c1">// ì‹ë³„ì ì•„ë‹˜</span>
  <span class="c1">// â€¦</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">UserRepository</span> <span class="kd">extends</span> <span class="nc">Repository</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findById</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">);</span>     
  <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByPk</span><span class="o">(</span><span class="nc">Long</span> <span class="n">pk</span><span class="o">);</span>     
  <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findUserById</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">);</span> 
<span class="o">}</span></code></pre></figure>

<h5 id="property-expressions">Property Expressions</h5>

<p>ì†ì„± í‘œí˜„ì‹ì€ ê´€ë¦¬ë˜ëŠ” ì—”í‹°í‹°ì˜ ì§ì ‘ì ì¸ ì†ì„±ë§Œì„ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤. ì´ì „ ì˜ˆì‹œì²˜ëŸ¼ ì¿¼ë¦¬ë¥¼ ìƒì„±í•  ë•Œ íŒŒì‹±ëœ ì†ì„±ì´ ë„ë©”ì¸ í´ë˜ìŠ¤ì˜ ì†ì„±ì„ì„ ë¯¸ë¦¬ í™•ì¸í•œë‹¤. í•˜ì§€ë§Œ ì—”í‹°í‹° ë‚´ì˜ ì†ì„±ì—ì„œ ì†ì„±ì˜ ë˜ ì†ì„±ì„ ê°€ì§€ê³  ì˜¤ë©´ ì–´ë–¨ê¹Œ?</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="nf">findByAddressZipCode</span><span class="o">(</span><span class="nc">ZipCode</span> <span class="n">zipCode</span><span class="o">);</span></code></pre></figure>

<p>ì˜ˆë¥¼ ë“¤ì–´ <code class="language-plaintext highlighter-rouge">Person</code> ì´ <code class="language-plaintext highlighter-rouge">Address</code> ë¥¼ ê°€ì§€ê³  ìˆê³ , ê·¸ <code class="language-plaintext highlighter-rouge">Address</code> ê°€ <code class="language-plaintext highlighter-rouge">ZipCode</code> ë¥¼ ê°€ì§€ê³  ìˆë‹¤ê³  ê°€ì •í•˜ì. ì´ ê²½ìš° ë©”ì„œë“œëŠ” <code class="language-plaintext highlighter-rouge">x.address.zipCode</code> ë¼ëŠ” <strong>ì†ì„± íƒìƒ‰(Property Traversal)</strong>ì„ ìƒì„±í•œë‹¤.</p>

<p>ìƒì„±ëœ <code class="language-plaintext highlighter-rouge">Spring Data JPA</code> ì˜ ì†ì„± íƒìƒ‰ì˜ ì†ì„± í•´ì„ ì•Œê³ ë¦¬ì¦˜ì€ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‘ë™í•˜ê²Œ ëœë‹¤.</p>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">AddressZipCode</code> ì „ì²´ë¥¼ í•˜ë‚˜ì˜ ì†ì„± ì´ë¦„(ì²« ê¸€ì ì†Œë¬¸ì)ìœ¼ë¡œ ê°„ì£¼í•˜ì—¬ ë„ë©”ì¸ í´ë˜ìŠ¤ì—ì„œ ì°¾ëŠ”ë‹¤.</p>
  </li>
  <li>í•´ë‹¹ ì†ì„±ì´ ì—†ìœ¼ë©´, ì•Œê³ ë¦¬ì¦˜ì€ ì˜¤ë¥¸ìª½ë¶€í„° camel-case ë‹¨ìœ„ë¡œ ë¶„í• í•˜ì—¬ ë‹¤ì‹œ ì‹œë„í•œë‹¤.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">AddressZip</code>, <code class="language-plaintext highlighter-rouge">Code</code> ë¡œ ë¶„í• </li>
    </ul>
  </li>
  <li>ë¶„í• ì´ ì‹¤íŒ¨í•˜ë©´ ì™¼ìª½ìœ¼ë¡œ ì´ë™í•˜ë©´ì„œ ë‹¤ì‹œ ì‹œë„í•œë‹¤.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Address</code>, <code class="language-plaintext highlighter-rouge">ZipCode</code> ë¡œ ë¶„í• </li>
    </ul>
  </li>
</ol>

<p>ì´ëŠ” í•œê°€ì§€ ì˜ëª»ëœ ì†ì„±ì„ ì„ íƒí•  ìœ„í—˜ì´ ìˆëŠ” ì•Œê³ ë¦¬ì¦˜ì¸ë°, ë§Œì•½ Person í´ë˜ìŠ¤ì—ì„œ addressZip ì´ë¼ëŠ” ì†ì„±ì´ ë³„ë„ë¡œ ì¡´ì¬í•œë‹¤ê³  í•´ë³´ì. ê·¸ëŸ¬ë©´ ì•Œê³ ë¦¬ì¦˜ì€ ì²«ë²ˆì§¸ ë¶„í• ì—ì„œ ì´ë¯¸ AddressZip ì„ ë§¤ì¹­ì‹œì¼œë²„ë¦¬ê³ , ê·¸ íƒ€ì…ì€ code ì†ì„±ì´ ì—†ê¸° ë•Œë¬¸ì— ì‹¤íŒ¨í•˜ê²Œ ëœë‹¤.</p>

<p>ì´ë•Œ ë©”ì„œë“œ ì´ë¦„ì— <strong>ì–¸ë”ìŠ¤ì½”ì–´(_)</strong> ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª…ì‹œì ìœ¼ë¡œ íƒìƒ‰ ì§€ì ì„ êµ¬ë¶„í•  ìˆ˜ ìˆìœ¼ë©° ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="nf">findByAddress_ZipCode</span><span class="o">(</span><span class="nc">ZipCode</span> <span class="n">zipCode</span><span class="o">);</span></code></pre></figure>

<p>_ ì— ëŒ€í•œ ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
  <li>_ ë¡œ ì‹œì‘í•˜ëŠ” í•„ë“œëª…: ë°‘ì¤„ ê·¸ëŒ€ë¡œ ìœ ì§€ë˜ë©°, ì¤‘ì²© ê²½ë¡œë¥¼ êµ¬ë¶„í•˜ë ¤ë©´ <code class="language-plaintext highlighter-rouge">__</code> ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</li>
  <li>ëŒ€ë¬¸ìë¡œë§Œ êµ¬ì„±ëœ í•„ë“œëª…: ëª¨ë‘ ëŒ€ë¬¸ìì¸ í•„ë“œëª…ì€ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ì¤‘ì²© ê²½ë¡œë¥¼ í‘œí˜„í•´ì•¼ í•œë‹¤ë©´, _ ë¡œ êµ¬ë¶„í•´ì•¼ í•œë‹¤.</li>
  <li>ë‘ ë²ˆì§¸ ê¸€ìê°€ ëŒ€ë¬¸ìì¸ í•„ë“œëª…: <code class="language-plaintext highlighter-rouge">qCode</code> ì²˜ëŸ¼ ì²« ê¸€ìëŠ” ì†Œë¬¸ìì´ê³  ë‘ ë²ˆì§¸ ê¸€ìê°€ ëŒ€ë¬¸ìì¸ ê²½ìš°, í•´ì„ ì‹œ ë‘ ê¸€ìë¥¼ ëŒ€ë¬¸ìë¡œ ì‹œì‘í•˜ëŠ” í˜•íƒœ(<code class="language-plaintext highlighter-rouge">QCode</code>) ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ì¦‰, <code class="language-plaintext highlighter-rouge">String qCode</code> ëŠ” ì†ì„± í‘œí˜„ì‹ì—ì„œ <code class="language-plaintext highlighter-rouge">QCode</code> ë¡œ í‘œí˜„í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.</li>
  <li>ê²½ë¡œ ëª¨í˜¸ì„±: <code class="language-plaintext highlighter-rouge">Code q</code> ì™€ <code class="language-plaintext highlighter-rouge">String qCode</code> ë‘˜ì„ ì—”í‹°í‹°ê°€ ê°€ì§€ê³  ìˆê³  <code class="language-plaintext highlighter-rouge">Code</code> ëŠ” ë˜ <code class="language-plaintext highlighter-rouge">String code</code> ë¥¼ ê°€ì§€ê³  ìˆë‹¤ê³  í•´ë³´ì. ì´ë•ŒëŠ” ì†ì„± í•´ì„ ì•Œê³ ë¦¬ì¦˜ì€ ì§ì ‘ ì†ì„±ì„ ìš°ì„ ì ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">qCode</code> í•„ë“œë¥¼ ë¨¼ì € ë§¤ì¹­ì‹œí‚¤ê²Œ ëœë‹¤.</li>
</ul>

<h5 id="repository-methods-returning-collections-or-iterables">Repository Methods Returning Collections or Iterables</h5>

<p>ì—¬ëŸ¬ ê°œì˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ì¿¼ë¦¬ ë©”ì„œë“œëŠ” ì¼ë°˜ì ì¸ Java ì»¬ë ‰ì…˜ íƒ€ì…ì¸ <code class="language-plaintext highlighter-rouge">Iterable</code>, <code class="language-plaintext highlighter-rouge">List</code>, <code class="language-plaintext highlighter-rouge">Set</code> ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ ì™¸ì—ë„ <code class="language-plaintext highlighter-rouge">Spring Data</code> ì—ì„œ ì œê³µí•˜ëŠ” <code class="language-plaintext highlighter-rouge">Streamable</code>(<code class="language-plaintext highlighter-rouge">Iterable</code> ì„ í™•ì¥í•œ ì»¤ìŠ¤í…€ íƒ€ì…) ì´ë‚˜ <code class="language-plaintext highlighter-rouge">Vavr</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ ì»¬ë ‰ì…˜ íƒ€ì…ë„ ë°˜í™˜íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤(ì£¼ë¡œ Iterable ì„ ì‚¬ìš©í•œë‹¤).</p>

<p><strong>Streamable</strong></p>

<p><code class="language-plaintext highlighter-rouge">Iterable</code> ì´ë‚˜ ì¼ë°˜ì ì¸ ì»¬ë ‰ì…˜ íƒ€ì…ì˜ ëŒ€ì²´ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ íƒ€ì…ì€ <code class="language-plaintext highlighter-rouge">Iterable</code> ì—ëŠ” ì—†ëŠ” ë¹„ë³‘ë ¬(non-parallel) Steam ì ‘ê·¼ ë©”ì„œë“œë¥¼ ì œê³µí•˜ë©°, <code class="language-plaintext highlighter-rouge">filter</code>, <code class="language-plaintext highlighter-rouge">map</code> ë“±ì˜ ìŠ¤íŠ¸ë¦¼ ì—°ì‚°ì„ ì§ì ‘ ìˆ˜í–‰í•  ìˆ˜ ìˆê³ , ë‹¤ë¥¸ <code class="language-plaintext highlighter-rouge">Streamable</code> ê°ì²´ë“¤ë¡œ ë°”ê¿€ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë„ ì œê³µí•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">interface</span> <span class="nc">PersonRepository</span> <span class="kd">extends</span> <span class="nc">Repository</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="nc">Streamable</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="nf">findByFirstnameContaining</span><span class="o">(</span><span class="nc">String</span> <span class="n">firstname</span><span class="o">);</span>
  <span class="nc">Streamable</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="nf">findByLastnameContaining</span><span class="o">(</span><span class="nc">String</span> <span class="n">lastname</span><span class="o">);</span>
<span class="o">}</span>

<span class="nc">Streamable</span><span class="o">&lt;</span><span class="nc">Person</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="na">findByFirstnameContaining</span><span class="o">(</span><span class="s">"av"</span><span class="o">)</span>
  <span class="o">.</span><span class="na">and</span><span class="o">(</span><span class="n">repository</span><span class="o">.</span><span class="na">findByLastnameContaining</span><span class="o">(</span><span class="s">"ea"</span><span class="o">));</span></code></pre></figure>

<p><strong>ì‚¬ìš©ì ì •ì˜ Streamable ë˜í¼ íƒ€ì… ë°˜í™˜</strong></p>

<p>ì»¬ë ‰ì…˜ì„ ê°ì‹¸ëŠ” ì „ìš© ë˜í¼ íƒ€ì…ì„ ì œê³µí•˜ëŠ” ê²ƒì€ ì—¬ëŸ¬ ê°œì˜ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ì¿¼ë¦¬ ê²°ê³¼ì— ëŒ€í•œ ì „ìš© API ë¥¼ ì œê³µí•˜ê¸° ìœ„í•œ í”í•œ íŒ¨í„´ì´ë‹¤. ë³´í†µ ì´ëŸ° ë˜í¼ íƒ€ì…ì€ ë ˆí¬ì§€í† ë¦¬ ë©”ì„œë“œê°€ ì»¬ë ‰ì…˜ íƒ€ì…ì„ ë°˜í™˜í•œ ë’¤, ê·¸ ê²°ê³¼ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ê°ì‹¸ì„œ(wrapper instance) ìƒì„±í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.</p>

<p>í•˜ì§€ë§Œ Spring Data ì—ì„œëŠ” ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•œë‹¤ë©´ ì´ëŸ¬í•œ ë˜í¼ íƒ€ì… ìì²´ë¥¼ ì¿¼ë¦¬ ë©”ì„œë“œì˜ ë°˜í™˜ íƒ€ì…ìœ¼ë¡œ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<ol>
  <li>ê·¸ íƒ€ì…ì´ Streamable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•¨</li>
  <li>Streamable ì„ ì¸ìë¡œ ë°›ëŠ” ìƒì„±ì ë˜ëŠ” ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œ(of, valueOf) ì¤‘ í•˜ë‚˜ë¥¼ ì œê³µí•´ì•¼ í•œë‹¤.</li>
</ol>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>                                         
  <span class="nc">MonetaryAmount</span> <span class="nf">getPrice</span><span class="o">()</span> <span class="o">{</span> <span class="err">â€¦</span> <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@RequiredArgsConstructor</span><span class="o">(</span><span class="n">staticName</span> <span class="o">=</span> <span class="s">"of"</span><span class="o">)</span>
<span class="kd">class</span> <span class="nc">Products</span> <span class="kd">implements</span> <span class="nc">Streamable</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="o">{</span>         

  <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Streamable</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="n">streamable</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nc">MonetaryAmount</span> <span class="nf">getTotal</span><span class="o">()</span> <span class="o">{</span>                    
    <span class="k">return</span> <span class="n">streamable</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
      <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Product:</span><span class="o">:</span><span class="n">getPrice</span><span class="o">)</span>
      <span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="nc">Money</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="nl">MonetaryAmount:</span><span class="o">:</span><span class="n">add</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">Iterator</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span> <span class="o">{</span>                 
    <span class="k">return</span> <span class="n">streamable</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">ProductRepository</span> <span class="kd">extends</span> <span class="nc">Repository</span><span class="o">&lt;</span><span class="nc">Product</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="nc">Products</span> <span class="nf">findAllByDescriptionContaining</span><span class="o">(</span><span class="nc">String</span> <span class="n">text</span><span class="o">);</span> 
<span class="o">}</span></code></pre></figure>

<blockquote>
  <p>@RequiredArgsConstructor(staticName = â€œofâ€): final í•„ë“œë‚˜ @NonNull ì´ ë¶™ì€ í•„ë“œë§Œì„ ëŒ€ìƒìœ¼ë¡œ ìë™ìœ¼ë¡œ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì¤Œ. ì´ë•Œ of ë¼ëŠ” ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë¥¼ ìƒì„±ì ëŒ€ì‹  ì œê³µí•´ì¤€ë‹¤. ì¦‰ ë‹¤ìŒê³¼ ê°™ë‹¤:<br />
```java
@RequiredArgsConstructor(staticName = â€œofâ€)
class Example {
    private final String name;
}
// =========== ì•„ë˜ë¡œ ë³€í™˜ ============
public class Example {
    private final String name;</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>private Example(String name) {
    this.name = name;
}

public static Example of(String name) {
    return new Example(name);
} } ```
</code></pre></div></div>

<h5 id="streaming-query-results">Streaming Query Results</h5>

<p>Stream ë˜í•œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ë°:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Query</span><span class="o">(</span><span class="s">"select u from User u"</span><span class="o">)</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findAllByCustomQueryAndStream</span><span class="o">();</span>

<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">readAllByFirstnameNotNull</span><span class="o">();</span>

<span class="nd">@Query</span><span class="o">(</span><span class="s">"select u from User u"</span><span class="o">)</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">streamAllPaged</span><span class="o">(</span><span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span></code></pre></figure>

<p>Stream ì€ ë‚´ë¶€ì ìœ¼ë¡œ ë°ì´í„° ì €ì¥ì†Œ ì „ìš© ë¦¬ì†ŒìŠ¤ë¥¼ ê°ìŒ€ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì‚¬ìš©ì´ ëë‚œ í›„ì—ëŠ” ë°˜ë“œì‹œ ë‹«ì•„ì•¼ í•œë‹¤.</p>

<h5 id="asynchronous-query-results">Asynchronous Query Results</h5>

<p>Spring ì˜ ë¹„ë™ê¸° ë©”ì„œë“œ ì‹¤í–‰ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ë ˆí¬ì§€í† ë¦¬ ì¿¼ë¦¬ë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</p>

<p>ì¦‰, ë©”ì„œë“œê°€ í˜¸ì¶œë˜ìë§ˆì ì¦‰ì‹œ ë°˜í™˜ë˜ë©°, ì‹¤ì œ ì¿¼ë¦¬ëŠ” String ì˜ TaskExecutor ì— ì œì¶œëœ ë³„ë„ì˜ ì‘ì—…ì—ì„œ ì‹¤í–‰ëœë‹¤ê³  í•œë‹¤.</p>

<blockquote>
  <p>ë¹„ë™ê¸° ì¿¼ë¦¬ëŠ” ë¦¬ì•¡í‹°ë¸Œ ì¿¼ë¦¬ë‘ì€ ë‹¤ë¥´ë‹¤.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Async</span>
<span class="nc">Future</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByFirstname</span><span class="o">(</span><span class="nc">String</span> <span class="n">firstname</span><span class="o">);</span>

<span class="nd">@Async</span>
<span class="nc">CompletableFuture</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findOneByFirstname</span><span class="o">(</span><span class="nc">String</span> <span class="n">firstname</span><span class="o">);</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">java.util.concurrent.Future</code> ë¥¼ ë°˜í™˜íƒ€ì…ìœ¼ë¡œ í•˜ë©°, <code class="language-plaintext highlighter-rouge">CompletableFuture</code> ë„ ë°˜í™˜ê°’ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<h5 id="paging-iterating-large-results-sorting--limiting">Paging, Iterating Large Results, Sorting &amp; Limiting</h5>

<p>ì¿¼ë¦¬ì—ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ì²˜ë¦¬í•˜ë ¤ë©´, ì´ì „ ì˜ˆì œë“¤ì—ì„œ ë´¤ë“¯ì´ íŒŒë¼ë¯¸í„°ë¡œ ì •ì˜í•˜ë©´ ëœë‹¤. ì´ì™¸ì—ë„ Spring Data ëŠ” Pageable, Sort, Limit ì™€ ê°™ì€ íŠ¹ì • íƒ€ì…ì„ ì¸ì‹í•˜ì—¬ ì¿¼ë¦¬ì—ë„ ë™ì ìœ¼ë¡œ í˜ì´ì§•, ì •ë ¬, ê²°ê³¼ ì œí•œ ë“±ì„ ì ìš©ì‹œí‚¬ ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Page</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByLastname</span><span class="o">(</span><span class="nc">String</span> <span class="n">lastname</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>

<span class="nc">Slice</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByLastname</span><span class="o">(</span><span class="nc">String</span> <span class="n">lastname</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByLastname</span><span class="o">(</span><span class="nc">String</span> <span class="n">lastname</span><span class="o">,</span> <span class="nc">Sort</span> <span class="n">sort</span><span class="o">);</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByLastname</span><span class="o">(</span><span class="nc">String</span> <span class="n">lastname</span><span class="o">,</span> <span class="nc">Sort</span> <span class="n">sort</span><span class="o">,</span> <span class="nc">Limit</span> <span class="n">limit</span><span class="o">);</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="nf">findByLastname</span><span class="o">(</span><span class="nc">String</span> <span class="n">lastname</span><span class="o">,</span> <span class="nc">Pageable</span> <span class="n">pageable</span><span class="o">);</span></code></pre></figure>

<p>Sort, Pageable Limit ë¥¼ ì‚¬ìš©í•˜ëŠ” API ë“¤ì€ null ê°’ì´ ì•„ë‹Œ ì¸ìë¥¼ ë°˜ë“œì‹œ ì „ë‹¬ë°›ì•„ì•¼ í•¨ì„ ì•Œê³  ìˆì.</p>

    </div><div id="disqus_thread" style="margin-top:25px"></div>
    <script>
    var disqus_config = function () {
        this.page.url = 'https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/19/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-39%EC%9D%BC%EC%B0%A8-Spring-Data-JDBC.html';
        this.page.identifier = 'https://seonghun120614.github.io/seonghun120614/%EB%A9%8B%EC%9F%81%EC%9D%B4%EC%82%AC%EC%9E%90%EC%B2%98%EB%9F%BC/%EB%A9%8B%EC%82%AC/%EB%B0%B1%EC%97%94%EB%93%9C/til/java/spring/2025/10/19/%EB%A9%8B%EC%82%AC-%EB%B0%B1%EC%97%94%EB%93%9C-19%EA%B8%B0-til-39%EC%9D%BC%EC%B0%A8-Spring-Data-JDBC.html';
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = 'https://seonghun.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
    <noscript>Please enable JavaScript to view the <a
            href="https://disqus.com/?ref_noscript" rel="nofollow">comments
            powered by Disqus.</a></noscript></div>
<script>
    mermaid.initialize({startOnLoad:true});
    window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
</script>
            </section>
            <footer class="condensed">
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </footer>
        </main>
        
        <script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>
        
        <script src="/seonghun120614/assets/js/simple-jekyll-search.min.js"></script>
        <script src="/seonghun120614/assets/js/search.js"></script>
        
        <script>
            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                document.getElementById('scroll-progress').style.width = scrollPercent + '%';
            });
        </script>
    </body>
</html>