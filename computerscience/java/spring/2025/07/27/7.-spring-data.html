<!DOCTYPE html>
<html lang="kor">

    <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="icon" href="/seonghun120614/assets/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/seonghun120614/assets/css/style.css">
<title>7. Spring Data</title>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Spring Data | Seonghunâ€™s Blog</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Spring Data" />
<meta name="author" content="Seonghun Park" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/07/27/7.-spring-data.html" />
<meta property="og:url" content="https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/07/27/7.-spring-data.html" />
<meta property="og:site_name" content="Seonghunâ€™s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-07-27T04:50:14+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Spring Data" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Seonghun Park"},"dateModified":"2025-07-27T04:50:14+00:00","datePublished":"2025-07-27T04:50:14+00:00","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Spring Data","mainEntityOfPage":{"@type":"WebPage","@id":"https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/07/27/7.-spring-data.html"},"url":"https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/07/27/7.-spring-data.html"}</script>
<!-- End Jekyll SEO tag -->


<script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>

<!-- Mermaid -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RQTWJRLWGD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-RQTWJRLWGD');
</script></head><script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggle = document.getElementById("dark-toggle");
        
            // ì´ë¯¸ ì‹¤í–‰í•œ ì  ìˆëŠ”ì§€ í™•ì¸
            const hasToggled = localStorage.getItem("darkModeInitialized");
        
            if (!hasToggled && toggle && toggle.checked) {
                toggleDarkMode();
                localStorage.setItem("darkModeInitialized", "true"); // ìµœì´ˆ ì‹¤í–‰ ê¸°ë¡
            }
        });
    </script>

    <body>
        <div id="scroll-progress"></div>
        <main class="container">
            <section class="about">
                <div class="about-header condensed">
                    <div class="about-title">
                        <a href="/seonghun120614/">
                            
                            <img class="light"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            <img class="dark"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            
                        </a>
                        <h2 id="title">
                            <a href="/seonghun120614/">Seonghun Park</a>
                        </h2>
                    </div><p class="tagline">Developer.</p></div>
                
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </section>
            <section class="content">
                <script>
window.MathJax = {
    tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
    },
    options: {
    renderActions: {
        addMenu: []
    }
    }
};
</script>

<script type="text/javascript"
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script><div class="post-container">
    <a class="post-link" href="/seonghun120614/computerscience/java/spring/2025/07/27/7.-spring-data.html">
        <h2 class="post-title">7. Spring Data</h2>
    </a>
    
    <div class="post-meta">
        <div class="post-date"><i class="icon-calendar"></i>Jul 27, 2025</div><ul class="post-categories"><li>ComputerScience</li><li>Java</li><li>Spring</li></ul></div>

    <div class="post">
        <!--more-->

<h2 id="-í•œê³„ì ">ğŸª› í•œê³„ì </h2>
<p>ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•˜ë ¤ë©´ DAO ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê°ì²´ë“¤ì„ ì—¬ëŸ¬ê°œ ì •ì˜í•´ì•¼ í•œë‹¤.</p>

<h2 id="-ëª©ì°¨">ğŸ“‚ ëª©ì°¨</h2>
<ul>
  <li><a href="#ê°œìš”">ê°œìš”</a>
    <ul>
      <li><a href="#java-persistence-api-jpa">Java Persistence API (JPA)</a></li>
      <li><a href="#spring-template">Spring Template</a></li>
      <li><a href="#repository">Repository</a></li>
      <li><a href="#spring-data-modules">Spring Data Modules</a></li>
    </ul>
  </li>
  <li><a href="#spring-boot-rdbms-ì—°ë™í•˜ê¸°">Spring Boot RDBMS ì—°ë™í•˜ê¸°</a>
    <ul>
      <li><a href="#spring-boot-database-ìŠ¤í‚¤ë§ˆ-ì •ì˜-ë°-ì´ˆê¸°-ë°ì´í„°-ì„¤ì •">Spring Boot Database ìŠ¤í‚¤ë§ˆ ì •ì˜ ë° ì´ˆê¸° ë°ì´í„° ì„¤ì •</a></li>
      <li><a href="#spring-boot-mysql-database">Spring Boot MySQL Database</a>
        <ul>
          <li><a href="#properties-ì„¤ì •í•˜ê¸°">properties ì„¤ì •í•˜ê¸°</a></li>
          <li><a href="#testing">Testing</a></li>
        </ul>
      </li>
      <li><a href="#spring-boot-postgresql-database-ë¡œ-ë³€ê²½í•´ë³´ê¸°">Spring Boot PostgreSQL Database ë¡œ ë³€ê²½í•´ë³´ê¸°</a>
        <ul>
          <li><a href="#properties-ë¶„ë¦¬í•˜ê¸°">properties ë¶„ë¦¬í•˜ê¸°</a></li>
          <li><a href="#postgre-sql-ì‘ì„±">Postgre SQL ì‘ì„±</a></li>
          <li><a href="#testing-1">Testing</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#spring-data-jpa-ì‚¬ìš©í•˜ê¸°">Spring Data JPA ì‚¬ìš©í•˜ê¸°</a>
    <ul>
      <li><a href="#crudrepository">CrudRepository</a></li>
      <li><a href="#entity-ì™€-table">@Entity ì™€ @Table</a></li>
      <li><a href="#crudrepositoryë¥¼-í™œìš©í•œ-user-table-schema-êµ¬í˜„">CrudRepositoryë¥¼ í™œìš©í•œ User Table Schema êµ¬í˜„</a></li>
      <li><a href="#jpa-ì™€-sql-ì‚¬ì´ì˜-db-ì´ˆê¸°í™”-ê³ ì°°">JPA ì™€ sql ì‚¬ì´ì˜ DB ì´ˆê¸°í™” ê³ ì°°</a>
        <ul>
          <li><a href="#case-1-jpaê°€-í…Œì´ë¸”ì„-ë§Œë“¤ê³ -sqlì€-ì´ˆê¸°-ë°ì´í„°ë§Œ-ì‚½ì…">Case 1: JPAê°€ í…Œì´ë¸”ì„ ë§Œë“¤ê³ , SQLì€ ì´ˆê¸° ë°ì´í„°ë§Œ ì‚½ì…</a></li>
          <li><a href="#case-2-sqlë¡œ-í…Œì´ë¸”ì„-ì •ì˜í•˜ê³ -jpaëŠ”-ê±´ë“¤ì§€-ì•ŠìŒ">Case 2: SQLë¡œ í…Œì´ë¸”ì„ ì •ì˜í•˜ê³ , JPAëŠ” ê±´ë“¤ì§€ ì•ŠìŒ</a></li>
          <li><a href="#case-3-ë‘˜-ë‹¤-ì‚¬ìš©í–ˆì§€ë§Œ-ì¶©ëŒ-ë°œìƒ-ê°€ëŠ¥">Case 3: ë‘˜ ë‹¤ ì‚¬ìš©í–ˆì§€ë§Œ ì¶©ëŒ ë°œìƒ ê°€ëŠ¥</a></li>
          <li><a href="#case-4-í…ŒìŠ¤íŠ¸-í™˜ê²½ì—ì„œë§Œ-ì´ˆê¸°í™”">Case 4: í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œë§Œ ì´ˆê¸°í™”</a></li>
        </ul>
      </li>
      <li><a href="#testing-2">Testing</a></li>
      <li><a href="#pagingandsortingrepository-ë¥¼-í™œìš©í•œ-í˜ì´ì§•">PagingAndSortingRepository ë¥¼ í™œìš©í•œ í˜ì´ì§•</a>
        <ul>
          <li><a href="#crudrepository-ì™€-pagingandsortingrepository-ë¥¼-í†µí•œ-í¬ìŠ¤íŠ¸-ì¡°íšŒ">CrudRepository ì™€ PagingAndSortingRepository ë¥¼ í†µí•œ í¬ìŠ¤íŠ¸ ì¡°íšŒ</a></li>
          <li><a href="#datajpatestì™€-autoconfiguretestdatabase-ë¥¼-í™œìš©í•œ-í…ŒìŠ¤íŒ…">@DataJpaTestì™€ @AutoConfigureTestDatabase ë¥¼ í™œìš©í•œ í…ŒìŠ¤íŒ…</a></li>
          <li><a href="#datajpatest-ì™€-activeprofiles-ë¥¼-í™œìš©í•œ-í…ŒìŠ¤íŒ…">@DataJpaTest ì™€ @ActiveProfiles ë¥¼ í™œìš©í•œ í…ŒìŠ¤íŒ…</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#spring-custom-repository">Spring Custom Repository</a>
    <ul>
      <li><a href="#norepositorybean-ì• ë„ˆí…Œì´ì…˜">@NoRepositoryBean ì• ë„ˆí…Œì´ì…˜</a></li>
      <li><a href="#spring-data-query">Spring Data Query</a></li>
      <li><a href="#query-methods">Query Methods</a>
        <ul>
          <li><a href="#query-patternprefix">Query Pattern(Prefix)</a></li>
          <li><a href="#attributeentity-field">Attribute(Entity Field)</a></li>
          <li><a href="#ì¡°ê±´-í‚¤ì›Œë“œ">ì¡°ê±´ í‚¤ì›Œë“œ</a></li>
          <li><a href="#ì—°ê²°ì">ì—°ê²°ì</a></li>
          <li><a href="#ì •ë ¬-ì¡°ê±´">ì •ë ¬ ì¡°ê±´</a></li>
        </ul>
      </li>
      <li><a href="#query-ì• ë„ˆí…Œì´ì…˜">@Query ì• ë„ˆí…Œì´ì…˜</a></li>
    </ul>
  </li>
  <li><a href="#criteria-api">Criteria API</a>
    <ul>
      <li><a href="#entitymanager">EntityManager</a></li>
      <li><a href="#entitymanager-ì°¸ì¡°-ë°-criteriabuilder-ì„ ì–¸">EntityManager ì°¸ì¡° ë° CriteriaBuilder ì„ ì–¸</a></li>
    </ul>
  </li>
  <li><a href="#spring-data-jpa--querydsl">Spring Data JPA &amp; QueryDSL</a>
    <ul>
      <li><a href="#querydsl-ì˜ì¡´ì„±-ì¶”ê°€">QueryDSL ì˜ì¡´ì„± ì¶”ê°€</a></li>
      <li><a href="#querydslpredicateexecutor-ì¸í„°í˜ì´ìŠ¤">QuerydslPredicateExecutor ì¸í„°í˜ì´ìŠ¤</a></li>
    </ul>
  </li>
  <li><a href="#projection">Projection</a>
    <ul>
      <li><a href="#ì¸í„°í˜ì´ìŠ¤-ê¸°ë°˜-í”„ë¡œì ì…˜">ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡œì ì…˜</a></li>
      <li><a href="#í´ë˜ìŠ¤-ê¸°ë°˜-í”„ë¡œì ì…˜">í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡œì ì…˜</a></li>
    </ul>
  </li>
</ul>

<hr />

<h2 id="-ë³¸ë¬¸">ğŸ“š ë³¸ë¬¸</h2>

<p>ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì ‘ê·¼í•˜ê¸° ìœ„í•´ ìì£¼ ì“°ëŠ” ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œë“¤ì„ ì•ˆì“°ë„ë¡ í•˜ê³ , ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì¼ê´€ëœ ì½”ë“œë¡œ ê°€ì ¸ê°€ì„œ ê°œë°œìì—ê²Œ í¸ì˜ì„±ì„ ì œê³µí•¨ê³¼ ë™ì‹œì— ë‹¤ì–‘í•œ ë©”ì„œë“œë¥¼ ì œê³µí•˜ê¸° ìœ„í•œ DAO ìƒì„± í…œí”Œë¦¿ì„ ì§€ì›í•œë‹¤.</p>

<p>ì´ë¥¼ ìœ„í•´ <strong><a href="#java-database-connectivity">JDBC(Java Database Connectivity)</a></strong> ë¥¼ í™œìš©í•´ DBì— ì—°ê²°, ì¿¼ë¦¬ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ <strong><a href="#preparedstatement">PreparedStatement</a></strong>ë¥¼ ì •ì˜ë§Œ í•˜ë©´ ë‚´ë¶€ì ì¸ ë¡œì§ì„ ìë™ìœ¼ë¡œ ì§œì£¼ì–´ì„œ DB ì— ì ‘ê·¼í•˜ëŠ” ì„¸ë¶€ ë¡œì§ë“¤ì„ ë‹¤ ì•ˆì§œì£¼ì–´ë„ ëœë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ìƒì‚°ì„±ì´ ë¹„ì•½ì ìœ¼ë¡œ ëŠ˜ì–´ë‚œë‹¤.</p>

<p>ìš°ì„  ê°œë…ë¶€í„° ë³´ê³  ê°€ì.</p>

<h3 id="ê°œìš”">ê°œìš”</h3>

<h4 id="java-persistence-api-jpa">Java Persistence API (JPA)</h4>

<p>JPAëŠ” ìë°” ê°ì²´(Entity)ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ë§¤í•‘í•˜ê¸° ìœ„í•œ <strong><a href="#orm">ORM(Object-Relational Mapping)</a></strong> í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.</p>

<p>ê¸°ë³¸ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤:</p>
<blockquote>
  <p>Entity (ìë°” ê°ì²´) â†’ Persistence Provider (ì˜ˆ: Hibernate, EclipseLink) â†’ Database</p>
</blockquote>

<p>ìš°ë¦¬ëŠ” JPAê°€ ì •ì˜í•œ <strong>ì¸í„°í˜ì´ìŠ¤(API ëª…ì„¸)</strong>ë¥¼ ì‚¬ìš©í•˜ê³ , ì‹¤ì œ ë™ì‘ì€ Hibernate ë“±ì˜ í¼ì‹œìŠ¤í„´ìŠ¤ ì œê³µìê°€ êµ¬í˜„í•œë‹¤.</p>

<p>ì¦‰, JPAëŠ” í‘œì¤€ì„ ì •ì˜í•˜ê³ , êµ¬í˜„ì²´ëŠ” ì´ë¥¼ ë”°ë¥´ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.</p>

<h4 id="spring-template">Spring Template</h4>

<p><strong>JDBC, JMS(Java Message Service), JNDI</strong> ë“± ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì €ìˆ˜ì¤€ APIì—ì„œëŠ” DB ì—°ê²°, ì˜ˆì™¸ ì²˜ë¦¬, ìì› í•´ì œ ë“±ì˜ <strong>ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œ</strong>ê°€ ë°˜ë³µì ìœ¼ë¡œ ë°œìƒí•œë‹¤.</p>

<p>Springì€ ì´ëŸ¬í•œ ë°˜ë³µ ì‘ì—…ì„ ì¤„ì´ê¸° ìœ„í•´ <strong>Template ê¸°ë°˜ì˜ ì¶”ìƒí™” í´ë˜ìŠ¤</strong>ë¥¼ ì œê³µí•œë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ì–´ <code class="language-plaintext highlighter-rouge">JdbcTemplate</code>ì€ JDBC APIë¥¼ ì‚¬ìš©í•  ë•Œ í•„ìš”í•œ <strong>ì—°ê²°, ì¿¼ë¦¬ ì‹¤í–‰, ì˜ˆì™¸ ì²˜ë¦¬, ìì› ì •ë¦¬</strong> ë“±ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì¤€ë‹¤.</p>

<blockquote>
  <p>ì¦‰, ë³µì¡í•œ try-catch íŒ¨í„´ ì—†ì´ë„ DB ì‘ì—…ì„ ê°„ë‹¨í•˜ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.</p>
</blockquote>

<p><strong>JdbcTemplateì˜ ì—­í• </strong></p>
<ul>
  <li>DB ì—°ê²° ë° ìì› í•´ì œ ìë™ ì²˜ë¦¬</li>
  <li><strong>SQLException</strong> â†’ <strong>DataAccessException</strong> (ìŠ¤í”„ë§ ê³µí†µ ì˜ˆì™¸ë¡œ ë³€í™˜)</li>
  <li>SQL ì‹¤í–‰ ë° ê²°ê³¼ ë§¤í•‘ ì§€ì› (<code class="language-plaintext highlighter-rouge">query</code>, <code class="language-plaintext highlighter-rouge">update</code> ë“±)</li>
</ul>

<h4 id="repository">Repository</h4>

<p>Springì—ì„œ <strong>Repository</strong>ëŠ” ì „í†µì ì¸ <strong>DAO(Data Access Object)</strong>ì˜ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ê°œë…ì´ë‹¤. <code class="language-plaintext highlighter-rouge">@Repository</code> ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ <strong>ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì„ ì •ì˜</strong>í•˜ë©°, ì´ëŠ” <strong>Spring Data Commons</strong>ì— í¬í•¨ëœ ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ë“¤ì„ í†µí•´ ê¸°ëŠ¥ì´ í™•ì¥ëœë‹¤.</p>

<p><strong>Spring Data JPA</strong>ë‚˜ <strong>JdbcTemplate</strong> ê¸°ë°˜ <strong>Repository</strong>ë¥¼ ì‚¬ìš©í•˜ë©´,</p>
<ul>
  <li>CRUD ë©”ì„œë“œê°€ ìë™ ìƒì„±ë˜ë©°</li>
  <li>ì¿¼ë¦¬ ë©”ì„œë“œ(<code class="language-plaintext highlighter-rouge">findByName</code>, <code class="language-plaintext highlighter-rouge">countByStatus</code> ë“±)ë„ ìë™ êµ¬í˜„ëœë‹¤</li>
  <li>DB ì—°ê²°, íŠ¸ëœì­ì…˜ ì²˜ë¦¬, ì˜ˆì™¸(<strong><code class="language-plaintext highlighter-rouge">DataAccessExcpetion</code></strong>ìœ¼ë¡œ ì¼ê´€ëœ ì²˜ë¦¬) ë³€í™˜ ë“±ì€ ëª¨ë‘ ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤</li>
  <li>Beanìœ¼ë¡œ ë“±ë¡</li>
</ul>

<blockquote>
  <p>ì¦‰, <strong>ì¸í„°í˜ì´ìŠ¤ë§Œ ì •ì˜í•˜ë©´ êµ¬í˜„ ì—†ì´ë„ ê¸°ë³¸ì ì¸ ë°ì´í„° ì ‘ê·¼ ë¡œì§ì„ ìë™ìœ¼ë¡œ ìƒì„±</strong>í•´ì¤€ë‹¤.</p>
</blockquote>

<h4 id="spring-data-modules">Spring Data Modules</h4>

<ul>
  <li>Spring Data Commons</li>
  <li>Spring Data JDBC</li>
  <li>Spring Data JPA</li>
  <li>Spring Data MongoDB</li>
  <li>Spring Data Redis</li>
  <li>Spring Data REST</li>
  <li>Spring Data Apache Casandra</li>
  <li>â€¦</li>
</ul>

<p>ë°ì´í„° ì†ŒìŠ¤ë“¤ë§ˆë‹¤ ëª¨ë“ˆë“¤ì´ ìˆì–´ êµ‰ì¥íˆ ë§ì€ ëª¨ë“ˆì´ ìˆë‹¤. ëª¨ë“ˆë“¤ì„ ì´í•´í•˜ê¸° ìœ„í•´ ëª¨ë“ˆì„ ê³„ì¸µì ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.</p>

<ul>
  <li><strong>Spring Data Commons</strong>: Repository, CrudRepository, <strong>PagingAndSortingRepository</strong></li>
  <li><strong>Spring Data Sub-modules</strong>: JDBC, JPA, MongoDB, Casandra</li>
  <li><strong>DB Layer</strong>: JDBC-MySQL, JPA-PostgreSQL, MongoDB-MongoDB, â€¦</li>
</ul>

<p>Spring Data CommonsëŠ” Data ì„œë¸Œ ëª¨ë“ˆë“¤ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°œë°œìì—ê²Œ ì œê³µí•˜ê³ , ì„œë¸Œ ëª¨ë“ˆì€ ê°ê°ì˜ ë‹¤ì–‘í•œ DBì— ì—°ê²°ë˜ì–´ ë°ì´í„° ì†ŒìŠ¤ë§ˆë‹¤ ì½”ë“œ ì°¨ì´ë¥¼ ê°œë°œìê°€ êµ³ì´ ëª°ë¼ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.</p>

<h3 id="spring-boot-rdbms-ì—°ë™í•˜ê¸°">Spring Boot RDBMS ì—°ë™í•˜ê¸°</h3>

<p>ìš°ì„  JPAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ì˜ì¡´ì„±ì„ ì¶”ê°€í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">implementation</span><span class="o">(</span><span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">data</span><span class="o">-</span><span class="n">jpa</span><span class="err">'</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">exclude</span> <span class="nl">group:</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">zaxxer</span><span class="err">'</span><span class="o">,</span> <span class="nl">module:</span> <span class="err">'</span><span class="nc">HikariCP</span><span class="err">'</span>
<span class="o">}</span></code></pre></figure>

<p>ì—¬ê¸°ì„œ HikariCP ë§ê³  <strong><a href="#connection-pool">Connection Pool</a></strong> ë¡œ ë‹¤ìŒì„ ì„¤ì •í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">tomcat</span><span class="o">:</span><span class="n">tomcat</span><span class="o">-</span><span class="nl">jdbc:</span><span class="mf">10.1</span><span class="o">.</span><span class="mi">20</span><span class="err">'</span> <span class="c1">// ì»¤ë„¥ì…˜ í’€ tomcat jdbc ì‚¬ìš©</span></code></pre></figure>

<p>ì»¤ë„¥ì…˜ í’€ì€ ì„œë¹„ìŠ¤ë§ˆë‹¤ ì•Œë§ì€ê±¸ ì‚¬ìš©í•˜ë©´ ëœë‹¤.</p>

<h4 id="spring-boot-database-ìŠ¤í‚¤ë§ˆ-ì •ì˜-ë°-ì´ˆê¸°-ë°ì´í„°-ì„¤ì •">Spring Boot Database ìŠ¤í‚¤ë§ˆ ì •ì˜ ë° ì´ˆê¸° ë°ì´í„° ì„¤ì •</h4>

<p>ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•˜ëŠ” ë¶€ë¶„ì€ <code class="language-plaintext highlighter-rouge">resources/schema.sql</code>, <code class="language-plaintext highlighter-rouge">resources/data.sql</code> ì—ì„œ í•  ìˆ˜ ìˆë‹¤. ê·¸ ì „ì— *.sqlì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ spring ì—ì„œ ë‹¤ìŒ í”„ë¡œí¼í‹°ë¥¼ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="c"># application.properties
</span>
<span class="c"># always ë‚´ì¥DB, ì™¸ì¥DBë“  ìƒê´€ ì—†ì´ í•­ìƒ SQL íŒŒì¼ ì‹¤í–‰
# embedded(ê¸°ë³¸ê°’) H2, HSQL ë“±ì˜ ë‚´ì¥ DB ì—ì„œë§Œ SQL íŒŒì¼ ì‹¤í–‰
# never SQL ì´ˆê¸°í™” íŒŒì¼ ì‹¤í–‰ ì•ˆí•¨
</span><span class="py">spring.sql.init.mode</span><span class="p">=</span><span class="s">always</span>

<span class="c"># schema.sql + data.sql ì‚¬ìš©ì„ ëª…ì‹œ
</span><span class="py">spring.sql.init.schema-locations</span><span class="p">=</span><span class="s">classpath:schema.sql</span>
<span class="py">spring.sql.init.data-locations</span><span class="p">=</span><span class="s">classpath:data.sql</span>

<span class="c"># Hibernateê°€ í…Œì´ë¸” ë§Œë“¤ì§€ ì•Šë„ë¡ ì„¤ì •
</span><span class="py">spring.jpa.hibernate.ddl-auto</span><span class="p">=</span><span class="s">none</span>

<span class="c"># JPA SQL ì¿¼ë¦¬ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•˜ë„ë¡ í•¨
</span><span class="py">spring.jpa.show-sql</span><span class="p">=</span><span class="s">true</span></code></pre></figure>

<p>ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ì •í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="o">//</span> <span class="k">schema</span><span class="p">.</span><span class="k">sql</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">USERS</span> <span class="p">(</span>
  <span class="n">id</span> <span class="nb">INT</span> <span class="n">AUTO_INCREMENT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
  <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
  <span class="n">email</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="p">);</span></code></pre></figure>

<p>ê¸°ë³¸ì ìœ¼ë¡œ í•¸ë“¤ë§ í•  ë°ì´í„°ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="o">//</span> <span class="k">data</span><span class="p">.</span><span class="k">sql</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">USERS</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
<span class="k">SELECT</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'Alice'</span><span class="p">,</span> <span class="s1">'alice@example.com'</span>
<span class="k">WHERE</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="p">(</span><span class="k">SELECT</span> <span class="mi">1</span> <span class="k">FROM</span> <span class="n">USERS</span> <span class="k">WHERE</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">);</span></code></pre></figure>

<p>ë°ì´í„°ëŠ” ê·¸ëƒ¥ GPT ê°€ ì£¼ëŠ” ì˜ˆì‹œë¡œ í–ˆë‹¤.</p>

<h4 id="spring-boot-mysql-database">Spring Boot MySQL Database</h4>

<p>ìš°ì„  mysqlì„ ì—°ê²°í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤˜ì•¼ í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">runtimeOnly</span> <span class="err">'</span><span class="nl">mysql:</span><span class="n">mysql</span><span class="o">-</span><span class="n">connector</span><span class="o">-</span><span class="nl">java:</span><span class="mf">8.0</span><span class="o">.</span><span class="mi">33</span><span class="err">'</span></code></pre></figure>

<p>dev í™˜ê²½ì—ì„œ MySql serverë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë‹¤ìŒì„ ì…ë ¥í•œë‹¤. <strong>í¬íŠ¸ëŠ” 3306</strong>ì´ë‹¤.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">docker run <span class="nt">--name</span> mysql-dev <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">={</span>password<span class="o">}</span> <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">MYSQL_DATABASE</span><span class="o">={</span>DB ì´ë¦„<span class="o">}</span> <span class="se">\</span>
  <span class="nt">-p</span> 3306:3306 <span class="se">\</span>
  <span class="nt">-d</span> mysql:8</code></pre></figure>

<h5 id="properties-ì„¤ì •í•˜ê¸°">properties ì„¤ì •í•˜ê¸°</h5>
<p>ìì£¼ ì‚¬ìš©ë˜ëŠ” urlê³¼ password ë“±ì„ propertiesì— ì €ì¥í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="c"># mysql.properties
</span><span class="py">spring.datasource.url</span><span class="p">=</span><span class="s">jdbc:mysql://localhost:3306/{DB ì´ë¦„}</span>
<span class="py">spring.datasource.username</span><span class="p">=</span><span class="s">root</span>
<span class="py">spring.datasource.password</span><span class="p">=</span><span class="s">1234</span>
<span class="py">spring.datasource.driver-class-name</span><span class="p">=</span><span class="s">com.mysql.cj.jdbc.Driver</span></code></pre></figure>

<p>í•„ìëŠ” <code class="language-plaintext highlighter-rouge">mysql.properties</code> ë¥¼ ë§Œë“¤ì–´, <code class="language-plaintext highlighter-rouge">application.properties</code>ì—</p>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="py">spring.config.import</span><span class="p">=</span><span class="s">classpath:mysql.properties</span></code></pre></figure>

<p>ë¥¼ ì¶”ê°€í•´ì¤¬ë‹¤.</p>

<p>ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ import í•´ì¤€ë‹¤. Spring Data ì—ì„œ ìì²´ì ìœ¼ë¡œ <strong>DataSource</strong> ë¼ëŠ” ì‹±ê¸€í†¤ ê°ì²´ì— ìš°ë¦¬ê°€ ì •ì˜í•œ spring.datasource í”„ë¡œí¼í‹°ë“¤ì„ í† ëŒ€ë¡œ ìë™ìœ¼ë¡œ <strong>connection</strong> ì„ ìƒì„±í•´ì¤€ë‹¤. ì´ë¥¼ log ì°ì–´ë³´ì.</p>

<h5 id="testing">Testing</h5>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenDatasourceAvailableWhenAccessDetailsThenExpectDetails</span><span class="o">()</span>
        <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">dataSource</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">())</span>
            <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"org.apache.tomcat.jdbc.pool.DataSource"</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">dataSource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">().</span><span class="na">getMetaData</span><span class="o">().</span><span class="na">getDatabaseProductName</span><span class="o">())</span>
            <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"MySQL"</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>ê¸°ë³¸ì ìœ¼ë¡œ ì˜ˆì™¸ ì²˜ë¦¬ ë˜í•œ ì¼ê´€ì„± ìˆê²Œ ì§€ì›í•´ì£¼ê¸° ë•Œë¬¸ì— ë©”ì„œë“œì— throws <strong>SQLException</strong> ë§Œ ë„£ì–´ì£¼ë©´ exception ì„ ë°›ì„ ìˆ˜ ìˆë‹¤. ì´ì œ ë°ì´í„° ë˜í•œ ë“¤ì–´ê°”ëŠ”ì§€ë¥¼ ì‚´í´ë³´ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenUserWhenGetUserNameByIdThenGetUser</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="k">try</span><span class="o">(</span>
            <span class="nc">Connection</span> <span class="n">cn</span> <span class="o">=</span> <span class="n">dataSource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>
            <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">cn</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"SELECT name FROM USERS WHERE id=1"</span><span class="o">);</span>
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
    <span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="n">assertThat</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"name"</span><span class="o">));</span>
        <span class="k">else</span>
            <span class="nf">fail</span><span class="o">(</span><span class="s">"No user found with id=1"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>í˜„ì¬ JPA Repositoryë¥¼ ë”°ë¡œ ì •ì˜í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì—, Spring Data JPAì˜ ê¸°ëŠ¥ì€ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆœìˆ˜ JDBC ë°©ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í–ˆë‹¤.</p>

<h4 id="spring-boot-postgresql-database-ë¡œ-ë³€ê²½í•´ë³´ê¸°">Spring Boot PostgreSQL Database ë¡œ ë³€ê²½í•´ë³´ê¸°</h4>

<p>Postgre ì „ìš© db ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„ì‹œ ì„œë²„ë¥¼ ì—°ë‹¤. <strong>í¬íŠ¸ëŠ” 5432</strong> ì´ë‹¤.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">docker run <span class="nt">--name</span> postgres-dev <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">POSTGRES_USER</span><span class="o">={</span>username<span class="o">}</span> <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">POSTGRES_PASSWORD</span><span class="o">={</span>password<span class="o">}</span> <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">POSTGRES_DB</span><span class="o">={</span>DB ì´ë¦„<span class="o">}</span> <span class="se">\</span>
  <span class="nt">-p</span> 5432:5432 <span class="se">\</span>
  <span class="nt">-d</span> postgres:15</code></pre></figure>

<p>ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤€ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">runtimeOnly</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">postgresql</span><span class="o">:</span><span class="n">postgresql</span><span class="err">'</span></code></pre></figure>

<h5 id="properties-ë¶„ë¦¬í•˜ê¸°">properties ë¶„ë¦¬í•˜ê¸°</h5>
<p>postgre ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì„¸íŒ… ê°’ì´ ë°”ë€Œì–´ì•¼ í•˜ë¯€ë¡œ postgres, mysql ë³„ë¡œ properties ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤.</p>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="c"># application-postgres.properties
# DB Initialize
</span><span class="py">spring.sql.init.schema-locations</span><span class="p">=</span><span class="s">classpath:db/postgres/schema.sql</span>
<span class="py">spring.sql.init.data-locations</span><span class="p">=</span><span class="s">classpath:db/postgres/data.sql</span>

<span class="c"># DataSource
</span><span class="py">spring.datasource.url</span><span class="p">=</span><span class="s">jdbc:postgresql://localhost:5432/{DB ì´ë¦„}</span>
<span class="py">spring.datasource.username</span><span class="p">=</span><span class="s">{username}</span>
<span class="py">spring.datasource.password</span><span class="p">=</span><span class="s">{password}</span>
<span class="py">spring.datasource.driver-class-name</span><span class="p">=</span><span class="s">org.postgresql.Driver</span></code></pre></figure>

<p>ìœ„ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤ê³  í•´ì„œ ìë™ìœ¼ë¡œ ì°¸ì¡°í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. application.propertiesì—ì„œ ë‹¤ìŒì„ ë„£ì–´ì£¼ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="c"># application.properties
</span><span class="py">spring.profiles.active</span><span class="p">=</span><span class="s">postgres</span></code></pre></figure>

<p>ì´ë ‡ê²Œ ë˜ë©´ db server ê°€ ë°”ë€” ë•Œë§ˆë‹¤ ì´ property ë§Œ ë°”ê¿”ì£¼ë©´ ë  í„°ì´ë‹¤.</p>

<h5 id="postgre-sql-ì‘ì„±">Postgre SQL ì‘ì„±</h5>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- shema.sql</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">USERS</span> <span class="p">(</span>
  <span class="n">id</span> <span class="nb">INT</span> <span class="k">GENERATED</span> <span class="n">ALWAYS</span> <span class="k">AS</span> <span class="k">IDENTITY</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
  <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
  <span class="n">email</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="p">);</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- data.sql</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">USERS</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
<span class="k">OVERRIDING</span> <span class="k">SYSTEM</span> <span class="n">VALUE</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'Alice'</span><span class="p">,</span> <span class="s1">'alice@example.com'</span><span class="p">)</span>
<span class="k">ON</span> <span class="n">CONFLICT</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span> <span class="k">DO</span> <span class="k">NOTHING</span><span class="p">;</span></code></pre></figure>

<h5 id="testing-1">Testing</h5>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenDatasourceAvailableWhenAccessDetailsThenExpectDetails</span><span class="o">()</span>
        <span class="kd">throws</span> <span class="nc">SQLException</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">dataSource</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">())</span>
            <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"org.apache.tomcat.jdbc.pool.DataSource"</span><span class="o">);</span>
<span class="c1">//		assertThat(dataSource.getConnection().getMetaData().getDatabaseProductName())</span>
<span class="c1">//				.isEqualTo("MySQL");</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">dataSource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">().</span><span class="na">getMetaData</span><span class="o">().</span><span class="na">getDatabaseProductName</span><span class="o">())</span>
            <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"PostgreSQL"</span><span class="o">);</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenUserWhenGetUserNameByIdThenGetUser</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="k">try</span><span class="o">(</span>
            <span class="nc">Connection</span> <span class="n">cn</span> <span class="o">=</span> <span class="n">dataSource</span><span class="o">.</span><span class="na">getConnection</span><span class="o">();</span>
            <span class="nc">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="n">cn</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"SELECT name FROM USERS WHERE id=1"</span><span class="o">);</span>
            <span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
    <span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="n">assertThat</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"name"</span><span class="o">));</span>
        <span class="k">else</span>
            <span class="nf">fail</span><span class="o">(</span><span class="s">"No user found with id=1"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>í…ŒìŠ¤íŠ¸ì—ì„œ ìˆ˜ì •í•  ë¶€ë¶„ì€ í•œê°€ì§€ ë¿ì´ë‹¤(ì°¾ì•„ë³´ì•„ë¼).</p>

<h3 id="spring-data-jpa-ì‚¬ìš©í•˜ê¸°">Spring Data JPA ì‚¬ìš©í•˜ê¸°</h3>

<p>ì½”ë“œì—ì„œë„ ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ëª…ë ¹ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê³ , ì´ë¥¼ JPAë¥¼ í†µí•´ í•œë‹¤ê³  ì‚¬ì „ì— ë³´ì•˜ì„ ê²ƒì´ë‹¤. ì—¬ê¸°ì„œëŠ” ì´ JPAì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ <strong>Persistence Provider</strong> ì˜ <strong>Repository</strong> ë¥¼ ë³¸ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Indexed</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Repository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="o">{</span> <span class="o">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">Repository</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ íŒŒë³´ë©´ ì œë„ˆë¦­ íƒ€ì… T, ID ê°€ ìˆìŒì„ ë³¼ ìˆ˜ ìˆë‹¤. ID ëŠ” í–‰ì„ êµ¬ë¶„í•˜ëŠ” ì¦‰, ë ˆì½”ë“œë¥¼ êµ¬ë¶„í•˜ëŠ” ì»¬ëŸ¼ ëª… í˜¹ì€ í•„ë“œ ëª…ì´ë‹¤. TëŠ” ì´ ID ì˜ íƒ€ì…ì„ ì„ ì–¸í•œë‹¤.</p>

<p>í•˜ì§€ë§Œ ë‚´ë¶€ëŠ” ë¹„ì–´ìˆëŠ”ê±¸ ë³¼ ìˆ˜ ìˆëŠ”ë° ì´ë¥¼ <strong><a href="#marker-interface">Marker Interface</a></strong> ë¼ê³  í•œë‹¤.</p>

<h4 id="crudrepository">CrudRepository</h4>

<p><code class="language-plaintext highlighter-rouge">Repository</code>ë¥¼ ìƒì† ë°›ëŠ” <code class="language-plaintext highlighter-rouge">CrudRepository</code>ë¥¼ ë³´ì. ìì£¼ ì‚¬ìš©í•˜ëŠ” ë†ˆì´ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@NoRepositoryBean</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Repository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="o">{</span>

	<span class="o">&lt;</span><span class="no">S</span> <span class="kd">extends</span> <span class="no">T</span><span class="o">&gt;</span> <span class="no">S</span> <span class="nf">save</span><span class="o">(</span><span class="no">S</span> <span class="n">entity</span><span class="o">);</span>

	<span class="o">&lt;</span><span class="no">S</span> <span class="kd">extends</span> <span class="no">T</span><span class="o">&gt;</span> <span class="nc">Iterable</span><span class="o">&lt;</span><span class="no">S</span><span class="o">&gt;</span> <span class="nf">saveAll</span><span class="o">(</span><span class="nc">Iterable</span><span class="o">&lt;</span><span class="no">S</span><span class="o">&gt;</span> <span class="n">entities</span><span class="o">);</span>

	<span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findById</span><span class="o">(</span><span class="no">ID</span> <span class="n">id</span><span class="o">);</span>

	<span class="kt">boolean</span> <span class="nf">existsById</span><span class="o">(</span><span class="no">ID</span> <span class="n">id</span><span class="o">);</span>

	<span class="nc">Iterable</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>

	<span class="nc">Iterable</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findAllById</span><span class="o">(</span><span class="nc">Iterable</span><span class="o">&lt;</span><span class="no">ID</span><span class="o">&gt;</span> <span class="n">ids</span><span class="o">);</span>

	<span class="kt">long</span> <span class="nf">count</span><span class="o">();</span>

	<span class="kt">void</span> <span class="nf">deleteById</span><span class="o">(</span><span class="no">ID</span> <span class="n">id</span><span class="o">);</span>

	<span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="no">T</span> <span class="n">entity</span><span class="o">);</span>

	<span class="kt">void</span> <span class="nf">deleteAllById</span><span class="o">(</span><span class="nc">Iterable</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="n">ids</span><span class="o">);</span>

	<span class="kt">void</span> <span class="nf">deleteAll</span><span class="o">(</span><span class="nc">Iterable</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">entities</span><span class="o">);</span>

	<span class="kt">void</span> <span class="nf">deleteAll</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<p>ë©”ì„œë“œ ëª…ì€ ì„¤ëª… ì•ˆí•´ë„ ë  ì •ë„ë¡œ ì§ê´€ì ì´ê³  ëª…í™•í•˜ë‹¤. ìœ„ ë©”ì„œë“œë¥¼ ë‹¤ ì§€ì›í•˜ë©°, êµ³ì´ ì´ë¥¼ ìƒì†í•˜ëŠ” êµ¬í˜„ì²´ì— ìœ„ ë©”ì„œë“œë¥¼ ë‹¤ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ìˆ˜ê³ ë¥¼ ëœ ìˆ˜ ìˆë‹¤.</p>

<p>ì´ì œ ì´ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë°, JVMì€ DB ìª½ ì„œë²„ì—ì„œ ì •ì˜ëœ ìŠ¤í‚¤ë§ˆë¥¼ ëª¨ë¥´ê¸°ì— Java ë‚´ì—ì„œ í•´ë‹¹ ë ˆì½”ë“œì™€ ë§ë¨¹ëŠ” í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤. ë‹¤ìŒì„ ì •ì˜í•˜ì.</p>

<h4 id="entity-ì™€-table">@Entity ì™€ @Table</h4>

<p>ì—”í‹°í‹°ëŠ” DBì˜ í•œ í…Œì´ë¸”ì— ë§¤í•‘ë˜ëŠ” <strong>ë„ë©”ì¸ ê°ì²´(ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸)</strong>ì´ë©°, ìŠ¤í‚¤ë§ˆì™€ 1:1ë¡œ ëŒ€ì‘ë  ìˆ˜ ìˆë„ë¡ ì •ì˜ëœë‹¤. <code class="language-plaintext highlighter-rouge">USERS</code> í…Œì´ë¸”ì— ëŒ€ì‘ë˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì—”í‹°í‹°ë¥¼ ë§Œë“¤ì–´ë³´ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">jakarta.persistence.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.*</span><span class="o">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"USERS"</span><span class="o">)</span>
<span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Integer</span> <span class="n">id</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">100</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">100</span><span class="o">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{}</span>
    <span class="kd">public</span> <span class="nf">User</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<blockquote>
  <p>NonNull ê³¼ Data ì–´ë…¸í…Œì´ì…˜ì€ í•„ìì˜ <a href="/seonghun120614/java/2025/06/09/lombok">Lombok</a> ê¸€ì„ ë³´ì.
<code class="language-plaintext highlighter-rouge">@NonNull</code>ê³¼ <code class="language-plaintext highlighter-rouge">@Data</code>ëŠ” Lombok ì• ë…¸í…Œì´ì…˜ì´ë©°, <code class="language-plaintext highlighter-rouge">@NonNull</code>ì€ ìƒì„±ì ì¸ìì— nullì´ ë“¤ì–´ì˜¤ì§€ ì•Šë„ë¡ ëŸ°íƒ€ì„ ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œë‹¤.<br />
<code class="language-plaintext highlighter-rouge">@Data</code>ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ <strong>Spring Data JPAëŠ” ìƒì„±ì ê¸°ë°˜ ê°ì²´ ìƒì„±ì„ í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì—</strong>, ëª…ì‹œì  ìƒì„±ìë¥¼ ì„ ì–¸í•´ì£¼ëŠ” ê²ƒì´ ì•ˆì •ì ì´ë‹¤.</p>
</blockquote>

<p>MySQL ê¸°ì¤€ìœ¼ë¡œ Java ì˜ íƒ€ì…ê³¼ DB ìŠ¤í‚¤ë§ˆì˜ í•„ë“œ íƒ€ì… ë§¤í•‘ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<ul>
  <li>INT - Integer, int</li>
  <li>BIGINT - Long</li>
  <li>VARCHAR(n) - String</li>
  <li>CHAR(n) - String</li>
  <li>TEXT, LONGTEXT - String</li>
  <li>BOOLEAN, TINYINT(1) - Boolean / boolean</li>
  <li>DATE - java.time.LocalDate</li>
  <li>DATETIME, TIMESTAMP - javatime.LocalDateTime</li>
  <li>DECIMAL, NUMERIC, FLOAT, DOUBLE - java.math.BigDecimal</li>
  <li>ì´ì§„ ê´€ë ¨ ë°ì´í„° - byte[]</li>
</ul>

<p><strong>ì£¼ì˜í•  ì </strong></p>
<blockquote>
  <p>int ëŠ” null ì„ í—ˆìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ìë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ” IDì˜ ê°’ê³¼ ì¶©ëŒ ê°€ëŠ¥ì„±ì´ ìˆë‹¤<br />
Integerì´ë‚˜ Longì„ ì‚¬ìš©í•˜ì—¬ nullì„ í—ˆìš©í•˜ê³  DB ìì²´ì— ì ‘ê·¼ì´ ë ë•Œ ë¯¸ì§€ì • ìƒíƒœë¡œ ë„£ì–´ì£¼ë©´ DBì—ì„œ ì•Œì•„ì„œ ì •ì˜í•´ì¤„ ê²ƒì´ë‹¤.</p>
</blockquote>

<p>ë”°ë¼ì„œ, Longì€ <strong>BIGINT AUTO_INCREMENT</strong> ì™€ë„ ê°™ê³ , Integerì€ <strong>INT AUTO_INCREMENT</strong>ì™€ ê°™ë‹¤. int ì˜ ì‚¬ìš©ì€ ë˜ë„ë¡ ì¼ë°˜ì ì¸ í•„ë“œì—ì„œë§Œ ì‚¬ìš©í•˜ë„ë¡ í•˜ì. ê·¸ë¦¬ê³  ì´ë¥¼ java ì—ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">@GeneratedValue(strategy = GenerationType.IDENTITY)</code>ë¥¼ ì¶”ê°€í•˜ì—¬ í•´ë‹¹ í•„ë“œê°€ AUTO_INCREMENT ì„ì„ íƒ€ í”„ë¡œê·¸ë˜ë¨¸ì™€ ì œ 3ìì—ê²Œ ì•Œë ¤ì£¼ì.</p>

<p>ë˜í•œ, <strong>PK, FK, ëˆ„ì ê°’ì— ëŒ€í•œ í•„ë“œì— ëŒ€í•´ì„œëŠ” Longì„ ì“°ëŠ” ê²ƒ</strong>ì´ ë” ë°”ëŒì§í•˜ë‹¤.</p>

<blockquote>
  <p>TEXT ê³„ì—´ì€ ì¸ë±ì‹± ì œí•œì´ ìˆê¸° ë•Œë¬¸ì— ê²€ìƒ‰ í•„ë“œë¡œëŠ” ì‚¬ìš© ì£¼ì˜ê°€ í•„ìš”í•˜ë‹¤.</p>
</blockquote>

<p><strong>GenerationValue</strong></p>
<ul>
  <li>GeneratedType.Table: DBì˜ <strong>AUTO_INCREMENTë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ </strong> JPA êµ¬í˜„ì²´ê°€ IDë¥¼ ì§ì ‘ ì¦ê°€ì‹œí‚¤ê¸° ìœ„í•´ ì§ì ‘ í‚¤ ìƒì„± ì „ìš© í…Œì´ë¸”ì„ ë§Œë“¤ì–´ì„œ ì‚¬ìš©, schema ì—ì„œ AUTO_INCREMENTë¥¼ ë¹¼ì•¼ í•¨.</li>
  <li>GeneratedType.Identity: DBì—ì„œ ìƒì„±ëœ ì‹ë³„ì ì»¬ëŸ¼ì—ì„œ ìƒì„±ëœ ê°’ì„ ê¸°ë³¸í‚¤ë¡œ ì‚¬ìš©</li>
  <li>GeneratedType.Sequence: ì´ë¦„ ê·¸ëŒ€ë¡œ JPA êµ¬í˜„ì²´ê°€ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ í‚¤ë¥¼ ìƒì„±í•˜ê³  ì´ë¥¼ ê¸°ë³¸í‚¤ë¡œ ì‚¬ìš©</li>
  <li>GeneratedType.Auto: JPA êµ¬í˜„ì²´ê°€ ê¸°ë³¸ í‚¤ ìƒã……ì–´ ë°©ì‹ì„ ìŠ¤ìŠ¤ë¡œ ê²°ì •</li>
</ul>

<p><strong>TIP</strong></p>
<blockquote>
  <p>ì–´ë…¸í…Œì´ì…˜ <code class="language-plaintext highlighter-rouge">@Column</code> ì— ìì²´ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">length</code> ë¼ëŠ” ì¸ìë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ”ë° ì´ë¥¼ ì„¤ì •í•´ì£¼ëŠ” ê±¸ë¡œ VARCHAR ì˜ ê¸¸ì´ì™€ ë§¤í•‘ì´ ëœë‹¤.</p>
</blockquote>

<p>Javaì—ëŠ” <code class="language-plaintext highlighter-rouge">String</code>ì´ <code class="language-plaintext highlighter-rouge">null</code> ê°’ì„ ê°€ì§ˆ ìˆ˜ë„ ìˆëŠ”ë°, ì´ë¥¼ ì œì–´í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">@Column(nullable = false)</code> ë¥¼ í•´ì£¼ë©´ ë¬´ì¡°ê±´ ì…ë ¥í•˜ë„ë¡ í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤(<code class="language-plaintext highlighter-rouge">unique</code> ì¸ìë„ ìˆìŒ).</p>

<p>ì´ì œ ì •ì˜ëœ Entity ë¥¼ Table Schemaì™€ ì—°ê²°ì‹œí‚¤ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"USERS"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span></code></pre></figure>

<p>ì´ì œ JPA ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì¤€ë¹„ê°€ ëë‚¬ë‹¤(<code class="language-plaintext highlighter-rouge">Repository</code> ì‚¬ìš© ì¤€ë¹„ ë).</p>

<h4 id="crudrepositoryë¥¼-í™œìš©í•œ-user-table-schema-êµ¬í˜„">CrudRepositoryë¥¼ í™œìš©í•œ User Table Schema êµ¬í˜„</h4>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">com.example.study.dao.entity.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.repository.CrudRepository</span><span class="o">;</span>

<span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserRepository</span> <span class="kd">extends</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span> <span class="o">}</span></code></pre></figure>

<p>ì´ì œ JPA ì—ì„œ ì œê³µí•˜ëŠ” <strong>CRUD, ì¿¼ë¦¬ ë©”ì„œë“œ</strong>ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤. ë‚˜ë¨¸ì§€ í•„ìš”í•œ ë©”ì„œë“œëŠ” ì„œë¹„ìŠ¤ê°€ ìš”êµ¬í•˜ëŠ” ìƒí™©ì— ë§ì¶° ê·¸ë•Œê·¸ë•Œ ì¶”ê°€í•´ì£¼ëŠ”ê²Œ ë°”ëŒì§í•˜ë‹¤.</p>

<h4 id="jpa-ì™€-sql-ì‚¬ì´ì˜-db-ì´ˆê¸°í™”-ê³ ì°°">JPA ì™€ sql ì‚¬ì´ì˜ DB ì´ˆê¸°í™” ê³ ì°°</h4>

<p>ì´ì œ í”„ë¡œí¼í‹°ì— ê´€í•´ì„œ ë³´ì. ì•ì„œ ë´¤ë“¯ì´ ìš°ë¦¬ëŠ” sql ë¬¸ì„ í†µí•´ ì´ˆê¸° ë°ì´í„°ë“¤ì„ ì •ì˜í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í–ˆëŠ”ë° ê·¸ë ‡ë‹¤ë©´, ë‹¨ìˆœ SQL íŒŒì¼ì´ ì•„ë‹Œ JPA ìì²´ë¥¼ í†µí•´ì„œë„ ì´ˆê¸° ë°ì´í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ í•˜ëŠ” ì˜ë¬¸ì´ ìƒê¸´ë‹¤.</p>

<p>sqlë¡œ ìˆ˜í–‰í•  ë•Œ, ë‹¤ìŒ properties ë“¤ì„ ì¼ë‹¤:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">spring.jpa.hibernate.ddl-auto</code>: JPAê°€ ddlì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•  ì§€ì— ëŒ€í•´ ëª…ì‹œ
    <ul>
      <li>create-drop ì€ ì—”í‹°í‹°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í…Œì´ë¸” ìƒì„±</li>
      <li>create ëŠ” ì—”í„°í‹°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒˆ í…Œì´ë¸” ìƒì„±(ê¸°ì¡´ í…Œì´ë¸” ëª¨ë‘ ì‚­ì œ)</li>
      <li>update ëŠ” ì—”í„°í‹°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤í‚¤ë§ˆë¥¼ ì—…ë°ì´íŠ¸í•˜ë©° ê¸°ì¡´ í…Œì´ë¸”ì´ ìˆë‹¤ë©´ ìˆ˜ì •í•˜ê³  ì—†ìœ¼ë©´ ìƒì„±</li>
      <li>validate ëŠ” í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ìŠ¤í‚¤ë§ˆê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸</li>
      <li>none ì€ Hibernate ê°€ ì „í˜€ ìŠ¤í‚¤ë§ˆë¥¼ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">spring.sql.init.mode</code>: <code class="language-plaintext highlighter-rouge">schema.sql</code>/<code class="language-plaintext highlighter-rouge">data.sql</code> ì‹¤í–‰ ì—¬ë¶€ ì œì–´</li>
</ul>

<p>ì´ì œ ì´ë¥¼ ì¡°ê¸ˆ ë°”ê¿”ê°€ë©´ì„œ ì¼€ì´ìŠ¤ë§ˆë‹¤ ì–´ë–¤ í”„ë¡œí¼í‹° ê°’ì„ ê°€ì§€ê²Œ í•´ì•¼í• ì§€ ì •ë¦¬í•´ë³´ì.</p>

<h5 id="case-1-jpaê°€-í…Œì´ë¸”ì„-ë§Œë“¤ê³ -sqlì€-ì´ˆê¸°-ë°ì´í„°ë§Œ-ì‚½ì…">Case 1: JPAê°€ í…Œì´ë¸”ì„ ë§Œë“¤ê³ , SQLì€ ì´ˆê¸° ë°ì´í„°ë§Œ ì‚½ì…</h5>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="py">spring.jpa.hibernate.ddl-auto</span><span class="p">=</span><span class="s">create</span>
<span class="py">spring.sql.init.mode</span><span class="p">=</span><span class="s">always</span></code></pre></figure>

<p>createëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ í…Œì´ë¸”ì„ ëª¨ë‘ <strong>ë“œë¡­ í›„ ì¬ìƒì„±</strong>í•˜ëŠ” ì„¤ì •ì´ë‹¤.<br />
ì¦‰, ê¸°ì¡´ ë°ì´í„°ëŠ” <strong>ë§¤ë²ˆ ì‚­ì œ</strong>ë˜ë©°, í…ŒìŠ¤íŠ¸ë‚˜ ê°œë°œ ì´ˆê¸°ì—ë§Œ ì‚¬ìš©í•˜ê¸° ì í•©í•˜ë‹¤.</p>

<p>ì´ ì„¤ì •ì—ì„œëŠ” JPAê°€ ì§ì ‘ ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•˜ë¯€ë¡œ, <code class="language-plaintext highlighter-rouge">schema.sql</code>ì€ ë¬´ì‹œë˜ê³  ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.<br />
ë‹¤ë§Œ <code class="language-plaintext highlighter-rouge">data.sql</code>ì€ <strong>JPAê°€ í…Œì´ë¸” ìƒì„±ì„ ì™„ë£Œí•œ í›„ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—</strong> ì´ˆê¸° ë°ì´í„° ì‚½ì… ìš©ë„ë¡œëŠ” ìœ íš¨í•˜ë‹¤.</p>

<h5 id="case-2-sqlë¡œ-í…Œì´ë¸”ì„-ì •ì˜í•˜ê³ -jpaëŠ”-ê±´ë“¤ì§€-ì•ŠìŒ">Case 2: SQLë¡œ í…Œì´ë¸”ì„ ì •ì˜í•˜ê³ , JPAëŠ” ê±´ë“¤ì§€ ì•ŠìŒ</h5>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="py">spring.jpa.hibernate.ddl-auto</span><span class="p">=</span><span class="s">none</span>
<span class="py">spring.sql.init.mode</span><span class="p">=</span><span class="s">always</span></code></pre></figure>

<p>SQL íŒŒì¼ì— ëª¨ë“  í…Œì´ë¸”ê³¼ ì´ˆê¸° ë°ì´í„°ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤. ë³´í†µ ì‹¤ë¬´ì—ì„œ ë§ì´ ì‚¬ìš©í•œë‹¤.</p>

<h5 id="case-3-ë‘˜-ë‹¤-ì‚¬ìš©í–ˆì§€ë§Œ-ì¶©ëŒ-ë°œìƒ-ê°€ëŠ¥">Case 3: ë‘˜ ë‹¤ ì‚¬ìš©í–ˆì§€ë§Œ ì¶©ëŒ ë°œìƒ ê°€ëŠ¥</h5>

<p>updateëŠ” JPA ê¸°ì¤€ìœ¼ë¡œ í…Œì´ë¸”ì„ ìˆ˜ì •í•˜ë ¤ê³  ì‹œë„í•˜ë©°, ë™ì‹œì— <code class="language-plaintext highlighter-rouge">schema.sql</code>ì´ ì ìš©ë˜ë©´
ì„œë¡œì˜ êµ¬ì¡°ê°€ ì¶©ëŒí•  ìˆ˜ ìˆë‹¤. íŠ¹íˆ ì»¬ëŸ¼ ì¤‘ë³µ, íƒ€ì… ë¶ˆì¼ì¹˜ ì‹œ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥í•˜ë‹¤.</p>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="py">spring.jpa.hibernate.ddl-auto</span><span class="p">=</span><span class="s">update</span>
<span class="py">spring.sql.init.mode</span><span class="p">=</span><span class="s">always</span></code></pre></figure>

<p>ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µê³  ì˜ˆì¸¡ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë¹„ì¶”ì²œ</p>

<h5 id="case-4-í…ŒìŠ¤íŠ¸-í™˜ê²½ì—ì„œë§Œ-ì´ˆê¸°í™”">Case 4: í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œë§Œ ì´ˆê¸°í™”</h5>

<p>ë‚´ì¥ DB ì „ìš©ì´ë‹¤.</p>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="py">spring.jpa.hibernate.ddl-auto</span><span class="p">=</span><span class="s">create</span>
<span class="py">spring.sql.init.mode</span><span class="p">=</span><span class="s">embedded</span></code></pre></figure>

<p>ë‚´ì¥ DBì¼ ë•Œë§Œ, <code class="language-plaintext highlighter-rouge">schema.sql</code>, <code class="language-plaintext highlighter-rouge">data.sql</code>ì´ ì‹¤í–‰ë˜ê³ ,<br />
ì‹¤ì œ <strong>MySQL</strong>ì´ë‚˜ <strong>PostgreSQL</strong>ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">schema.sql</code>, <code class="language-plaintext highlighter-rouge">data.sql</code>ì´ ë¬´ì‹œëœë‹¤.</p>

<p>ì„œë²„ë¥¼ ì˜¬ë¦¬ê³  ë‚˜ì„œëŠ” JPAë¥¼ ê¸°ì¤€ìœ¼ë¡œ ëŒì•„ê°€ê²Œ ëœë‹¤.</p>

<h4 id="testing-2">Testing</h4>

<p>í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê¸° ì „ì— ìœ„ì˜ ê²½ìš°ë“¤ì— ë§ì¶° í”„ë¡œí¼í‹°ë¥¼ ì„¤ì •í•´ì£¼ê¸¸ ë°”ë€ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">com.example.study.dao.entity.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">jupiter</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.*;</span>

<span class="nd">@SpringBootTest</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserRepositoryTest</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenCreateUserWhenLoadTheUserThenExpectExistedUser</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"IU"</span><span class="o">,</span> <span class="s">"1234"</span><span class="o">);</span>

        <span class="n">userRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>

        <span class="n">assertEquals</span><span class="o">(</span><span class="s">"IU"</span><span class="o">,</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">1L</span><span class="o">).</span><span class="na">orElseThrow</span><span class="o">(</span>
                <span class="o">()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">AssertionError</span><span class="o">(</span><span class="s">"User not found"</span><span class="o">)</span>
        <span class="o">).</span><span class="na">getName</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenCreateUserWhenLoadTheUserThenExpectSameUser</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"Alice"</span><span class="o">,</span> <span class="s">"alice@alice.co.kr"</span><span class="o">);</span> <span class="c1">// ì—¬ê¸°ì„  user id ê°€ null ì´ì§€ë§Œ</span>
        <span class="nc">User</span> <span class="n">savedUser</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span> <span class="c1">// ì—¬ê¸°ì„œëŠ” user idê°€ ìë™ ì„¤ì •ë¨</span>

        <span class="n">assertEquals</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="n">savedUser</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenUpdateUserWhenLoadTheUserThenExpectUpdatedUser</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">1L</span><span class="o">)</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">AssertionError</span><span class="o">(</span><span class="s">"User not found"</span><span class="o">));</span>

        <span class="n">user</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"Bob"</span><span class="o">);</span>
        <span class="n">userRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>

        <span class="nc">User</span> <span class="n">foundUser</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">1L</span><span class="o">).</span><span class="na">get</span><span class="o">();</span>

        <span class="n">assertNotEquals</span><span class="o">(</span><span class="s">"IU"</span><span class="o">,</span> <span class="n">foundUser</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="s">"Bob"</span><span class="o">,</span> <span class="n">foundUser</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenDeleteUserWhenLoadTheUserThenExpectNoUser</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">total</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">count</span><span class="o">();</span>
        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="mi">1L</span><span class="o">)</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">AssertionError</span><span class="o">(</span><span class="s">"User not found"</span><span class="o">));</span>

        <span class="n">userRepository</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">total</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span><span class="n">userRepository</span><span class="o">.</span><span class="na">count</span><span class="o">());</span>

        <span class="n">userRepository</span><span class="o">.</span><span class="na">deleteAll</span><span class="o">();</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="mi">0L</span><span class="o">,</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">count</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ì „ë¶€ í†µê³¼í•´ì•¼ í•œë‹¤.</p>

<h4 id="pagingandsortingrepository-ë¥¼-í™œìš©í•œ-í˜ì´ì§•">PagingAndSortingRepository ë¥¼ í™œìš©í•œ í˜ì´ì§•</h4>

<p>ì–´ë–¤ ì‡¼í•‘ëª°ì´ë“  ê²Œì‹œë¬¼ë“¤ì´ë˜ 1000ë§Œ ê°œì˜ í¬ìŠ¤íŠ¸ë‚˜ ê¸€ë“¤ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì€ êµ‰ì¥íˆ ë¬´ê±°ìš´ ì‘ì—…ì´ë‹¤. ë”°ë¼ì„œ ë§ì€ ì–‘ì˜ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ í˜ì´ì§€ë¡œ ì˜ê²Œ ë‚˜ëˆ ì„œ ì¡°íšŒí•œë‹¤ë©´ page ë§Œí¼ì˜ ì–‘ë§Œ ì¡°íšŒí•˜ê¸° ë•Œë¬¸ì— íš¨ìœ¨ì ì´ê²Œ ëœë‹¤. ì´ëŸ° ê¸°ìˆ ì„ <strong>Paging</strong> ì´ë¼ê³  í•œë‹¤.</p>

<p>ìŠ¤í”„ë§ ë°ì´í„°ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">PagingAndSoringRepository</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ë©°, <code class="language-plaintext highlighter-rouge">Repository</code> ë¥¼ ìƒì† ë°›ëŠ” í´ë˜ìŠ¤ì´ë‹¤.</p>

<h5 id="crudrepository-ì™€-pagingandsortingrepository-ë¥¼-í†µí•œ-í¬ìŠ¤íŠ¸-ì¡°íšŒ">CrudRepository ì™€ PagingAndSortingRepository ë¥¼ í†µí•œ í¬ìŠ¤íŠ¸ ì¡°íšŒ</h5>

<p>í•˜ê¸° ì „ì— ìƒˆë¡œìš´ ì—”í‹°í‹°ë¥¼ ë‹¤ë£¨ì. Paging ê¸°ëŠ¥ì„ ê·¹í•œìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” ê³³ì€ ê²Œì‹œê¸€, ìƒí’ˆ ê¸€ë“¤ ë³´ê¸° ë“±ë“± ì¼ ê²ƒì´ë‹¤. í•„ìëŠ” ê²Œì‹œê¸€ë¡œ Post ì—”í‹°í‹°ë¥¼ ì •ì˜í•œë‹¤. ì •ì˜í•˜ê¸° ì „ì— low-levelì˜ DB ë‹¨ì—ì„œ schema ë¥¼ ì •ì˜í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-mysql" data-lang="mysql">DROP TABLE IF EXISTS USERS;
DROP TABLE IF EXISTS POSTS;

CREATE TABLE USERS (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(100),
  email VARCHAR(100)
);

CREATE TABLE POSTS (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  created_at DATETIME NOT NULL,
  title VARCHAR(50),
  content TEXT
);</code></pre></figure>

<p>ì´ˆê¸° ë°ì´í„°ë„ ì‚½ì…í•´ì¤€ë‹¤(ë¬¼ë¡  í•„ìëŠ” <code class="language-plaintext highlighter-rouge">init.mode</code> ê°€ <code class="language-plaintext highlighter-rouge">never</code> ì´ì§€ë§Œ ë„£ì–´ì¤¬ë‹¤).</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="no">INSERT</span> <span class="no">INTO</span> <span class="nf">USERS</span> <span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">email</span><span class="o">)</span>
<span class="no">SELECT</span> <span class="err">'</span><span class="nc">Alice</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="n">alice</span><span class="nd">@example</span><span class="o">.</span><span class="na">com</span><span class="err">'</span><span class="o">;</span>

<span class="no">INSERT</span> <span class="no">INTO</span> <span class="nf">POSTS</span> <span class="o">(</span><span class="n">time</span><span class="o">,</span> <span class="n">title</span><span class="o">,</span> <span class="n">content</span><span class="o">)</span>
<span class="no">VALUES</span> <span class="o">(</span><span class="no">NOW</span><span class="o">(),</span> <span class="err">'</span><span class="nc">Spring</span> <span class="nc">Boot</span> <span class="nc">Intro</span><span class="err">'</span><span class="o">,</span> <span class="err">'</span><span class="nc">This</span> <span class="n">is</span> <span class="n">the</span> <span class="n">content</span> <span class="n">of</span> <span class="n">the</span> <span class="n">post</span><span class="o">.</span><span class="err">'</span><span class="o">);</span></code></pre></figure>

<p>í¬ìŠ¤íŠ¸ë¥¼ ì„ ì–¸í•˜ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.example.study.dao.entity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">jakarta.persistence.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.time.*</span><span class="o">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"POSTS"</span><span class="o">)</span>
<span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Post</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Lob</span>
    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">createdAt</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">length</span> <span class="o">=</span> <span class="mi">50</span><span class="o">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Post</span><span class="o">()</span> <span class="o">{}</span>

    <span class="kd">public</span> <span class="nf">Post</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">LocalDateTime</span> <span class="n">createdAt</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">title</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">content</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">createdAt</span> <span class="o">=</span> <span class="n">createdAt</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">content</span> <span class="o">=</span> <span class="n">content</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>ì´ì œ Repositoryë¥¼ ì„ ì–¸í•´ì¤€ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">com.example.study.dao.entity.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.repository.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>

<span class="nd">@Repository</span>
<span class="kn">import</span> <span class="nn">com.example.study.dao.entity.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.repository.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>

<span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">PostRepository</span> <span class="kd">extends</span> <span class="nc">PagingAndSortingRepository</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;,</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span> <span class="o">}</span></code></pre></figure>

<p>í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">com.example.study.dao.entity.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.time.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">jupiter</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.*;</span>

<span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">PostRepositoryTest</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="nc">PostRepository</span> <span class="n">postRepository</span><span class="o">;</span>

    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">readPostWhenLoadThePostThenExpectExistedPost</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// given</span>
        <span class="nc">Post</span> <span class="n">post1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Post</span><span class="o">(</span>
                <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2025</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
                <span class="s">"Spring Boot Intro"</span><span class="o">,</span> <span class="s">"Introduction to Spring Boot"</span>
        <span class="o">);</span>
        <span class="nc">Post</span> <span class="n">post2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Post</span><span class="o">(</span>
                <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2025</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
                <span class="s">"JPA Basics"</span><span class="o">,</span> <span class="s">"Learn JPA with Spring"</span>
        <span class="o">);</span>
        <span class="nc">Post</span> <span class="n">post3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Post</span><span class="o">(</span>
                <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2025</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
                <span class="s">"Testing with JUnit"</span><span class="o">,</span> <span class="s">"Unit testing guide"</span>
        <span class="o">);</span>
        <span class="nc">Post</span> <span class="n">post4</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Post</span><span class="o">(</span>
                <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2025</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
                <span class="s">"REST API"</span><span class="o">,</span> <span class="s">"Building REST APIs"</span>
        <span class="o">);</span>
        <span class="nc">Post</span> <span class="n">post5</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Post</span><span class="o">(</span>
                <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2025</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
                <span class="s">"Spring Security"</span><span class="o">,</span> <span class="s">"Securing applications"</span>
        <span class="o">);</span>
        <span class="nc">Post</span> <span class="n">post6</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Post</span><span class="o">(</span>
                <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2025</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
                <span class="s">"Advanced JPA"</span><span class="o">,</span> <span class="s">"Advanced JPA techniques"</span>
        <span class="o">);</span>
        <span class="n">postRepository</span><span class="o">.</span><span class="na">saveAll</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">post1</span><span class="o">,</span> <span class="n">post2</span><span class="o">,</span> <span class="n">post3</span><span class="o">,</span> <span class="n">post4</span><span class="o">,</span> <span class="n">post5</span><span class="o">,</span> <span class="n">post6</span><span class="o">));</span>
        <span class="nc">Pageable</span> <span class="n">pageable</span> <span class="o">=</span> <span class="nc">PageRequest</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span>

        <span class="c1">// when</span>
        <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="n">page</span> <span class="o">=</span> <span class="n">postRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">pageable</span><span class="o">);</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">page</span><span class="o">.</span><span class="na">getNumber</span><span class="o">());</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="n">page</span><span class="o">.</span><span class="na">getSize</span><span class="o">());</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="n">page</span><span class="o">.</span><span class="na">getNumberOfElements</span><span class="o">());</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="n">page</span><span class="o">.</span><span class="na">getTotalElements</span><span class="o">());</span>

        <span class="c1">// then</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="n">posts</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="na">getContent</span><span class="o">();</span>
        <span class="n">assertTrue</span><span class="o">(</span><span class="n">posts</span><span class="o">.</span><span class="na">stream</span><span class="o">().</span><span class="na">anyMatch</span><span class="o">(</span><span class="n">post</span> <span class="o">-&gt;</span>
                        <span class="n">post</span><span class="o">.</span><span class="na">getId</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="mi">1L</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">post</span><span class="o">.</span><span class="na">getTitle</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"Spring Boot Intro"</span><span class="o">)),</span>
                <span class="s">"IDê°€ 1ì´ê³  ì œëª©ì´ 'Spring Boot Intro'ì¸ Postê°€ ì¡´ì¬í•´ì•¼ í•œë‹¤."</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h5 id="datajpatestì™€-autoconfiguretestdatabase-ë¥¼-í™œìš©í•œ-í…ŒìŠ¤íŒ…">@DataJpaTestì™€ @AutoConfigureTestDatabase ë¥¼ í™œìš©í•œ í…ŒìŠ¤íŒ…</h5>

<p>ìš°ë¦¬ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ í•  ë•Œ í•­ìƒ <code class="language-plaintext highlighter-rouge">IoC</code> ì— <code class="language-plaintext highlighter-rouge">Bean</code> ì„ ì „ë¶€ ë“±ë¡í•˜ê³ , ë‹¤ ë“±ë¡ëœ í›„ì—ì•¼ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì— ëŒ€í•´ì„œëŠ” í…ŒìŠ¤íŠ¸ í•  ì»´í¬ë„ŒíŠ¸ì™€ ì˜ì¡´ì ì¸ ì»´í¬ë„ŒíŠ¸ë§Œ ì˜¬ë¦¬ë©´ã„· ë˜ì§€ë§Œ, ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ê¹Œì§€ ì˜¬ë ¤ë²„ë¦¬ê¸° ë•Œë¬¸ì— êµ‰ì¥íˆ ë¹„íš¨ìœ¨ì ì´ë‹¤. ë”°ë¼ì„œ ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ Spring ì—ì„œëŠ” Data ì— ëŒ€í•œ ì»´í¬ë„ŒíŠ¸ ë¼ë¦¬ì˜ í…ŒìŠ¤íŠ¸ ì»¨í…ìŠ¤íŠ¸ë¥¼ êµ¬ë¶„ì‹œì¼œì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì§€ì›í•´ì¤€ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">DataJpaTest</code> ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì–´ë…¸í…Œì´ì…˜ì„ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ë ˆë²¨ì— ë¶™ì—¬ì¤€ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@DataJpaTest</span>
<span class="nd">@AutoConfigureTestDatabase</span><span class="o">(</span><span class="n">replace</span> <span class="o">=</span> <span class="nc">AutoConfigureTestDatabase</span><span class="o">.</span><span class="na">Replace</span><span class="o">.</span><span class="na">NONE</span><span class="o">)</span></code></pre></figure>

<p>ì—¬ê¸°ì„œ <code class="language-plaintext highlighter-rouge">AutoConfigureTestDatabase</code> ì˜ ì—­í• ì€ ê¸°ë³¸ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ìˆ˜ì¤€ì—ì„œì˜ DBëŠ” In-memory ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ì´ê±¸ ì°¸ì¡°í•˜ëŠ” í”„ë¡œí¼í‹°ë¥¼ ë¹„í™œì„±í™” í•´ì£¼ì–´ì•¼ í•œë‹¤. ì´ëŠ” <code class="language-plaintext highlighter-rouge">AutoConfigureTestDataBase</code> ë¥¼ í†µí•´ í•´ë‹¹ ì¸ë©”ëª¨ë¦¬ DB ë¡œì˜ ëŒ€ì²´ë¥¼ ë¹„í™œì„±í™”í•´ì£¼ëŠ” í”„ë¡œí¼í‹°ë¥¼ ë„£ì–´ì£¼ë©´ <code class="language-plaintext highlighter-rouge">application.properties</code> ì˜ DB êµ¬ì„± ì„¤ì •ì„ ë”°ë¥´ê²Œ ëœë‹¤.</p>

<h5 id="datajpatest-ì™€-activeprofiles-ë¥¼-í™œìš©í•œ-í…ŒìŠ¤íŒ…">@DataJpaTest ì™€ @ActiveProfiles ë¥¼ í™œìš©í•œ í…ŒìŠ¤íŒ…</h5>

<p>ìŠ¤í”„ë§ ë°ì´í„°ì—ì„œ ìë™ìœ¼ë¡œ ì„¤ì •í•´ì£¼ëŠ” í…ŒìŠ¤íŠ¸ í™˜ê²½ìœ¼ë¡œ í•˜ê¸°ê°€ ì‹«ì„ ë•Œ, properties ê°€ ì´ë¯¸ test í™˜ê²½ì— ëŒ€í•œ êµ¬ì„± ì„¤ì • properties íŒŒì¼ì´ ìˆì„ ë•ŒëŠ” ë‹¤ìŒ ì–´ë…¸í…Œì´ì…˜ @ActiveProfiles ì„ ì‚¬ìš©í•˜ì—¬ ìš°ë¦¬ê°€ db properties ë¥¼ ì„¤ì •ë§Œìœ¼ë¡œ ë°”ê¾¸ ë“¯ì´ ì—¬ê¸°ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">...</span>

<span class="nd">@DataJpaTest</span>
<span class="nd">@ActiveProfiles</span><span class="o">(</span><span class="s">"test"</span><span class="o">)</span> <span class="c1">// application-test.properties ë¡œë“œ</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PostRepositoryTest</span> <span class="o">{</span>
    <span class="o">...</span>
<span class="o">}</span></code></pre></figure>

<p>ì´ì œ <code class="language-plaintext highlighter-rouge">application-test.properties</code> ë¥¼ ì„¤ì •í•´ì£¼ë„ë¡ í•˜ì.</p>

<h3 id="spring-custom-repository">Spring Custom Repository</h3>

<p>ì‹¤ë¬´ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">CRUD</code> ê¸°ëŠ¥ë“¤ ì¤‘ì— frontì—ê²Œ êµ³ì´ ë…¸ì¶œí•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” APIëŠ” ìˆ¨ê²¨ì•¼ í•œë‹¤. ìŠ¤í”„ë§ ë°ì´í„°ì˜ ë ˆí¬ì§€í† ë¦¬ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë„ë©”ì¸ ê°ì²´ë¥¼ ê´€ë¦¬í•˜ì§€ë§Œ, ì´ ì¸í„°í˜ì´ìŠ¤ë“¤ì„ ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ êµ¬í˜„ì‹œí‚¤ë„ë¡ í•œë‹¤.</p>

<p>ì´ëŠ” ê·¼ë³¸ì ì¸ <code class="language-plaintext highlighter-rouge">Repository</code> ë¥¼ ë¨¼ì € ìƒì†í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬, ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ë“¤ì–´ create, read ë§Œ êµ¬í˜„í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ê·¼ë³¸ <code class="language-plaintext highlighter-rouge">repository</code> ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.springframework.data.repository.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BaseRepository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Repository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="o">&lt;</span><span class="no">S</span> <span class="kd">extends</span> <span class="no">T</span><span class="o">&gt;</span> <span class="no">S</span> <span class="nf">save</span><span class="o">(</span><span class="no">S</span> <span class="n">entity</span><span class="o">);</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<h4 id="norepositorybean-ì• ë„ˆí…Œì´ì…˜">@NoRepositoryBean ì• ë„ˆí…Œì´ì…˜</h4>
<p>ì—¬ê¸°ì„œ ìœ„ì²˜ëŸ¼ interfaceë¥¼ ì„ ì–¸í•˜ê³  ì„œë¹„ìŠ¤ë¥¼ êµ¬ë™í•˜ë©´ <code class="language-plaintext highlighter-rouge">BaseRepository</code> ë¼ëŠ” ë¹ˆì´ ìƒì„±ë  ê²ƒì´ë‹¤. ì¦‰ êµ¬í˜„ì²´ê°€ ë§Œë“¤ì–´ì§„ë‹¤. ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">@NoRepositoryBean</code> ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ì„œ ì´ë¥¼ ë‚´ë ¤ì£¼ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.example.study.dao</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.repository.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BaseRepository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Repository</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">ID</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="o">&lt;</span><span class="no">S</span> <span class="kd">extends</span> <span class="no">T</span><span class="o">&gt;</span> <span class="no">S</span> <span class="nf">save</span><span class="o">(</span><span class="no">S</span> <span class="n">entity</span><span class="o">);</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<h3 id="spring-data-query">Spring Data Query</h3>

<p>ìŠ¤í”„ë§ ë°ì´í„°ì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">Repository</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ê¸°ë³¸ <code class="language-plaintext highlighter-rouge">CRUD</code> ì¿¼ë¦¬ë¥¼ ì œê³µí•´ì£¼ì§€ë§Œ, ì´ë³´ë‹¤ ë” ë§ê³  ë‹¤ì–‘í•œ ì¿¼ë¦¬ë“¤ì„ ì •ì˜í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆë‹¤. ì—”í‹°í‹°ì˜ í”„ë¡œí¼í‹°ì— ì¡°ê±´ì„ ê±¸ì–´ì„œ ì¡°íšŒí•˜ê±°ë‚˜ í•˜ë‚˜ ì´ìƒì˜ í”„ë¡œí¼í‹°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ ì¡°íšŒ ê°™ì€ ê²ƒë„ í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆë‹¤. ìŠ¤í”„ë§ ë°ì´í„°ëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ë²•ì„ ì§€ì›í•œë‹¤.</p>

<ul>
  <li>Query Method: ì¸í„°í˜ì´ìŠ¤ì— ë©”ì„œë“œì˜ ì´ë¦„ì„ íŒ¨í„´ì— ë§ê²Œ ì‘ì„±í•˜ë©´ ìŠ¤í”„ë§ ë°ì´í„°ê°€ ì•Œì•„ì„œ íŒŒì‹±í•˜ì—¬ ë§ëŠ” ì¿¼ë¦¬ ë§Œë“¤ì–´ëƒ„</li>
  <li>ì„ ì–¸ì  Query: í•„ìš”í•œ ì¿¼ë¦¬ë¬¸ì„ ì§ì ‘ ì‘ì„±í•´ì„œ ì „ë‹¬í•´ì£¼ë©´ ìŠ¤í”„ë§ ë°ì´í„°ê°€ ì´ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰</li>
</ul>

<h4 id="query-methods">Query Methods</h4>

<p>Query Methods ëŠ” ìŠ¤í”„ë§ ë°ì´í„°ì—ì„œ ì£¼ëŠ” íŒ¨í„´ë§Œ ì˜ ë”°ë¥´ë„ë¡ ë©”ì„œë“œë¥¼ ì •ì˜í•˜ë©´ ì•Œì•„ì„œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œë‹¤.</p>

<blockquote>
  <p>[ì¿¼ë¦¬ íŒ¨í„´][ì†ì„± ì´ë¦„][ì¡°íšŒ í‚¤ì›Œë“œ][ì—°ê²°ì][ì¡°ê±´]</p>
</blockquote>

<p>ë‹¤ìŒ ê·œì¹™ì„ ê°€ì§€ë©°, ë³´í†µ ë§¨ ì•ì˜ ì¿¼ë¦¬ íŒ¨í„´ì—ëŠ” ë‹¤ìŒì´ ì˜¬ ìˆ˜ ìˆë‹¤.</p>

<h5 id="query-patternprefix">Query Pattern(Prefix)</h5>

<table>
  <thead>
    <tr>
      <th>ì¿¼ë¦¬ íŒ¨í„´(Prefix)</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">findBy</code></td>
      <td>ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë¥¼ ì¡°íšŒí•¨ (ê°€ì¥ ì¼ë°˜ì )</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">getBy</code></td>
      <td><code class="language-plaintext highlighter-rouge">findBy</code>ì™€ ìœ ì‚¬í•˜ì§€ë§Œ, ë°˜ë“œì‹œ ê²°ê³¼ê°€ ìˆì–´ì•¼ í•¨ì„ ì•”ì‹œ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">readBy</code></td>
      <td><code class="language-plaintext highlighter-rouge">findBy</code>ì™€ ìœ ì‚¬, ì½ê¸° ë™ì‘ ê°•ì¡°</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">queryBy</code></td>
      <td>ì¿¼ë¦¬ ìˆ˜í–‰ì˜ ì˜ë„ë¥¼ ê°•ì¡°í•˜ëŠ” í‘œí˜„</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">countBy</code></td>
      <td>ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">existsBy</code></td>
      <td>ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ ë°˜í™˜ (boolean)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">deleteBy</code></td>
      <td>ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë¥¼ ì‚­ì œ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">removeBy</code></td>
      <td><code class="language-plaintext highlighter-rouge">deleteBy</code>ì™€ ë™ì¼í•˜ê²Œ ì‘ë™, í‘œí˜„ì˜ ì°¨ì´ë§Œ ìˆìŒ</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>ë°˜í™˜ íƒ€ì…ì— ë”°ë¼ ì—¬ëŸ¬ ê°œ ì¸ì§€ í•˜ë‚˜ì¸ì§€ ì•Œ ìˆ˜ ìˆì§€ë§Œ, ë³´í†µì€ findAll ì²˜ëŸ¼ ì—¬ëŸ¬ê°œê°€ ë°˜í™˜ë˜ë©´ ì‹œê·¸ë‹ˆì²˜ì— <code class="language-plaintext highlighter-rouge">All</code> ì„ ë¶™ì—¬ ì œ 3ìì˜ í”„ë¡œê·¸ë˜ë¨¸ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.<br />
ë˜í•œ Optionalì„ ë°˜í™˜ìœ¼ë¡œ ì¼ë‹¤ëŠ” ê²ƒì€ í•´ë‹¹ íƒ€ì…ì´ 0ê°œ í˜¹ì€ 1ê°œ ì¸ì§€ë¥¼ ë§í•´ì¤€ë‹¤. ì¡´ì¬í•˜ì§€ ì•Šë‹¤ë©´ <code class="language-plaintext highlighter-rouge">.empty()</code> ë©”ì„œë“œê°€ true ì¼í„°ì´ë‹¤.</p>
</blockquote>

<h5 id="attributeentity-field">Attribute(Entity Field)</h5>

<ul>
  <li>CamelCase ë¡œ ì‘ì„±</li>
  <li>ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì—†ìŒ</li>
</ul>

<h5 id="ì¡°ê±´-í‚¤ì›Œë“œ">ì¡°ê±´ í‚¤ì›Œë“œ</h5>

<table>
  <thead>
    <tr>
      <th>ì¡°ê±´ í‚¤ì›Œë“œ</th>
      <th>ì„¤ëª…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Is</code>, <code class="language-plaintext highlighter-rouge">Equals</code></td>
      <td>ê°’ì´ ì¼ì¹˜í•¨ (=)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Between</code></td>
      <td>ë‘ ê°’ ì‚¬ì´ì˜ ë²”ìœ„</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">LessThan</code>, <code class="language-plaintext highlighter-rouge">LessThanEqual</code></td>
      <td>ë¯¸ë§Œ, ì´í•˜ ì¡°ê±´ (&lt;, &lt;=)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">GreaterThan</code>, <code class="language-plaintext highlighter-rouge">GreaterThanEqual</code></td>
      <td>ì´ˆê³¼, ì´ìƒ ì¡°ê±´ (&gt;, &gt;=)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">IsNull</code>, <code class="language-plaintext highlighter-rouge">IsNotNull</code></td>
      <td>null ì—¬ë¶€ íŒë‹¨</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Like</code>, <code class="language-plaintext highlighter-rouge">NotLike</code></td>
      <td>SQL LIKE ë¬¸ (ë¶€ë¶„ ì¼ì¹˜)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">StartingWith</code>, <code class="language-plaintext highlighter-rouge">EndingWith</code>, <code class="language-plaintext highlighter-rouge">Containing</code></td>
      <td>ë¬¸ìì—´ ì‹œì‘, ë, í¬í•¨ ì—¬ë¶€ (LIKE ê¸°ë°˜)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">In</code>, <code class="language-plaintext highlighter-rouge">NotIn</code></td>
      <td>í¬í•¨/ì œì™¸ëœ ê°’ë“¤ ì§‘í•© (IN ì¡°ê±´)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">True</code>, <code class="language-plaintext highlighter-rouge">False</code></td>
      <td>boolean ê°’ ì¡°ê±´</td>
    </tr>
  </tbody>
</table>

<h5 id="ì—°ê²°ì">ì—°ê²°ì</h5>

<p>ì„¤ëª… ìƒëµ</p>
<ul>
  <li>And</li>
  <li>Or</li>
</ul>

<h5 id="ì •ë ¬-ì¡°ê±´">ì •ë ¬ ì¡°ê±´</h5>

<p>ì„¤ëª… ìƒëµ</p>
<ul>
  <li>Asc</li>
  <li>Desc</li>
</ul>

<blockquote>
  <p>ì¿¼ë¦¬ë©”ì„œë“œëŠ” ë°˜í™˜ë˜ëŠ” ê²Œ ì—¬ëŸ¬ ê°œë¼ë©´ Iterable, Stream ìœ¼ë¡œ ë°˜í™˜ë˜ì§€ë§Œ, Stream ì„ ì“¸ ë•ŒëŠ” Transactional ì‚¬ìš©ì„ ìœ ì˜í•´ì•¼ í•œë‹¤. ë”°ë¡œ ë‹¤ë£° ìˆ˜ë„ ìˆë‹¤.<br />
Streamì€ <strong>map-reduce-filter</strong> ë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ë‹¤ë£° ìˆ˜ ìˆë‹¤.</p>
</blockquote>

<h4 id="query-ì• ë„ˆí…Œì´ì…˜ì„-í™œìš©í•œ-ì»¤ìŠ¤í…€-ì¿¼ë¦¬-ì„ ì–¸">Query ì• ë„ˆí…Œì´ì…˜ì„ í™œìš©í•œ ì»¤ìŠ¤í…€ ì¿¼ë¦¬ ì„ ì–¸</h4>

<p>ë‘ ë²ˆì§¸ ë°©ë²•ì´ë©°, ë‹¤ì–‘í•œ ì¿¼ë¦¬ë¬¸ ìì²´ë¥¼ ë„£ì–´ ë‹¤ìŒ ì¥ì ì„ ê°€ì ¸ê°ˆ ìˆ˜ ìˆë‹¤.</p>
<ul>
  <li>íŠ¹ì • DBì— íŠ¹í™”ëœ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ìµœì í™”ëœ ì¿¼ë¦¬ë¥¼ í™œìš©í•˜ê¸° ìœ„í•¨</li>
  <li>ë‘ ê°œ ì´ìƒì˜ í…Œì´ë¸”ì„ ì¡°ì¸í•˜ê¸° ìœ„í•¨</li>
</ul>

<p>NamedQuery, Query, QueryDSL ì„ ì‚¬ìš©í•´ ì¿¼ë¦¬ë¬¸ì„ ì§ì ‘ ì§€ì •í•  ìˆ˜ ìˆë‹¤.</p>

<h5 id="namedquery-ì• ë„ˆí…Œì´ì…˜">@NamedQuery ì• ë„ˆí…Œì´ì…˜</h5>

<p>ìì¹´ë¥´íƒ€ í¼ì‹œìŠ¤í„´ìŠ¤ ì¿¼ë¦¬ ì–¸ì–´(Jakarta Persistence Query Lang., JPQL) ì„ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ì •ì˜í•œë‹¤. NamedQueryëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤, ì—”í‹°í‹° í´ë˜ìŠ¤ì˜ super í´ë˜ìŠ¤ì— ì •ì˜í•˜ê¸° ë•Œë¬¸ì— ì‹¤ì œ repository í´ë˜ìŠ¤ê°€ í–‰í•´ì•¼ í•˜ëŠ” ì¼ì„ ì´ ì• ë„ˆí…Œì´ì…˜ì„ í†µí•´ ì—”í‹°í‹°ì— í´ë˜ìŠ¤ì— ë¶™ì—¬ë²„ë¦¬ë©´ ì±…ì„ë¶„ë¦¬ê°€ ì•ˆë˜ë©° í”„ë¡œê·¸ë˜ë¨¸ê°€ ì°¾ì§€ë„ ëª»í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ë‹¤ì–‘í•œ ë°©ë²• ì¤‘ì— í•˜ë‚˜ì´ë¯€ë¡œ ì´ê²ƒë„ ì‚´í´ë³¸ë‹¤.</p>

<p>NamedQuery ëŠ” ì¸ìë¡œ ë‹¤ìŒì„ ê°€ì§€ê³  ìˆë‹¤:</p>
<ul>
  <li>name: ë³´í†µ ì—”í‹°í‹°ëª….ì¿¼ë¦¬ëª… í˜•ì‹ì„ ë”°ë¥´ë„ë¡ ë„£ëŠ”ë‹¤.</li>
  <li>query: JPQL ë¡œ ì‘ì„±ëœ ë¬¸ìì—´ì´ë©°, SQL ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, í…Œì´ë¸”ê³¼ ì»¬ëŸ¼ ã…ì‹  ì—”í‹°í‹° í´ë˜ìŠ¤ì™€ ê·¸ ì†ì„±ì„ ì°¸ì¡°í•œë‹¤. <code class="language-plaintext highlighter-rouge">?1</code>, <code class="language-plaintext highlighter-rouge">?2</code>ì™€ ê°™ì€ ë¬¸ìì—´ì€ <code class="language-plaintext highlighter-rouge">:paramName</code> ê°™ì€ ì´ë¦„ ê¸°ë°˜ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•œë‹¤. ì˜ˆë¥¼ë“¤ì–´ <code class="language-plaintext highlighter-rouge">?email</code>ì„ ì‚¬ìš©í•œë‹¤ë©´ repository ì—ì„œ API ì„ ì–¸ìœ¼ë¡œ @Param(â€œemailâ€) ë¡œ ë§¤í•‘í•  ìˆ˜ ìˆë‹¤.</li>
  <li>lockMode(ì„ íƒ)</li>
  <li>hints(ì„ íƒ)</li>
</ul>

<p>NamedQueryë¥¼ ì—¬ëŸ¬ê°œ ì“°ê³  ì‹¶ë‹¤ë©´ <code class="language-plaintext highlighter-rouge">@NamedQueries</code>ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.</p>

<h5 id="query-ì• ë„ˆí…Œì´ì…˜">@Query ì• ë„ˆí…Œì´ì…˜</h5>

<p>ìœ„ NamedQueryë¥¼ ì‚¬ìš©í•˜ë©´ ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ í´ë˜ìŠ¤ê°€ ë°ì´í„° ì €ì¥/ì¡°íšŒì™€ strictly coupling ì´ ë°œìƒí•œë‹¤. ë”°ë¼ì„œ í•´ë‹¹ ì• ë„ˆí…Œì´ì…˜ì˜ ìœ„ì¹˜ë¥¼ ì˜®ê²¨ì•¼ í•œë‹¤. ì´ë•Œ queryë¥¼ í†µí•´ ì‘ì„±í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">PostRepository</span> <span class="kd">extends</span> <span class="nc">PagingAndSortingRepository</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;,</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Query</span><span class="o">(</span><span class="s">"SELECT p FROM 
     p WHERE :keyword IN p.content"</span><span class="o">)</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="nf">search</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"keyword"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">keyword</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>ìœ„ì™€ ê°™ì´ ì‘ì„±í•œë‹¤ë©´ ë¹„ì¦ˆë‹ˆìŠ¤ ì—”í‹°í‹°ëŠ” ì •ì˜ì— ëŒ€í•œ ì±…ì„, ë ˆí¬ì§€í† ë¦¬ëŠ” ì—”í‹°í‹° ê´€ë¦¬ì™€ ìƒì„±, ì‚­ì œì— ëŒ€í•œ ì±…ì„ìœ¼ë¡œ ë¶„ë¦¬ê°€ ë˜ë©°, ê°€ë…ì„± ì¸¡ë©´ì—ì„œë„ ì—”í‹°í‹°ì™€ ë ˆí¬ì§€í† ë¦¬ ë‘˜ ë‹¤ ì•ˆë³´ì•„ë„ ëœë‹¤. ë§Œì•½ native queryë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•˜ë©´ ëœë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">PostRepository</span> <span class="kd">extends</span> <span class="nc">PagingAndSortingRepository</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;,</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nd">@Query</span><span class="o">(</span><span class="s">"SELECT p FROM POSTS p WHERE p.content LIKE %:keyword%"</span><span class="o">)</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="nf">search</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"keyword"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">keyword</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p><strong>â­ï¸ìˆ˜ì •ê³¼ ì‚­ì œì— ëŒ€í•œ ë°ì´í„° ì¼ê´€ì„± ê°€ì ¸ì˜¤ê¸°</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Modifying</span>
<span class="nd">@Transactional</span>
<span class="nd">@Query</span><span class="o">(</span><span class="s">"UPDATE POSTS p set p.content=:content WHERE p.id=:id"</span><span class="o">)</span>
<span class="kt">int</span> <span class="nf">updateCourseRatingByName</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">"content"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">content</span><span class="o">);</span></code></pre></figure>

<ul>
  <li>
    <p>@Modifying ì• ë„ˆí…Œì´ì…˜: @Query ì• ë„ˆí…Œì´ì…˜ê³¼ ê°™ì´ ì“°ë©°, ì •ì˜ëœ ì¿¼ë¦¬ê°€ ì¡°íšŒê°€ ì•„ë‹Œ ìˆ˜ì • ì‘ì—…ì„ í•œë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì¤€ë‹¤. Modifying ì• ë„ˆí…Œì´ì…˜ì„ ë¶™ì´ì§€ ì•Šì€ ë°ì´í„°ì˜ ë³€ê²½ì´ ìˆ˜ë°˜ë˜ëŠ” ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ <code class="language-plaintext highlighter-rouge">InvalidDataAccessApiUsageException</code>ì˜ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.</p>
  </li>
  <li>
    <p>@Transactional ì• ë„ˆí…Œì´ì…˜: ë°ì´í„° ë³€ê²½(ì˜ˆ: INSERT, UPDATE, DELETE)ê³¼ ê°™ì€ ì‘ì—…ì„ íŠ¸ëœì­ì…˜ ë‹¨ìœ„ë¡œ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©°, ì›ìì„±ì„ ë³´ì¡´í•˜ê²Œ ë˜ì–´ ì‘ì—…ì´ ëª¨ë‘ ì™„ë£Œë˜ê±°ë‚˜(COMMIT) ì·¨ì†Œ(ROLLBACK) ë‹¨ìœ„ë¡œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.</p>
  </li>
</ul>

<p>ì¤‘ìš”í•˜ë‹¤. ë‹¤ìŒ ê¸€ì„ ì½ê¸° ì „ì—ëŠ” Java ì˜ persistence íŒ¨í‚¤ì§€ë¥¼ ë³´ê³  ì˜¤ì(Spring ì„¹ì…˜ì—ì„œ ì•ˆë‹¤ë£¸).</p>

<h3 id="criteria-api">Criteria API</h3>

<p>ìœ„ì—ì„œ ì‚¬ìš©ëœ ì• ë„ˆí…Œì´ì…˜ ë‚´ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì¿¼ë¦¬ë¥¼ <strong>JPQL ì¿¼ë¦¬</strong>ë¼ê³  í•œë‹¤. JPQLì„ <strong>ì»´íŒŒì¼ íƒ€ì…ì—ì„œ ê²€ì¦í•  ìˆ˜ ì—†ê¸°</strong> ë•Œë¬¸ì— ì˜ëª» ì‘ì„±í•œ ì¿¼ë¦¬ì— ëŒ€í•œ ë¬¸ì œëŠ” ëŸ°íƒ€ì„ ì—ëŸ¬ë¡œë§Œ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.</p>

<p>ì´ëŸ° ë¬¸ì œì ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ Criteria APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ë¬¸ì„ ë¬¸ìì—´ì´ ì•„ë‹Œ í”„ë¡œê·¸ë¨ ì†ŒìŠ¤ì²˜ëŸ¼ ì‘ì„±í•˜ë„ë¡ í•˜ì—¬ íƒ€ì… ì•ˆì „ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆë‹¤.</p>

<h4 id="entitymanager">EntityManager</h4>

<p>JPA ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´ì¸ EntityManagerëŠ” ì—”í‹°í‹°ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ëŠ” ì• ë‹¤. <code class="language-plaintext highlighter-rouge">javax.persistence.EntityManager</code> ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë”°ë¼ì•¼ í•˜ë©°, Springì€ ì´ë¥¼ ì°¸ê³ í•˜ì—¬ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•  ë¿ì´ë‹¤. Springì˜ <code class="language-plaintext highlighter-rouge">EntityManager</code> ì˜ ê´€ë¦¬ ë²”ìœ„ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<ul>
  <li><strong>Managing Persistence Context</strong>: ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¼ëŠ” ê°œë…ì´ ë‚˜ì˜¤ëŠ”ë° DBì— ì‹¤ì œë¡œ ì €ì¥í•˜ê¸° ì „ì— 1ì°¨ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ìºì‹œì™€ ìœ ì‚¬í•˜ë‹¤. ì—¬ê¸°ì„œ ë¯¸ë¦¬ ì²˜ë¦¬ë¥¼ ë‹¤ í•˜ê³  ì´ë¥¼ ì˜¬ë¦¬ê²Œ ëœë‹¤. git ì—ì„œ local ì˜ ì‘ì—…ì´ ëë‚˜ê³  ìµœì¢… ê²°ê³¼ë¥¼ root ì— ì˜¬ë¦¬ëŠ” ê²ƒê³¼ ìœ ì‚¬í•˜ë‹¤.</li>
  <li>Persisting Entity: ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸(Persist Context)ê°€ ìˆëŠ”ë° ì—¬ê¸°ì— ì €ì¥ë˜ëŠ” ì—”í‹°í‹°ë“¤ì€ ë³´í†µ DBì— ì €ì¥ë˜ê¸° ì§ì „ ì¤€ë¹„ë¥¼ í•˜ê³  ìˆëŠ” ë°ì´í„°ë“¤ì´ë‹¤.</li>
  <li><strong>Transaction Context</strong>: <code class="language-plaintext highlighter-rouge">EntityManager</code>ëŠ” <code class="language-plaintext highlighter-rouge">EntityTransaction</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ëœì­ì…˜ì„ ì‹œì‘í•˜ê³  ì»¤ë°‹í•˜ë©° ë¡¤ë°±í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. í•˜ì§€ë§Œ ìŠ¤í”„ë§ ê°™ì€ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” ë³´í†µ ì„ ì–¸ì  íŠ¸ëœì­ì…˜(<code class="language-plaintext highlighter-rouge">@Transactional</code>) ê´€ë¦¬ë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë˜ê²Œ ëœë‹¤.</li>
  <li><strong>Query Creation and Excution</strong>: <code class="language-plaintext highlighter-rouge">createQuery()</code>, <code class="language-plaintext highlighter-rouge">createNamedQuery()</code>, <code class="language-plaintext highlighter-rouge">createNativeQuery()</code>, <code class="language-plaintext highlighter-rouge">getCriteriaBuilder()</code> ë“±ì„ í†µí•´ ë‹¤ì–‘í•œ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•˜ì—¬ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê±°ë‚˜ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤.</li>
</ul>

<p>ë°‘ì€ ê¸°ë³¸ì ìœ¼ë¡œ ìˆì–´ì•¼ í•  ê¸°ëŠ¥ì´ê¸°ì— ë”°ë¡œ ëºë‹¤.</p>

<ul>
  <li>Finding Entity: <code class="language-plaintext highlighter-rouge">find()</code> ë©”ì„œë“œë¥¼ í†µí•´ PK ë¡œ ì¡°íšŒë¥¼ í•  ìˆ˜ ìˆë‹¤. ë³´í†µ find ë³´ë‹¤ëŠ” <code class="language-plaintext highlighter-rouge">createQuery()</code>, <code class="language-plaintext highlighter-rouge">createNamedQuery()</code> ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°íšŒë¥¼ í•˜ëŠ” ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì´ë‹¤.</li>
  <li>Updating Entity: Persistence Context ì˜ entity ìƒíƒœê°€ ë³€ê²½ë˜ë©´ íŠ¸ëœì­ì…˜ì´ commit ë  ë•Œ ìë™ìœ¼ë¡œ ë³€ê²½ ì‚¬í•­ì„ ì €ì¥í•˜ê²Œ ëœë‹¤.</li>
  <li>Removing Entity: remove() ë©”ì„œë“œëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì—”í‹°í‹°ë¥¼ ì œê±°í•˜ë©°, íŠ¸ëœì­ì…˜ commit ì‹œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œë„ í•´ë‹¹ ì—”í‹°í‹°ê°€ ì‚­ì œë˜ë„ë¡ í•œë‹¤.</li>
</ul>

<p>ì´ì œ ìœ„ë¥¼ ì°¸ê³ í•˜ì—¬ Criteria Query ë¥¼ ì‘ì„±í•´ë³´ì.</p>

<h5 id="entitymanager-ì°¸ì¡°-ë°-criteriabuilder-ì„ ì–¸">EntityManager ì°¸ì¡° ë° CriteriaBuilder ì„ ì–¸</h5>

<p>ì¿¼ë¦¬ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ, ì—”í‹°í‹°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ <code class="language-plaintext highlighter-rouge">EntityManager</code> ë¥¼ ë“¤ê³  ì™€ì•¼ í•œë‹¤. Spring ì˜ Bean ì— ìë™ìœ¼ë¡œ ë“±ë¡ë˜ëŠ” <code class="language-plaintext highlighter-rouge">EntityManager</code> ë¥¼ í…ŒìŠ¤íŠ¸ë˜ <code class="language-plaintext highlighter-rouge">Repository</code> í´ë˜ìŠ¤ ì»¨í…ìŠ¤íŠ¸ ìª½ì—ì„œ ìë™ì£¼ì…ìœ¼ë¡œ ë“¤ê³ ì˜¤ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Autowired</span>
<span class="kd">private</span> <span class="nc">EntityManager</span> <span class="n">em</span><span class="o">;</span></code></pre></figure>

<p>ì—”í‹°í‹°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ, JPAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì¤€ë¹„ê°€ ëë‚¬ë‹¤. ì´ì œ ì¿¼ë¦¬ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ì. <code class="language-plaintext highlighter-rouge">CriteriaBuilder</code> ëŠ” ê²€ì¦í•˜ê¸° ìœ„í•œ ì¿¼ë¦¬ë¥¼ ìƒì„±í•˜ê¸°ì— ì•ì„œ ë¶€ë¶„ ë¶€ë¶„ ê° ì¿¼ë¦¬ì˜ ì ˆ(SELECT ì ˆ, WHERE ì ˆ ë“±ë“±) ì˜ ì ˆê³¼ Queryì˜ ë¼ˆëŒ€ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ë¹Œë” íŒ¨í„´ì´ë‹¤.</p>

<p>ë‹¹ì—°íˆ EntityManager ì˜ <code class="language-plaintext highlighter-rouge">getCriteriaBuilder()</code> ë©”ì„œë“œë¥¼ í†µí•´ ë“¤ê³  ì˜¬ ìˆ˜ ìˆë‹¤(<code class="language-plaintext highlighter-rouge">EntityManager</code> ê°€ ë³´í†µ ë‹¤ ê°€ì§€ê³  ìˆë‹¤).</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">CriteriaBuilder</span> <span class="n">cb</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">getCriteriaBuilder</span><span class="o">();</span></code></pre></figure>

<p>ì¿¼ë¦¬ì˜ ë¼ˆëŒ€ë¥¼ ìƒì„±í•˜ê³  ì‚´ì„ ì±„ì›Œë„£ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// ì¿¼ë¦¬ ë¼ˆëŒ€ ìƒì„±</span>
<span class="nc">CriteriaQuery</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="n">criteriaQuery</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="nc">Post</span><span class="o">.</span><span class="na">class</span><span class="o">);</span></code></pre></figure>

<p>ì´ì œ ì‚´ì„ ì±„ì›Œì£¼ì. ì±„ì›Œì£¼ê¸° ì „ì— ì°¸ì¡°ë¥¼ ì‰½ê²Œì‰½ê²Œ ì½”ë”©í•˜ê¸° ìœ„í•´ ì°¸ì¡°ë¥¼ ì €ì¥í•˜ëŠ” ê²ƒì„ ìƒì„±í•œë‹¤. ì—¬ê¸°ì„œ ì°¸ì¡°ì˜ ëª…ì„¸ëŠ” Rootë¡œ ë˜ì–´ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// SELECT * FROM Post ì™€ ê°™ì€ ê²©</span>
<span class="nc">Root</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="n">root</span> <span class="o">=</span> <span class="n">criteriaQuery</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="nc">Post</span><span class="o">.</span><span class="na">class</span><span class="o">);</span></code></pre></figure>

<p>ì¿¼ë¦¬ ì‘ì„±</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// SELECT * FROM Post as root WHERE root.title = "HA HA HA Example"</span>
<span class="n">criteriaQuery</span><span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">root</span><span class="o">)</span>
        <span class="c1">// root.get("ì»¬ëŸ¼ëª…") ìœ¼ë¡œ database êµ¬ì„±ìš”ì†Œë¥¼ ë“¤ê³  ì˜¬ ìˆ˜ ìˆë‹¤.</span>
        <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">cb</span><span class="o">.</span><span class="na">equal</span><span class="o">(</span><span class="n">root</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"title"</span><span class="o">),</span> <span class="s">"HA HA HA Example"</span><span class="o">));</span></code></pre></figure>

<p>ì—¬ê¸°ì„œ ì—ëŸ¬ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë” êµ¬ë¶„í•˜ê³  ì‹¶ë‹¤ë©´ where ì ˆì˜ <code class="language-plaintext highlighter-rouge">Predicate</code> ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë„£ëŠ” ê³³ì„ ë¶„ë¦¬ì‹œì¼œì£¼ë©´ ëœë‹¤. ìœ„ë¥¼ ì§€ìš°ê³  ë‹¤ìŒì²˜ëŸ¼ ì¨ë³´ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Predicate</span> <span class="n">condition</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="na">equal</span><span class="o">(</span><span class="n">root</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"title"</span><span class="o">),</span> <span class="s">"HA HA HA Example"</span><span class="o">);</span></code></pre></figure>

<p>ë§Œë“ ê±¸ ì¢…í•©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">givenSelectWhenLoadedTheDataThenExpectedResult</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Take CriteriaBuilder for handling Entity</span>
        <span class="nc">CriteriaBuilder</span> <span class="n">cb</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">getCriteriaBuilder</span><span class="o">();</span>

        <span class="c1">// Define Blueprint for Post CriteriaQuery</span>
        <span class="nc">CriteriaQuery</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="n">cq</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="nc">Post</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="c1">// Write Statement</span>
        <span class="nc">Root</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="nc">Post</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">Predicate</span> <span class="n">condition</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="na">equal</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"title"</span><span class="o">),</span> <span class="s">"Hello World"</span><span class="o">);</span>

        <span class="c1">// Merge</span>
        <span class="n">cq</span><span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">p</span><span class="o">)</span>
                <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">condition</span><span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<p>ì—¬ê¸°ì„œëŠ” íƒ€ì… ê²€ì‚¬ê°€ ìë™ìœ¼ë¡œ ì¼ì–´ë‚˜ê³  JPQL ì¿¼ë¦¬ë¥¼ ì§ì ‘ ë‚  ê²ƒìœ¼ë¡œ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ì¿¼ë¦¬ë¥¼ ë‚ ë¦´ ìˆ˜ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p>ì´ì œ ê²€ì¦ ì¿¼ë¦¬ê°€ ì•„ë‹Œ ì‹¤ì œ ì¿¼ë¦¬ë¡œ ë°”ê¾¸ì–´ì„œ ê²°ê³¼ë¥¼ fetch í•´ì˜¤ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">givenSelectWhenLoadedTheDataThenExpectedResult</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Take CriteriaBuilder for handling Entity</span>
        <span class="nc">CriteriaBuilder</span> <span class="n">cb</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">getCriteriaBuilder</span><span class="o">();</span>

        <span class="c1">// Define Blueprint for Post CriteriaQuery</span>
        <span class="nc">CriteriaQuery</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="n">cq</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="nc">Post</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="c1">// Write Statement</span>
        <span class="nc">Root</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="nc">Post</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="nc">Predicate</span> <span class="n">condition</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="na">equal</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"title"</span><span class="o">),</span> <span class="s">"Hello World"</span><span class="o">);</span>

        <span class="c1">// Merge</span>
        <span class="n">cq</span><span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">p</span><span class="o">)</span>
                <span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">condition</span><span class="o">);</span>

        <span class="c1">// Actual Query Created</span>
        <span class="nc">TypedQuery</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">cq</span><span class="o">);</span>

        <span class="c1">// Fetch</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">query</span><span class="o">.</span><span class="na">getResultList</span><span class="o">().</span><span class="na">size</span><span class="o">(),</span> <span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<p>ìœ„ì™€ ì‚´ì§ ë‹¤ë¥´ê¸´ í•œë°, ê·¸ë˜ë„ íë¦„ì€ ë™ì¼í•˜ë‹¤.</p>

<h3 id="spring-data-jpa--querydsl">Spring Data JPA &amp; QueryDSL</h3>

<p>ìœ„ì—ì„œëŠ” Criteria API ì™€ ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ë´¤ëŠ”ë°, ìœ„ë¥¼ ì§œë©´ì„œ ëŠë‚€ ê²ƒì€ ì½”ë“œê°€ êµ‰ì¥íˆ ê¸´ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ë‹¨ìˆœí•œ ì¡°íšŒ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ê¸° ìœ„í•´ ì €ë ‡ê²Œë‚˜ ë§ì€ ì–‘ì˜ ì½”ë“œê°€ í•„ìš”í•˜ë‹¤. ì—¬ê¸°ì„œ ëŒ€ì²´ì¬ë¡œ <code class="language-plaintext highlighter-rouge">QueryDSL</code>ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê²€í† í•  ìˆ˜ ìˆë‹¤. ì½”ë“œ ì‘ì„±ëŸ‰ì„ ì¤„ì„ê³¼ ë™ì‹œì— ê²€ì¦ ë˜í•œ ì»´íŒŒì¼ íƒ€ì„ì¤‘ì— í•  ìˆ˜ ìˆë‹¤.</p>

<p>ì„œë“œ íŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ <code class="language-plaintext highlighter-rouge">QueryDSL</code>ì€ ë‹¤ìŒ ê²€ì¦ì„ ì§€ì›í•œë‹¤:</p>
<ul>
  <li>ì—”í‹°í‹° íƒ€ì…ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ê³  í•´ë‹¹ ì—”í‹°í‹°ë¥¼ DBì— ì €ì¥ ê°€ëŠ¥í•œê°€?</li>
  <li>ëª¨ë“  í”„ë¡œí¼í‹°ê°€ ì—”í‹°í‹°ì— ì‹¤ì œë¡œ ì¡´ì¬í•˜ê³  í•´ë‹¹ í”„ë¡œí¼í‹°ë¥¼ DBì— ì €ì¥ ê°€ëŠ¥í•œê°€?</li>
  <li>ëª¨ë“  SQL ì—°ì‚°ìì—ëŠ” ì í•©í•œ íƒ€ì…ì´ ì‚¬ìš©ë˜ì—ˆë‚˜?</li>
  <li>ìµœì¢… ì¿¼ë¦¬ê°€ ë¬¸ë²•ì ìœ¼ë¡œ ì˜¬ë°”ë¥¸ê°€?</li>
</ul>

<p>Spring DataëŠ” QueryDSLì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ <code class="language-plaintext highlighter-rouge">QuerydslPredicateExecutor</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤. ì´ë¥¼ ë³´ì. í•˜ê¸° ì „ì— ìœ„ì— ì¼ë˜ Criteria API ì‚¬ìš©í•œ ì½”ë“œë“¤ì€ ë‹¤ ì§€ì›Œë²„ë¦¬ì :)</p>

<h4 id="querydsl-ì˜ì¡´ì„±-ì¶”ê°€">QueryDSL ì˜ì¡´ì„± ì¶”ê°€</h4>

<p>ìš°ì„  ì˜ì¡´ì„± ì¶”ê°€ë¥¼ í•´ì£¼ì.</p>

<figure class="highlight"><pre><code class="language-gradle" data-lang="gradle"><span class="n">plugins</span> <span class="o">{</span>
    <span class="o">...</span>
	<span class="c1">// ì´ í”ŒëŸ¬ê·¸ì¸ì´ Q-í´ë˜ìŠ¤ ìƒì„± ì‘ì—…ì„ ê°„í¸í•˜ê²Œ í•´ì¤Œ</span>
	<span class="n">id</span> <span class="s2">"com.ewerk.gradle.plugins.querydsl"</span> <span class="n">version</span> <span class="s2">"1.0.10"</span>
<span class="o">}</span>

<span class="k">dependencies</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="c1">// querydsl Spring Boot 3.x ì´ìƒê³¼ í˜¸í™˜í•˜ë ¤ë©´ :jakarta classifier ë¥¼ ì‚¬ìš©</span>
	<span class="n">implementation</span> <span class="s2">"com.querydsl:querydsl-jpa:5.0.0:jakarta"</span>
	<span class="c1">// querydsl Q-class ìƒì„±ì„ ìœ„í•œ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ</span>
	<span class="n">annotationProcessor</span> <span class="s1">'com.querydsl:querydsl-apt:5.0.0:jakarta'</span>
<span class="o">}</span>

<span class="c1">// Q í´ë˜ìŠ¤ë“¤ì´ ìƒì„±ë  ë””ë ‰í† ë¦¬ ì§€ì •</span>
<span class="kt">def</span> <span class="n">querydslDir</span> <span class="o">=</span> <span class="s2">"$buildDir/generated/querydsl"</span>

<span class="c1">// QueryDSL Q-í´ë˜ìŠ¤ ìƒì„± ì„¤ì •</span>
<span class="c1">// ì´ í”ŒëŸ¬ê·¸ì¸ì€ Q-í´ë˜ìŠ¤ê°€ ìƒì„±ë  ê²½ë¡œë¥¼ ì§€ì •í•˜ê³  í´ë¦° ì‘ì—…ì„ ìë™ìœ¼ë¡œ ì„¤ì •</span>
<span class="n">querydsl</span> <span class="o">{</span>
	<span class="n">jpa</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">// JPAë¥¼ ì‚¬ìš©í•  ê²½ìš° trueë¡œ ì„¤ì •</span>
	<span class="n">querydslSourcesDir</span> <span class="o">=</span> <span class="n">querydslDir</span> <span class="c1">// Q-í´ë˜ìŠ¤ ìƒì„± ê²½ë¡œ</span>
<span class="o">}</span></code></pre></figure>

<ul>
  <li>com.querydsl:querydsl-apt: ì—”í‹°í‹° í´ë˜ìŠ¤ ë°”íƒ•ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">Q-íƒ€ì… í´ë˜ìŠ¤</code>ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ì• ë„ˆí…Œì´ì…˜ ì²˜ë¦¬ ë„êµ¬, ë§Œì•½ Course í´ë˜ìŠ¤ì— ì• ë„ˆí…Œì´ì…˜ì„ ë„£ì–´ì£¼ë©´ QCourse ê°€ ìƒì„±</li>
  <li>com.querydsl:querydsl-jpa: JPAë¥¼ ì‚¬ìš©í•˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ QueryDSL ì„ ì‚¬ìš© ê°€ëŠ¥. ë§Œì•½ MongoDB ë¥¼ ì‚¬ìš©í•˜ë©´ <code class="language-plaintext highlighter-rouge">querydsl-mongodb</code>ë¡œ ë°”ê¿”ì£¼ë©´ ëœë‹¤.</li>
  <li>com.ewerk.gradle.plugins.querydsl: querydsl ë¸”ëŸ­ì„ ì‚¬ìš©í•˜ì—¬ querydslì˜ q-class ìƒì„± ìœ„ì¹˜ë‚˜ ì„¤ì •ì„ ê°„í¸í•˜ê²Œ í•´ì¤€ë‹¤.</li>
</ul>

<blockquote>
  <p>Q-class ë¼ëŠ” ê²ƒì€ QueryDSLì„ ì‚¬ìš©í•  ë•Œ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ë¥¼ <strong>íƒ€ì…-ì„¸ì´í”„(Type-Safe)</strong>í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” íŠ¹ë³„í•œ static í´ë˜ìŠ¤<br />
ì—¬ê¸°ì„œ ìƒì„±ëœ Q-classëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤ì½”ë“œë¡œë„ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— outputDirectory í”„ë¡œí¼í‹°ë¡œ ì§€ì •ëœ ë””ë ‰í„°ë¦¬ëŠ” í”„ë¡œì íŠ¸ì˜ ì†ŒìŠ¤ ë””ë ‰í„°ë¦¬ë¡œë„ ì§€ì •ë˜ì–´ì•¼ í•œë‹¤.</p>
</blockquote>

<h4 id="querydslpredicateexecutor-ì¸í„°í˜ì´ìŠ¤">QuerydslPredicateExecutor ì¸í„°í˜ì´ìŠ¤</h4>

<p>ë³´í†µ Repository ì— ìƒì†í•˜ì—¬ QueryDSL ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserRepository</span> <span class="kd">extends</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;,</span> <span class="nc">QuerydslPredicateExecutor</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="o">{</span> <span class="o">}</span></code></pre></figure>

<p>ì´ì œ Q-class ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒì„ ì…ë ¥í•œë‹¤.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">./gradlew clean build</code></pre></figure>

<blockquote>
  <p>build í›„ì— querydslDir ì˜ ì €ì¥ì†Œì— Q-class ê°€ ìƒì„±ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.<br />
ì—¬ê¸°ì„œëŠ” ìš°ë¦¬ê°€ ì •ì˜í–ˆë˜ Entity ë“¤ì˜ Q-class ë“¤ì´ ìˆë‹¤.</p>
</blockquote>

<p>ìœ„ì²˜ëŸ¼ ì“°ë©°, ë‹¤ìŒ ë©”ì„œë“œë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•´ì¤€ë‹¤.</p>

<ul>
  <li>findOne</li>
  <li>findAll</li>
  <li>count</li>
  <li>exists</li>
  <li>findBy</li>
</ul>

<p>CrudRepository ë„ findAllì´ ìˆì§€ë§Œ, ì´ë¥¼ ì˜¤ë²„ë¡œë”©í•œ ë©”ì„œë“œë¥¼ ì œê³µí•œë‹¤. ë“¤ì–´ê°€ëŠ” ì¸ìê°€ Q-class ê´€ë ¨ ë³€ìˆ˜ë“¤ì´ë©°, ì´ëŠ” ë™ì ì´ê³  íƒ€ì…-ì„¸ì´í”„í•œ ì¿¼ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•˜ê²Œ ëœë‹¤(QPE ì‚¬ìš© ì´ìœ ).</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenQueryDSLWhenLoadedTheDataThenExpectedResults</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">QUser</span> <span class="n">user</span> <span class="o">=</span> <span class="nc">QUser</span><span class="o">.</span><span class="na">user</span><span class="o">;</span>

        <span class="nc">JPAQuery</span> <span class="n">query1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPAQuery</span><span class="o">(</span><span class="n">em</span><span class="o">);</span>
        <span class="n">query1</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">user</span><span class="o">).</span><span class="na">where</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"IU"</span><span class="o">));</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">query1</span><span class="o">.</span><span class="na">fetch</span><span class="o">().</span><span class="na">size</span><span class="o">(),</span> <span class="mi">0</span><span class="o">);</span>

        <span class="nc">JPAQuery</span> <span class="n">query2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JPAQuery</span><span class="o">(</span><span class="n">em</span><span class="o">);</span>
        <span class="n">query2</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">user</span><span class="o">).</span><span class="na">where</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">email</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"ssss@gmail.com"</span><span class="o">).</span><span class="na">and</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">gt</span><span class="o">(</span><span class="mi">3</span><span class="o">)));</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="n">query2</span><span class="o">.</span><span class="na">fetch</span><span class="o">().</span><span class="na">size</span><span class="o">(),</span> <span class="mi">0</span><span class="o">);</span>

        <span class="n">assertFalse</span><span class="o">(</span><span class="n">userRepository</span><span class="o">.</span><span class="na">exists</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">eq</span><span class="o">(</span><span class="s">"IU"</span><span class="o">)));</span>

        <span class="nc">OrderSpecifier</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">descOrderSpecifier</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">desc</span><span class="o">();</span>
        <span class="n">assertEquals</span><span class="o">((</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;</span> <span class="o">(</span>
                <span class="o">(</span><span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;)</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">descOrderSpecifier</span><span class="o">)</span>
                <span class="o">)).</span><span class="na">size</span><span class="o">(),</span> <span class="mi">0</span><span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<h3 id="projection">Projection</h3>

<p>ì—”í‹°í‹°ë¥¼ ì¡°íšŒí•  ë•Œë§ˆë‹¤ í…Œì´ë¸”ì˜ ëª¨ë“  ì»¬ëŸ¼ì€ ì¡°íšŒí•  í•„ìš”ê°€ ì—†ë‹¤. ì´ë•Œ, DBì—ëŠ” í”„ë¡œì ì…˜ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ”ë° ì—¬ê¸°ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<p>ê¸°ë³¸ì ìœ¼ë¡œ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡œì ì…˜, í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡œì ì…˜ì´ ìˆë‹¤.</p>

<h4 id="ì¸í„°í˜ì´ìŠ¤-ê¸°ë°˜-í”„ë¡œì ì…˜">ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡œì ì…˜</h4>

<p>ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡œì ì…˜ì€ Repository ì˜ ë°˜í™˜ê°’ì„ ì„ì˜ë¡œ ì„¤ì •í•œ ì¸í„°í˜ì´ìŠ¤ë¡œ ë‘ê³ , ì•ˆì— ê´€ì‹¬ìˆëŠ” Column ë“¤ë§Œ Getter ë¡œ ì„ ì–¸í•˜ì—¬ Projectionì„ í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">PostInfo</span> <span class="o">{</span>
    <span class="c1">// ì—”í‹°í‹°ì˜ 'id' í•„ë“œì— ì§ì ‘ ë§¤í•‘</span>
    <span class="nc">Long</span> <span class="nf">getId</span><span class="o">();</span>

    <span class="c1">// ì—”í‹°í‹°ì˜ 'title' í•„ë“œì— ì§ì ‘ ë§¤í•‘</span>
    <span class="nc">String</span> <span class="nf">getTitle</span><span class="o">();</span>

    <span class="c1">// ì—”í‹°í‹°ì˜ 'createdAt' í•„ë“œì— ì§ì ‘ ë§¤í•‘</span>
    <span class="nc">LocalDateTime</span> <span class="nf">getCreatedAt</span><span class="o">();</span>
<span class="o">}</span></code></pre></figure>

<p>ìœ„ëŠ” ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡œì ì…˜ì—ì„œ closed projection ì´ë‹¤. open projectionì€ SpELì„ ì‚¬ìš©í•˜ì—¬ í•˜ëŠ”ë°, ì´ëŠ” ë‚˜ì¤‘ì— ê³µë¶€í•´ë„ ë¬´ë°©í•˜ë‹¤.</p>

<p>ë ˆí¬ì§€í† ë¦¬ì— ì´ë¥¼ ì¨ë³´ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserRepository</span> <span class="kd">extends</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;,</span> <span class="nc">QuerydslPredicateExecutor</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">// í•„ìš”í•œ column, ê´€ì‹¬ìˆëŠ” column ë§Œ ë°˜í™˜</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">UserInfo</span><span class="o">&gt;</span> <span class="nf">findByName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p><strong>í…ŒìŠ¤íŠ¸</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">givenFindUserDTOWhenLoadTheUserThenExpectedResult</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"seonghun"</span><span class="o">,</span> <span class="s">"seonghun@gmail.com"</span><span class="o">);</span>
    <span class="n">userRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>

    <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">UserInfo</span><span class="o">&gt;</span> <span class="n">userInfo</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findByName</span><span class="o">(</span><span class="s">"seonghun"</span><span class="o">);</span>

    <span class="n">userInfo</span><span class="o">.</span><span class="na">ifPresent</span><span class="o">(</span><span class="n">info</span> <span class="o">-&gt;</span> <span class="n">assertThrows</span><span class="o">(</span>
            <span class="nc">NoSuchMethodException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
            <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="nc">Class</span><span class="o">&lt;?&gt;</span> <span class="n">clazz</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
                <span class="n">clazz</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">"getId"</span><span class="o">);</span>
            <span class="o">},</span>
            <span class="s">"UserDTOëŠ” idë¥¼ ì¸ìë¡œ ê°€ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤."</span>
    <span class="o">));</span>
<span class="o">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">java.lang.reflect</code> ë¥¼ ì¨ì„œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë‹¤.</p>

<h4 id="í´ë˜ìŠ¤-ê¸°ë°˜-í”„ë¡œì ì…˜">í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡œì ì…˜</h4>

<p>ì¸í„°í˜ì´ìŠ¤ ëŒ€ì‹  ë°ì´í„° ì „ì†¡ ê°ì²´ë¼ê³  ë¶ˆë¦¬ëŠ” DTO ê°œë…ì´ ë„ì…ë˜ê³ , ì´ëŠ” ìë°” POJO ê¸°ë°˜ì˜ êµ¬í˜„ì²´ë¡œ DAO ê³„ì¸µê³¼ ì„œë¹„ìŠ¤ ê³„ì¸µ ì‚¬ì´ì—ì„œ ë°ì´í„°ë¥¼ ë‹´ë‹¹í•˜ê²Œ ëœë‹¤(<code class="language-plaintext highlighter-rouge">Bridge</code> íŒ¨í„´ì´ë‹¤).</p>

<p>DTOë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë³´í†µ @Query ê°€ ë™ë°˜ëœë‹¤. ë©”ì„œë“œ ë§ˆë‹¤ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œ ì •ì˜í•´ì¤˜ì•¼ í•˜ê²Œ ë˜ê³ , ë˜í•œ DTO í´ë˜ìŠ¤ì— ë©¤ë²„ ë³€ìˆ˜ê°€ ë§ì•„ì§€ë©´ ë§ì•„ì§„ ë§Œí¼ ìƒì„±ìê°€ ê±°ëŒ€í•´ì§„ë‹¤. ì´ ì˜ˆì‹œëŠ” ë°”ë¡œ <a href="#dto-í´ë˜ìŠ¤ë¥¼-ì‚¬ìš©í•œ-projection">ë°‘ì—ì„œ ë‹¤ë£¬ë‹¤</a>.</p>

<h3 id="ë„ë©”ì¸-ê°ì²´-ê´€ê³„-ê´€ë¦¬">ë„ë©”ì¸ ê°ì²´ ê´€ê³„ ê´€ë¦¬</h3>

<p>í•˜ë‚˜ì˜ í…Œì´ë¸”ì—ì„œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê²ƒì€ ìƒëŒ€ì ìœ¼ë¡œ ì‰½ì§€ë§Œ íšŒì‚¬ì˜ í¬ê¸°ê°€ ì»¤ì§ˆìˆ˜ë¡ í•˜ë‚˜ì˜ í…Œì´ë¸”ì—ì„œë§Œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì§„ ì•ŠëŠ”ë‹¤.</p>

<p>ì—”í‹°í‹° ê°„ì—ëŠ” 1:1 ê´€ê³„, 1:n ê´€ê³„, n:1 ê´€ê³„, n:m ê´€ê³„ ë“±ì´ ìˆë‹¤. ì´ë¥¼ DTOë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•´ë³´ì.</p>

<h4 id="ë‹¤ëŒ€ë‹¤-ê´€ê³„-ê´€ë¦¬">ë‹¤ëŒ€ë‹¤ ê´€ê³„ ê´€ë¦¬</h4>

<p><code class="language-plaintext highlighter-rouge">Post</code> ì™€ <code class="language-plaintext highlighter-rouge">Comment</code> ì˜ ê´€ê³„ëŠ” ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¡œ ë³¼ ìˆ˜ ìˆë‹¤. ìƒˆë¡œìš´ entity ì¸ <code class="language-plaintext highlighter-rouge">Comment</code> ë¥¼ ì •ì˜í•˜ì</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"COMMENTS"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Comment</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span><span class="o">=</span><span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">description</span><span class="o">;</span>
<span class="o">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">Post</code> ì™€ <code class="language-plaintext highlighter-rouge">Comment</code> ëŠ” ì„œë¡œ ë‹¤ëŒ€ë‹¤ ì´ê¸° ë•Œë¬¸ì— ì´ë¥¼ êµ¬í˜„í•´ì£¼ë ¤ë©´ ë‘ ë„ë©”ì¸ì„ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ë‹´ì€ ì¡°ì¸ í…Œì´ë¸”ì´ ë”°ë¡œ í•„ìš”í•˜ë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">POSTS_COMMENTS</code> ë¼ëŠ” ì¡°ì¸í…Œì´ë¸”ì„ ë§Œë“¤ì–´ì„œ ë‘ ê°’ì˜ pk ë“¤ì„ ëª¨ìœ¼ë©´ ëœë‹¤.</p>

<pre><code class="language-mermaid">erDiagram
    POSTS ||--o{ POST_COMMENT : ""
    COMMENTS ||--o{ POST_COMMENT : ""
    POST_COMMENT {
        long post_id FK "Post's ID"
        long comment_id FK "Comment's ID"
    }

    POSTS {
        Long id PK
        String title
        String content
        DATETIME createdAt
    }

    COMMENTS {
        long id PK
        String name
        String description
    }
</code></pre>

<p>ìŠ¤í‚¤ë§ˆë¥¼ ìœ„ì²˜ëŸ¼ ìˆ˜ì •í•´ì£¼ê³  ë” ê¸°ì¤€ì´ ë˜ëŠ” ì£¼ì²´ì˜ ì—”í‹°í‹° ì •ì˜ë¥¼ ìˆ˜ì •í•´ì£¼ì.</p>

<h5 id="manytomany">@ManyToMany</h5>

<p>JPA ì—ì„œ ì§€ì›í•´ì£¼ëŠ” ì• ë„ˆí…Œì´ì…˜ì´ê³  ë‘ í…Œì´ë¸” ê°„ì˜ ì—°ê´€ì„±ì„ í‘œì‹œí•´ì¤„ ìˆ˜ ìˆë‹¤. DB ìì²´ì—ì„œëŠ” ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì§€ì •í•´ì¤„ ìˆ˜ ì—†ê³ , ì´ë¥¼ JPAê°€ ìë™ìœ¼ë¡œ ê´€ë¦¬í•˜ë„ë¡ í•˜ê²Œ í•´ì¤€ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Post</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="nd">@ManyToMany</span>
    <span class="kd">private</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Comment</span><span class="o">&gt;</span> <span class="n">comments</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;();</span>
<span class="o">}</span></code></pre></figure>

<p>ë©¤ë²„ ë³€ìˆ˜ë¡œ ìœ„ì™€ ê°™ì´ ì§€ì •í•´ì£¼ë©´ ëœë‹¤. ë§¤í•‘ì´ ë˜ëŠ” ì—”í‹°í‹°ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•´ì¤€ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Comment</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="nd">@ManyToMany</span><span class="o">(</span><span class="n">mappedBy</span><span class="o">=</span><span class="s">"comments"</span><span class="o">)</span> <span class="c1">// ì†Œìœ ìì˜ ë©¤ë²„ ë³€ìˆ˜ëª…ì„ ë„£ì–´ì¤˜ì•¼ í•¨</span>
    <span class="kd">private</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Post</span><span class="o">&gt;</span> <span class="n">posts</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;();</span>
<span class="o">}</span></code></pre></figure>

<p>ë‹¤ëŒ€ë‹¤ì˜ ê´€ê³„ì—ì„œëŠ” í•­ìƒ ì†Œìœ ìì™€ ë¹„ì†Œìœ ìê°€ ì¡´ì¬í•˜ì—¬ì„œ ì†Œìœ ìëŠ” ê´€ê³„ë¥¼ ì†Œìœ í•˜ëŠ” ì…ì¥ì´ê³ , ë¹„ì†Œìœ ìëŠ” ì°¸ì¡°ë˜ëŠ” ì…ì¥ì´ë‹¤. ë°˜ë©´ì— ì¼ëŒ€ë‹¤ì—ì„œëŠ” ë‹¤ ìª½ì´ ì†Œìœ ìì´ì–´ì•¼ í•˜ê³ , ì¼ ìª½ì´ ì†Œìœ ìê°€ ëœë‹¤ë©´ ë‹¤ ìª½ì„ ê°€ë¥´í‚¤ëŠ” ì°¸ì¡° ì—¬ëŸ¬ ê°œë¥¼ ê´€ë¦¬í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë³µì¡í•´ì§„ë‹¤.</p>

<p>ë‹¤ëŒ€ë‹¤ì—ì„œëŠ” ì—”í‹°í‹°ì˜ ì˜ë¯¸ë¥¼ íŒŒì•…í•˜ì—¬ì„œ ì–´ë–¤ ìª½ì„ ì†Œìœ ìë¡œ í• ì§€ë¥¼ ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>

<h5 id="jointable">@JoinTable</h5>

<p>ê´€ê³„ì˜ ì†Œìœ ì ìª½ì— ë§¤í•‘ í…Œì´ë¸” ì •ë³´ë¥¼ ì§€ì •í•´ì„œ ì¡°ì¸ í…Œì´ë¸”ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ JoinTableì´ ì§€ì •ë˜ì–´ì§€ì§€ ì•Šìœ¼ë©´ <strong>ê¸°ë³¸ì ìœ¼ë¡œ ì†Œìœ ì ìª½ í…Œì´ë¸” ì´ë¦„ê³¼ ë¹„ì†Œìœ ì ìª½ í…Œì´ë¸” ì´ë¦„ì„ _ë¡œ ì—°ê²°í•œ í…Œì´ë¸”ì´ ìë™ì ìœ¼ë¡œ ìƒì„±ëœë‹¤.</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Post</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="nd">@ManyToMany</span>
    <span class="nd">@JoinTable</span><span class="o">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s">"POSTS_COMMENTS"</span><span class="o">,</span>
            <span class="n">joinColumns</span> <span class="o">=</span> <span class="o">{</span><span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"post_id"</span><span class="o">,</span> <span class="n">referencedColumnName</span><span class="o">=</span><span class="s">"id"</span><span class="o">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">updatable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)},</span>
            <span class="n">inverseJoinColumns</span> <span class="o">=</span> <span class="o">{</span><span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">"comment_id"</span><span class="o">,</span> <span class="n">referencedColumnName</span><span class="o">=</span><span class="s">"id"</span><span class="o">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">updatable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)}</span>
    <span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Comment</span><span class="o">&gt;</span> <span class="n">comments</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashSet</span><span class="o">&lt;&gt;();</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">joinColumns</code> ì†ì„±ê³¼ <code class="language-plaintext highlighter-rouge">inverseJoinColumns</code> ì†ì„±ì„ í†µí•´ ì¡°ì¸ í…Œì´ë¸”ì˜ ì†Œìœ ì ìª½ì¸ <code class="language-plaintext highlighter-rouge">POSTS</code> í…Œì´ë¸”ì˜ ì‹ë³„ì ì»¬ëŸ¼ì„ ê°€ë¦¬í‚¤ëŠ” ì™¸ë˜ í‚¤ë¥¼ ì§€ì •í•  ìˆ˜ ìˆê³ , <code class="language-plaintext highlighter-rouge">inverseJoinColumns</code> ëŠ” ì¡°ì¸ í…Œì´ë¸”ì˜ ë¹„ì†Œìœ ì ìª½ì˜ <code class="language-plaintext highlighter-rouge">COMMENTS</code> í…Œì´ë¸”ì˜ ì™¸ë˜ í‚¤ë¥¼ ì°¸ì¡°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ <code class="language-plaintext highlighter-rouge">updatable</code> ì´ë‚˜ <code class="language-plaintext highlighter-rouge">nullable</code> ì„ í†µí•´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ í•´ë‹¹ ê°’ì„ ë³€ê²½í•˜ê±°ë‚˜ null ê°’ì„ ë§Œë“¤ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆë‹¤.</p>

<p>ì´ì œ DTO ë¥¼ ì •ì˜í•˜ì—¬ í•´ë‹¹ <code class="language-plaintext highlighter-rouge">JoinTable</code> ì— ëŒ€í•œ í•„ìš”í•œ í•„ë“œë§Œ ì¡°íšŒí•˜ë„ë¡ í•´ë³´ì.</p>

<h5 id="dto-í´ë˜ìŠ¤ë¥¼-ì‚¬ìš©í•œ-projection">DTO í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•œ Projection</h5>

<p>ìš°ì„  ì£¼ê³  ë°›ê²Œ ë  ë¶ˆë³€ í´ë˜ìŠ¤ DTO ë¥¼ ì„ ì–¸í•´ì£¼ì. ë¶ˆë³€ì´ê¸° ë•Œë¬¸ì— ìµœì‹  ë¬¸ë²•ì¸ <code class="language-plaintext highlighter-rouge">record</code> ë¥¼ ì¨ì„œ ì„ ì–¸í•´ì£¼ì.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">record</span> <span class="nf">PostInfo</span><span class="o">(</span>
        <span class="kt">long</span> <span class="n">id</span><span class="o">,</span>
        <span class="nc">String</span> <span class="n">postTitle</span><span class="o">,</span>
        <span class="nc">String</span> <span class="n">postContent</span><span class="o">,</span>
        <span class="nc">String</span> <span class="n">commentName</span><span class="o">,</span>
        <span class="nc">String</span> <span class="n">commentDescription</span>
<span class="o">)</span> <span class="o">{</span>
<span class="o">}</span></code></pre></figure>

<p>ì´ì œ ì´ë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ repository ì— ë‹¤ìŒì„ ì¶”ê°€í•´ì¤€ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="nd">@Query</span><span class="o">(</span><span class="s">"SELECT new com.example.study.dao.dto.PostInfo(p.id, p.title, p.content, c.name, c.description) "</span> <span class="o">+</span>
            <span class="s">"FROM Post p JOIN p.comments c"</span><span class="o">)</span>
    <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">PostInfo</span><span class="o">&gt;</span> <span class="nf">getPostInfo</span><span class="o">();</span></code></pre></figure>

<p>pì—ì„œ ì¼ë˜ comments ë¥¼ í†µí•´ <strong>HQL</strong> ë¥¼ Join ê³¼ í•¨ê»˜ ì“¸ ìˆ˜ ìˆê³ , Joinì´ ë“¤ì–´ê°ê³¼ ë™ì‹œì— ì •ì˜í–ˆë˜ JoinTableì„ ì°¸ê³ í•˜ì—¬ ë§ëŠ” recordì— ëŒ€í•´ì„œ ì „ë¶€ ê°’ë“¤ì„ ë“¤ê³ ì˜¤ê²Œ ëœë‹¤.</p>

<p><strong>í…ŒìŠ¤íŠ¸</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="nd">@BeforeEach</span>
    <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Post</span> <span class="n">post1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Post</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2000</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="mi">59</span><span class="o">),</span> <span class="s">"title"</span><span class="o">,</span> <span class="s">"content"</span><span class="o">);</span>
        <span class="nc">Post</span> <span class="n">post2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Post</span><span class="o">(</span><span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">(),</span> <span class="s">"NOW"</span><span class="o">,</span> <span class="s">"THIS IS NOW"</span><span class="o">);</span>

        <span class="nc">Comment</span> <span class="n">comment1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Comment</span><span class="o">(</span><span class="s">"HI"</span><span class="o">,</span> <span class="s">"WORLD"</span><span class="o">);</span>
        <span class="nc">Comment</span> <span class="n">comment2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Comment</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">,</span> <span class="s">"World!"</span><span class="o">);</span>

        <span class="n">post1</span><span class="o">.</span><span class="na">getComments</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">comment1</span><span class="o">);</span>
        <span class="n">post1</span><span class="o">.</span><span class="na">getComments</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">comment2</span><span class="o">);</span>

        <span class="n">postRepository</span><span class="o">.</span><span class="na">saveAll</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">post1</span><span class="o">,</span> <span class="n">post2</span><span class="o">));</span>
        <span class="n">commentRepository</span><span class="o">.</span><span class="na">saveAll</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">comment1</span><span class="o">,</span> <span class="n">comment2</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Iterable</span><span class="o">&lt;</span><span class="nc">PostInfo</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">postRepository</span><span class="o">.</span><span class="na">getPostInfo</span><span class="o">();</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\n\n\n\n"</span><span class="o">);</span>
        <span class="n">list</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">postInfo</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">postInfo</span><span class="o">.</span><span class="na">toString</span><span class="o">()));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\n\n\n\n"</span><span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<hr />

<h2 id="ï¸-ìš©ì–´">âœ’ï¸ ìš©ì–´</h2>

<h6 id="orm">ORM</h6>

<p>ê°ì²´ì™€ DB í…Œì´ë¸”ì„ ë§¤í•‘í•˜ì—¬ ê°ì²´ ì§€í–¥ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê¸°ìˆ ì´ë‹¤. SQLì„ ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ê°ì²´ë¥¼ í†µí•´ ë°ì´í„° ì¡°ì‘ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<blockquote>
  <p>ì˜ˆ) ìë°” í´ë˜ìŠ¤ì˜ Member ì •ì˜ì™€ DBì˜ member í…Œì´ë¸”ì´ ìë™ìœ¼ë¡œ ë§¤í•‘ë¨</p>
</blockquote>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1L</span><span class="o">);</span></code></pre></figure>

<h6 id="java-database-connectivity-jdbc">Java Database Connectivity (JDBC)</h6>

<p>ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤(RDBMS)ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” <strong>ìë°” í‘œì¤€ API</strong>ì´ë‹¤.<br />
ìë°” ì½”ë“œì—ì„œ <strong>SQLì„ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥</strong>ì„ ì œê³µí•˜ëŠ” ì €ìˆ˜ì¤€ì˜ DB ì—°ê²° ë„êµ¬ì´ë‹¤.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"SELECT * FROM member WHERE id = ?"</span><span class="o">;</span>
<span class="nc">PreparedStatement</span> <span class="n">pstmt</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
<span class="n">pstmt</span><span class="o">.</span><span class="na">setLong</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1L</span><span class="o">);</span>
<span class="nc">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="n">pstmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span></code></pre></figure>

<p>JPA(ORM)ë¥¼ ì‚¬ìš©í•œ ì½”ë“œì™€ ë¹„êµí•´ ë³´ë©´, JDBCëŠ” SQLê³¼ ì—°ê²° ì½”ë“œ(ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸)ë¥¼ <strong>ì§ì ‘ ëª…ì‹œí•´ì•¼</strong> í•˜ëŠ” ë°˜ë©´, JPAëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ë©”ì„œë“œ(<code class="language-plaintext highlighter-rouge">find</code>, <code class="language-plaintext highlighter-rouge">persist</code>, <code class="language-plaintext highlighter-rouge">remove</code> ë“±)ë¥¼ í†µí•´ <strong>ê°„ê²°í•˜ê³  ì¶”ìƒí™”ëœ ì½”ë“œë¡œ DBë¥¼ ë‹¤ë£° ìˆ˜ ìˆë‹¤.</strong></p>

<h6 id="preparedstatement">PreparedStatement</h6>

<p>JDBCì—ì„œ <strong>SQL êµ¬ë¬¸ì„ ë¯¸ë¦¬ ì»´íŒŒì¼</strong>í•˜ì—¬ ì‹¤í–‰í•˜ëŠ” ê°ì²´ì´ë‹¤.<br />
<strong>SQL Injection</strong> ë°©ì§€, ì„±ëŠ¥ í–¥ìƒ ë“±ì˜ ì¥ì ì´ ìˆìœ¼ë©°,<br />
<strong>ë™ì  íŒŒë¼ë¯¸í„°ë¥¼ ì•ˆì „í•˜ê²Œ ë°”ì¸ë”©</strong>í•  ìˆ˜ ìˆë‹¤.</p>

<h6 id="connection-pool">Connection Pool</h6>

<p>DBë¥¼ ì—°ê²°í•  ë•ŒëŠ” ë„¤íŠ¸ì›Œí¬ ì—°ê²°, ì‚¬ìš©ì ì¸ì¦, ì„¸ì…˜ ì„¤ì • ë“± ë§ì€ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤. ë§¤ ìš”ì²­ë§ˆë‹¤ ì´ë¥¼ ìƒˆë¡œí•˜ê²Œ ë˜ë©´ ì†ë„ ì €í•˜, ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ê°€ ëœë‹¤.</p>

<p>í•œ ë²ˆë§Œ ë§Œë“¤ì–´ë†“ê³  ì¬ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì»¤ë„¥ì…˜ í’€ì„ ìƒì„±í•˜ë©´, ìŠ¤ë ˆë“œë¥¼ ì—¬ëŸ¬ ê°œ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìë“¤ì´ ì—¬ëŸ¬ëª… ìˆì–´ë„ ìƒˆë¡œ ìƒì„±í•˜ì§€ ì•Šê³ , ìŠ¤ë ˆë“œë¥¼ í•˜ë‚˜ êº¼ë‚´ì„œ ì‚¬ìš©í•˜ê³  ë‹¤ ì‚¬ìš©í•˜ë©´ í’€ì— ë°˜ë‚©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ë™í•œë‹¤.</p>

<p>ì´ë ‡ê²Œ í•˜ë©´ DB ì—°ê²° ì†ë„ê°€ í–¥ìƒë˜ë©°, ë¦¬ì†ŒìŠ¤ ì ˆì•½ì´ ëœë‹¤. Spring Bootì—ì„œëŠ” HikariCP ë¼ëŠ” ì»¤ë„¥ì…˜ í’€ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ”ë°, tomcat-jdbcì˜ ì»¤ë„¥ì…˜ í’€ì„ ì‚¬ìš©í•´ë„ ëœë‹¤. ì·¨í–¥ ì°¨ì´ì´ë‹¤.</p>

<blockquote>
  <p>ì˜ˆ: maximum-pool-size í”„ë¡œí¼í‹°ê°€ 10, ìœ ì €ê°€ ë™ì‹œ ì ‘ê·¼ì´ 11ëª…, 1ëª…ì€ ìŠ¤ë ˆë“œ(ìì›)ì´ ë°˜í™˜ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•¨.</p>
</blockquote>

<h6 id="marker-interface">Marker Interface</h6>

<p>ë§ ê·¸ëŒ€ë¡œ â€˜í‘œì‹â€™ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ì•„ë¬´ ë©”ì„œë“œë„ ìˆ˜í–‰í•˜ì§€ ì•Šê³  ì´ëŸ° ì¸í„°í˜ì´ìŠ¤ì´ë‹¤ ë¼ëŠ” ë©”íƒ€ ë°ì´í„°ë§Œ ì£¼ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•œë‹¤. ë³´í†µ java ë¥¼ ëœ¯ì–´ë‚´ë‹¤ ë³´ë©´ ë‹¤ìŒì„ ë³¼ ìˆ˜ ìˆëŠ”ë° ë‹¤ìŒë„ ë§ˆì»¤ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.</p>

<ul>
  <li>Serializable</li>
  <li>Cloneable</li>
  <li>Remote</li>
</ul>

<p>í•´ë‹¹ interfaceë¥¼ í†µí•´ JVM í˜¹ì€ í”„ë ˆì„ì›Œí¬ ë‹¨ì—ì„œ ì¡°ê±´ ë¶„ê¸° ì²˜ë¦¬ê°€ ê°€ëŠ¥í•´ì§€ë¯€ë¡œ ê°€ë…ì„±ê³¼ ë™ì‘ ì œì–´ê°€ ë›°ì–´ë‚˜ë‹¤.</p>


    </div><div id="disqus_thread" style="margin-top:25px"></div>
    <script>
    var disqus_config = function () {
        this.page.url = 'https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/07/27/7.-spring-data.html';
        this.page.identifier = 'https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/07/27/7.-spring-data.html';
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = 'https://seonghun.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
    <noscript>Please enable JavaScript to view the <a
            href="https://disqus.com/?ref_noscript" rel="nofollow">comments
            powered by Disqus.</a></noscript></div>
<script>
    mermaid.initialize({startOnLoad:true});
    window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
</script>
            </section>
            <footer class="condensed">
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </footer>
        </main>
        
        <script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>
        
        <script src="/seonghun120614/assets/js/simple-jekyll-search.min.js"></script>
        <script src="/seonghun120614/assets/js/search.js"></script>
        
        <script>
            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                document.getElementById('scroll-progress').style.width = scrollPercent + '%';
            });
        </script>
    </body>
</html>