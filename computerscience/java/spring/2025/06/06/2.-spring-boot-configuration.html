<!DOCTYPE html>
<html lang="kor">

    <head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="icon" href="/seonghun120614/assets/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/seonghun120614/assets/css/style.css">
<title>2. Spring Boot Configuration</title>
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Spring Boot Configuration | Seonghun’s Blog</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Spring Boot Configuration" />
<meta name="author" content="Seonghun Park" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Spring Application 구성 정보 설정 및 properties 파일 세팅" />
<meta property="og:description" content="Spring Application 구성 정보 설정 및 properties 파일 세팅" />
<link rel="canonical" href="https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/06/06/2.-spring-boot-configuration.html" />
<meta property="og:url" content="https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/06/06/2.-spring-boot-configuration.html" />
<meta property="og:site_name" content="Seonghun’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-06-06T05:20:04+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Spring Boot Configuration" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Seonghun Park"},"dateModified":"2025-06-06T05:20:04+00:00","datePublished":"2025-06-06T05:20:04+00:00","description":"Spring Application 구성 정보 설정 및 properties 파일 세팅","headline":"Spring Boot Configuration","mainEntityOfPage":{"@type":"WebPage","@id":"https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/06/06/2.-spring-boot-configuration.html"},"url":"https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/06/06/2.-spring-boot-configuration.html"}</script>
<!-- End Jekyll SEO tag -->


<script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>

<!-- Mermaid -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RQTWJRLWGD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-RQTWJRLWGD');
</script></head><script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggle = document.getElementById("dark-toggle");
        
            // 이미 실행한 적 있는지 확인
            const hasToggled = localStorage.getItem("darkModeInitialized");
        
            if (!hasToggled && toggle && toggle.checked) {
                toggleDarkMode();
                localStorage.setItem("darkModeInitialized", "true"); // 최초 실행 기록
            }
        });
    </script>

    <body>
        <div id="scroll-progress"></div>
        <main class="container">
            <section class="about">
                <div class="about-header condensed">
                    <div class="about-title">
                        <a href="/seonghun120614/">
                            
                            <img class="light"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            <img class="dark"
                                src="/seonghun120614/assets/portfolio.png"
                                alt="Seonghun Park" />
                            
                        </a>
                        <h2 id="title">
                            <a href="/seonghun120614/">Seonghun Park</a>
                        </h2>
                    </div><p class="tagline">Developer.</p></div>
                
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </section>
            <section class="content">
                <script>
window.MathJax = {
    tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
    },
    options: {
    renderActions: {
        addMenu: []
    }
    }
};
</script>

<script type="text/javascript"
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script><div class="post-container">
    <a class="post-link" href="/seonghun120614/computerscience/java/spring/2025/06/06/2.-spring-boot-configuration.html">
        <h2 class="post-title">2. Spring Boot Configuration</h2>
    </a>
    
    <div class="post-meta">
        <div class="post-date"><i class="icon-calendar"></i>Jun 6, 2025</div><ul class="post-categories"><li>ComputerScience</li><li>Java</li><li>Spring</li></ul></div>

    <div class="post">
        <!--more-->
<p>Spring Application 구성 정보 설정 및 properties 파일 세팅</p>

<h2 id="-한계점">🪛 한계점</h2>

<p>Application 의 설정값만 바꿔 기능을 서비스와 환경에 맞게 조절하는게 필요하다.</p>

<hr />

<h2 id="-목차">📂 목차</h2>
<ul>
  <li><a href="#spring-application-의-setdefaultproperties-메서드로-구성-정보-설정하기">Spring Application 의 setDefaultProperties() 메서드로 구성 정보 설정하기</a></li>
  <li><a href="#spring-application-의-properties-파일로-구성-정보-설정하기">Spring Application 의 properties 파일로 구성 정보 설정하기</a>
    <ul>
      <li><a href="#properties-파일을-propertysource-로-매핑시켜-코드-단에서-다루기">properties 파일을 @PropertySource 로 매핑시켜 코드 단에서 다루기</a></li>
      <li><a href="#cli-수준에서-구성-정보를-설정하기">CLI 수준에서 구성 정보를 설정하기</a></li>
    </ul>
  </li>
  <li><a href="#구성-정보-집합-configuration-의-정보를-출력해보기">구성 정보 집합 Configuration 의 정보를 출력해보기</a>
    <ul>
      <li><a href="#environmentcapable-인터페이스">@EnvironmentCapable 인터페이스</a></li>
      <li><a href="#propertyresolver-인터페이스">@PropertyResolver 인터페이스</a></li>
    </ul>
  </li>
  <li><a href="#applicationproperties-를-읽는-위치">application.properties 를 읽는 위치</a></li>
  <li><a href="#내부적-설정-파일-우선-순위">내부적 설정 파일 우선순위</a></li>
  <li><a href="#총체적-설정-파일-우선-순위">총체적 설정 파일 우선순위</a></li>
</ul>

<hr />

<h2 id="-본문">📚 본문</h2>

<p>개발, 테스트, 스테이징, 상용 환경 등의 여러 환경에서 어플리케이션의 설정 정보를 다르게 가져갈 수 있게 해야한다. 이는 어플리케이션이 비대해지면서 더 관리하기 어려워진다. 해야 할 것은 <strong>환경이 달라지면 어플리케이션 소스코드는 거의 달라지지 않아야</strong> 하며, 보안 설정, DB 초기화, DB 설정 정보 등이 관리되어야 한다.</p>

<h3 id="spring-application-의-setdefaultproperties-메서드로-구성-정보-설정하기">Spring Application 의 setDefaultProperties() 메서드로 구성 정보 설정하기</h3>

<p>Spring Boot 는 SpringApplication 클래스를 사용하여 어플리케이션 설정 정보를 저장한다. 클래스 자체가 <code class="language-plaintext highlighter-rouge">setDefaultProperties()</code> 메서드로 <code class="language-plaintext highlighter-rouge">Properties</code> 혹은 <code class="language-plaintext highlighter-rouge">Map&lt;String, Object&gt;</code> 의 인자를 받고 메서드 호출 시 설정 정보가 어플리케이션에 적용된다. 아래는 설정 정보를 코드 단에서 정의하는 과정이다.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.springframework.boot.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleApplication</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SpringApplication</span> <span class="n">springApplication</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SpringApplication</span><span class="o">(</span><span class="nc">ExampleApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="nc">Properties</span> <span class="n">properties</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Properties</span><span class="o">();</span>

        <span class="n">properties</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"spring.config.import"</span><span class="o">,</span> <span class="s">"additional-application.properties"</span><span class="o">);</span>
        <span class="n">properties</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">"spring.config.test"</span><span class="o">,</span> <span class="s">"hi"</span><span class="o">);</span>

        <span class="n">springApplication</span><span class="o">.</span><span class="na">setDefaultProperties</span><span class="o">(</span><span class="n">properties</span><span class="o">);</span>

        <span class="n">springApplication</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>소스코드로 적용하면 한 번 정의 시 나중에 바뀌지 않기 때문에 <strong>나중에 변경안해도 되는 설정 정보</strong>만 넣는게 좋다.</p>

<hr />

<h3 id="spring-application-의-properties-파일로-구성-정보-설정하기">Spring Application 의 properties 파일로 구성 정보 설정하기</h3>

<p><code class="language-plaintext highlighter-rouge">application.properties</code> 를 통해 설정 정보를 key/value 형식으로 정의 가능하다.</p>

<table>
  <thead>
    <tr>
      <th>key</th>
      <th>value</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">server.shutdown</code></td>
      <td><strong>graceful</strong>, immediate</td>
      <td>immediate가 기본값이며, 실행 중인 요청에 대해 즉시 끊을지, 아니면 요청을 완료하고 끊을지 여부</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">spring.lifecycle.timeout-per-shutdown-phase</code></td>
      <td>ISO-8601 duration-like 표기법</td>
      <td>graceful shutdown 에 대해 요청 완료를 기다리는 시간을 설정한다.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">server.port</code></td>
      <td>[open port number]</td>
      <td>어떤 열려 있는 포트 번호로 request 를 받을지 설정, 기본 8080</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">spring.config.import</code></td>
      <td><a href="#classpath">classpath</a>:(파일명).properties</td>
      <td>해당 파일의 설정 정보를 읽어 반영한다.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">spring.config.on-not-found</code></td>
      <td>ignore, warn, fail</td>
      <td>설정 파일의 부재에 대한 피드백, 기본값은 ignore</td>
    </tr>
    <tr>
      <td>…</td>
      <td>…</td>
      <td>…</td>
    </tr>
  </tbody>
</table>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="c"># application.properties
</span><span class="py">spring.application.name</span><span class="p">=</span><span class="s">study</span>
<span class="py">server.port</span><span class="p">=</span><span class="s">8080</span>
<span class="py">server.shutdown</span><span class="p">=</span><span class="s">graceful</span>
<span class="py">spring.lifecycle.timeout-per-shutdown-phase</span><span class="p">=</span><span class="s">1m</span>

<span class="py">spring.config.import</span><span class="p">=</span><span class="s">classpath:additional-application.properties</span>
<span class="py">spring.config.on-not-found</span><span class="p">=</span><span class="s">ignore</span>

<span class="c"># Logger 에서 나중에 다룸
</span><span class="py">logging.level.root</span><span class="p">=</span><span class="s">INFO</span>
<span class="py">logging.level.com.example</span><span class="p">=</span><span class="s">DEBUG</span>
<span class="py">logging.file.name</span><span class="p">=</span><span class="s">app.log</span>

<span class="c"># DB / JPA Configure 나중에 다룸
</span><span class="py">spring.datasource.url</span><span class="p">=</span><span class="s">jdbc:h2:mem:study</span>
<span class="py">spring.datasource.username</span><span class="p">=</span><span class="s">root</span>
<span class="py">spring.datasource.password</span><span class="p">=</span>
<span class="py">spring.datasource.driverClassName</span><span class="p">=</span><span class="s">org.h2.Driver</span>

<span class="py">spring.jpa.hibernate.ddl-auto</span><span class="p">=</span><span class="s">update</span>
<span class="py">spring.jpa.show-sql</span><span class="p">=</span><span class="s">true</span>
<span class="py">spring.jpa.properties.hibernate.format_sql</span><span class="p">=</span><span class="s">true</span>

<span class="c"># 웹 서버 설정
</span><span class="py">server.servlet.contextPath</span><span class="p">=</span><span class="s">/api</span>
<span class="py">server.error.includeMessage</span><span class="p">=</span><span class="s">always</span>
<span class="py">server.compression.enabled</span><span class="p">=</span><span class="s">true</span>

<span class="c"># Cache 설정
</span><span class="py">spring.cache.type</span><span class="p">=</span><span class="s">simple</span>
<span class="py">spring.cache.cache-names</span><span class="p">=</span><span class="s">users,products</span>
<span class="py">spring.cache.caffeine.spec</span><span class="p">=</span><span class="s">maximumSize=500,expireAfterWrite=60s</span>

<span class="c"># Security
</span><span class="py">spring.security.user.name</span><span class="p">=</span><span class="s">admin</span>
<span class="py">spring.security.user.password</span><span class="p">=</span><span class="s">1234</span>
<span class="py">spring.security.user.roles</span><span class="p">=</span><span class="s">USER,ADMIN</span>

<span class="c"># Actuator
</span><span class="py">management.endpoints.web.exposure.include</span><span class="p">=</span><span class="s">*</span>
<span class="py">management.endpoint.shutdown.enabled</span><span class="p">=</span><span class="s">true</span>
<span class="py">management.server.port</span><span class="p">=</span><span class="s">9091</span>

<span class="c"># File
</span><span class="py">spring.servlet.multipart.max-file-size</span><span class="p">=</span><span class="s">10MB</span>
<span class="py">spring.servlet.multipart.max-request-size</span><span class="p">=</span><span class="s">20MB</span>

<span class="c"># Message
</span><span class="py">spring.messages.basename</span><span class="p">=</span><span class="s">messages</span>
<span class="py">spring.messages.encoding</span><span class="p">=</span><span class="s">UTF-8</span>
<span class="err">...</span></code></pre></figure>

<p>추후에 다룬다.</p>

<h4 id="properties-파일을-propertysource-로-매핑시켜-코드-단에서-다루기">properties 파일을 @PropertySource 로 매핑시켜 코드 단에서 다루기</h4>

<p>위처럼 정적으로 properties 파일을 생성해서 key-value 를 입력 할 수도 있는데, 코드 단에서 이 설정 정보들을 가져오고 싶으면 class 로의 매핑을 시키게 할 수 있다.</p>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="c"># custom-application.properties
</span><span class="py">username</span><span class="p">=</span><span class="s">sa</span>
<span class="py">password</span><span class="p">=</span><span class="s">1234</span></code></pre></figure>

<p>위와 같이 세팅해주자.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.*</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="s">"classpath:custom-application.properties"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomConfiguration</span> <span class="o">{</span> <span class="o">}</span></code></pre></figure>

<p>이제 실행 시 Spring 은 <code class="language-plaintext highlighter-rouge">@Configuration</code> 가 붙은 클래스들을 환경 설정으로 받아들이고, <code class="language-plaintext highlighter-rouge">@PropertySource</code> 애너테이션을 통해 클래스패스의 <code class="language-plaintext highlighter-rouge">custom-application.properties</code> 를 가져와 구성 정보를 읽어 등록시키게 된다.</p>

<h4 id="cli-수준에서-구성-정보를-설정하기">CLI 수준에서 구성 정보를 설정하기</h4>

<p><code class="language-plaintext highlighter-rouge">./gradle build</code> 작업을 수행 시 빌드된 파일 .jar 이 생성됨을 볼 수 있는데, 해당 .jar은 executable 하며 이를 실행하기 위해서는 <code class="language-plaintext highlighter-rouge">java -jar (경로).jar</code> 을 터미널에 입력해주면 된다.</p>

<p>실행 시 root 의 <code class="language-plaintext highlighter-rouge">/build/libs/</code> 에 .jar 파일 2개가 생성됨을 볼 수 있다. -plain이 붙은 것은 
Spring Boot 실행에 필요한 의존성을 포함하지 않은 순수 클래스 파일만 들어있는 JAR 이다. 따라서 실행이 불가하고,
다른 .jar 파일이 executable 하다. 해당 build를 할때 파일명을 지정해주고 싶다면,</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// build.gradle</span>
<span class="n">tasks</span><span class="o">.</span><span class="na">named</span><span class="o">(</span><span class="err">'</span><span class="n">bootJar</span><span class="err">'</span><span class="o">)</span> <span class="o">{</span>
	<span class="n">archiveFileName</span> <span class="o">=</span> <span class="err">'</span><span class="n">myapp</span><span class="o">.</span><span class="na">jar</span><span class="err">'</span>
<span class="o">}</span></code></pre></figure>

<p>를 입력해준다.</p>

<p>이제 <code class="language-plaintext highlighter-rouge">java -jar /build/libs/myapp.jar</code> 을 통해 실행시키면 정상적으로 서버가 올라감을 볼 수 있다.
여기서 test 없이 build를 하고 싶을 수도 있는데, 이때는 <code class="language-plaintext highlighter-rouge">./gradle build -x test</code>로 옵션을 준다.</p>

<p>CLI에서 서버를 구동시킬 때에도 인자를 주어서 args에 전달을 해 직접적으로 구성 정보를 수정 할 수도 있다.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">java <span class="nt">-jar</span> /build/libs/myapp.jar <span class="nt">--spring</span>.config.name<span class="o">=</span>thisisconfig</code></pre></figure>

<hr />

<h3 id="구성-정보-집합-configuration-의-정보를-출력해보기">구성 정보 집합 Configuration 의 정보를 출력해보기</h3>

<p>실행 후에 서버에서는 어떤 형태로 properties 가 존재하는지 추적이 되어야 한다. 실제로 적용이 완료가 되었는지 보고 싶다면 <code class="language-plaintext highlighter-rouge">run()</code> 의 반환값을 Context 로 받아서 Context 가 가지는 Environment Bean 을 들고와서 key 에 대한 값이 잘 있는지 봐야 한다.</p>

<h4 id="environmentcapable-인터페이스">@EnvironmentCapable 인터페이스</h4>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.springframework.boot.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.env.*</span><span class="o">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyApplication</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SpringApplication</span> <span class="n">springApplication</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SpringApplication</span><span class="o">(</span><span class="nc">MyApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">springApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>위를 통해 확인이 가능하다. 여기서 <code class="language-plaintext highlighter-rouge">ConfigurableApplicationContext</code> 인터페이스는 <code class="language-plaintext highlighter-rouge">ApplicationContext</code> 인터페이스를 상속받는다.</p>

<p><code class="language-plaintext highlighter-rouge">ApplicationContext</code> 인터페이스는 다시 <code class="language-plaintext highlighter-rouge">EnvironmentCapable</code>, <code class="language-plaintext highlighter-rouge">ListableBeanFactory</code>, <code class="language-plaintext highlighter-rouge">HierarchicalBeanFactory</code>, <code class="language-plaintext highlighter-rouge">MessageSource</code>, <code class="language-plaintext highlighter-rouge">ApplicationEventPublisher</code>, <code class="language-plaintext highlighter-rouge">ResourcePatternResolver</code> 인터페이스들을 상속받게 된다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ConfigurableApplicationContext</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ApplicationContext</code>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">EnvironmentCapable</code>,
  <code class="language-plaintext highlighter-rouge">ListableBeanFactory</code>,
  <code class="language-plaintext highlighter-rouge">HierarchicalBeanFactory</code>,
  <code class="language-plaintext highlighter-rouge">MessageSource</code>,
  <code class="language-plaintext highlighter-rouge">ApplicationEventPublisher</code>,
  <code class="language-plaintext highlighter-rouge">ResourcePatternResolver</code></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>각 의미는 다음과 같다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@EnvironmentCapable</code>: <code class="language-plaintext highlighter-rouge">Environment</code> 객체를 반환할 수 있는 기능을 제공, <code class="language-plaintext highlighter-rouge">getEnvironment()</code></li>
  <li><code class="language-plaintext highlighter-rouge">@ListenableBeanFactory</code>: 이름 기반 혹은 타입 기반으로 여러 개의 Bean 을 조회 할 수 있는 기능을 제공, <code class="language-plaintext highlighter-rouge">getBeansOfType(Class&lt;T&gt; type)</code>, <code class="language-plaintext highlighter-rouge">getBeanDefinitionNames()</code></li>
  <li><code class="language-plaintext highlighter-rouge">@HierarchicalBeanFactory</code>: 부모-자식 구조로 된 컨테이너 체계 지원, <code class="language-plaintext highlighter-rouge">getParentBeanFactory()</code>, <code class="language-plaintext highlighter-rouge">containsLocalBean(String name)</code></li>
  <li><code class="language-plaintext highlighter-rouge">@MessageSource</code>: 다국어 메시지(i18n)을 관리하는 인터페이스, <code class="language-plaintext highlighter-rouge">getMessage(String code, Object[] args, Locale locale)</code></li>
  <li><code class="language-plaintext highlighter-rouge">@ApplicationEventPublisher</code>: Spring 의 이벤트 발행기 인터페이스, <code class="language-plaintext highlighter-rouge">publishEvent(ApplicationEvent event)</code></li>
  <li><code class="language-plaintext highlighter-rouge">@ResourcePatternResolver</code>: 리소스 패턴을 통해 파일 등을 조회하는 기능을 제공, <code class="language-plaintext highlighter-rouge">getResource(String locationPattern)</code>, 용도는 file:, classpath: 등을 url에 쓸 수 있도록 하여 간편한 path 기능 제공</li>
</ul>

<p>우선은 <code class="language-plaintext highlighter-rouge">@EnvironmentCapable</code> 만 보자. 이를 통해 다음 메서드를 실행시킨다.</p>

<h4 id="propertyresolver-인터페이스">@PropertyResolver 인터페이스</h4>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.springframework.boot.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.env.*</span><span class="o">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyApplication</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SpringApplication</span> <span class="n">springApplication</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SpringApplication</span><span class="o">(</span><span class="nc">MyApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="n">springApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>

        <span class="nc">Environment</span> <span class="n">env</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getBean</span><span class="o">(</span><span class="nc">Environment</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\n\n\n"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"username"</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">env</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"password"</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\n\n\n"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">@Environment</code> 인터페이스는 <code class="language-plaintext highlighter-rouge">@PropertyResolver</code> 인터페이스를 상속받는다. PropertyResolver 는 말 그대로 String 으로 된 Property 정보를 key/value 로 잘 해석하여 객체로 변환하는 역할을 한다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@PropertyResolver</code>: 어플리케이션 설정 값들을 다양한 소스에서 읽고, 가공하고, 변환하는 기능을 제공, <code class="language-plaintext highlighter-rouge">containsProperty(String key)</code>, <code class="language-plaintext highlighter-rouge">getProperty()</code>, <code class="language-plaintext highlighter-rouge">getRequiredProperty()</code>, <code class="language-plaintext highlighter-rouge">resolvePlaceholders()</code> 등의 메서드를 지원한다.</li>
</ul>

<p>실행시 제대로 출력됨을 볼 수 있다.</p>

<h3 id="applicationproperties-를-읽는-위치">application.properties 를 읽는 위치</h3>

<ol>
  <li><code class="language-plaintext highlighter-rouge">classpath:</code> 루트</li>
  <li><code class="language-plaintext highlighter-rouge">classpath:config</code> 패키지</li>
  <li><code class="language-plaintext highlighter-rouge">(현재 디렉터리)</code></li>
  <li><code class="language-plaintext highlighter-rouge">(현재 디렉터리)/config</code> 디렉터리</li>
  <li><code class="language-plaintext highlighter-rouge">/config</code> 디렉터리의 바로 하위 디렉터리</li>
</ol>

<p>의 범위이며, 이 위치 말고도 <code class="language-plaintext highlighter-rouge">spring.config.location</code> 프로퍼티를 사용하여 다른 설정 파일을 읽을 수 있다.
이는 CLI 로 타 구성정보를 불러오고 싶을때 유용하다. 상대경로(<code class="language-plaintext highlighter-rouge">src/main/resource/</code>로 시작), 절대경로가 가능하다.</p>

<p>그리고 만약 location 을 지정했는데 해당 파일이 부재 시에는 exception 이 발생하기 때문에 이런 예외를 발생시키고<br />
싶지 않다면 <code class="language-plaintext highlighter-rouge">--spring.config.location=optional:(경로)</code>로 CLI에 넣어주면 되겠다.</p>

<h3 id="내부적-설정-파일-우선-순위">내부적 설정 파일 우선 순위</h3>

<ol>
  <li>application JAR 파일 안의 application.properties 파일</li>
  <li>application JAR 파일 안의 application-{profile}.properties 파일</li>
  <li>application JAR 파일 밖의 application.properties 파일</li>
  <li>application JAR 파일 밖의 application-{profile}.properties 파일</li>
</ol>

<p>여기서 {profile} 은 <code class="language-plaintext highlighter-rouge">--spring.profiles.active={profile}</code>로 지정할 수 있다. 늦게 로딩되는 파일이 정보를 덮어쓰기 때문에 4번인 application JAR 파일 밖의 <code class="language-plaintext highlighter-rouge">application-{profile}.properties</code> 가 위의 파일들 보다 우선이다.</p>

<h3 id="총체적-설정-파일-우선-순위">총체적 설정 파일 우선 순위</h3>

<p>보통 스프링 부트하면 <code class="language-plaintext highlighter-rouge">properties</code> 에 설정된 정보를 읽어 사용하는게 관례이다.</p>

<p>하지만 만약 컴퓨터 자체의 환경 변수에 properties 에 정의된 변수 A가 정의되어 있다면,<br />
properties 에서 A를 어떤 값으로 정의한들, 환경 변수의 값을 우선으로 하여 값이 설정된다.</p>

<p>또한 환경 변수만 있는게 아니라 CLI 자체에서 args 로 넘겨주는 인자에서도 이를 설정할 수 있을 것이다.</p>

<p>따라서 정리하면 다음과 같다:</p>
<ol>
  <li><code class="language-plaintext highlighter-rouge">SpringApplication</code></li>
  <li><code class="language-plaintext highlighter-rouge">@PropertySource</code></li>
  <li>설정 정보 파일(<code class="language-plaintext highlighter-rouge">application.properties</code>)</li>
  <li>운영 체제 환경 변수(ENV)</li>
  <li>명령행 인자(CLI)</li>
</ol>

<hr />

<h2 id="-출처">🔗 출처</h2>
<ul>
  <li>도서 <a href="https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=279280319&amp;srsltid=AfmBOoqOq7s5PrLMTe6aMGBXVD7AjNczIgN0e57lelyEY76kueqPkxeK">Spring Boot in Practice</a></li>
</ul>

<hr />

<h2 id="️-용어">✒️ 용어</h2>

<h6 id="classpath">classpath</h6>

<p>JVM 이 리소스를 찾기 위해 검색하는 디렉토리, JAR 파일들의 경로 목록이며, Spring Boot 은 다음 폴더들을 포함한다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">src/main/java</code></li>
  <li><code class="language-plaintext highlighter-rouge">src/main/resources</code></li>
  <li><code class="language-plaintext highlighter-rouge">dependencies</code>: JAR 로 포함된 외부 라이브러리</li>
  <li><code class="language-plaintext highlighter-rouge">build/classes/java/main</code>: Gradle</li>
</ul>

<h6 id="springbootapplication">@SpringBootApplication</h6>

<p>SpringBootApplication 의 entry point 에 사용하는 애너테이션이며, 다음 애너테이션들을 포함한다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">@Configuration</code>: 이 클래스가 설정 클래스임을 명시</li>
  <li><code class="language-plaintext highlighter-rouge">@EnableAutoConfiguration</code>: 자동 설정 활성화하여 classpath 에 있는 라이브러리 기반으로 자동 Bean 등록</li>
  <li><code class="language-plaintext highlighter-rouge">@ComponentScan(basePackage="")</code>: 같은 패키지 및 하위 패키지를 스캔하여 Bean 으로 등록</li>
</ul>

<h6 id="bean">@Bean</h6>

<p>Spring 은 <strong>IoC</strong> 라는 컨테이너가 있는데, 이 컨테이너가 관리하는 대상 객체가 Bean 이다. <a href="/seonghun120614/java/spring/2025/06/06/subsidiary-bean-definition">글을 참고</a>하자.</p>


    </div><div id="disqus_thread" style="margin-top:25px"></div>
    <script>
    var disqus_config = function () {
        this.page.url = 'https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/06/06/2.-spring-boot-configuration.html';
        this.page.identifier = 'https://seonghun120614.github.io/seonghun120614/computerscience/java/spring/2025/06/06/2.-spring-boot-configuration.html';
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = 'https://seonghun.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
  </script>
    <noscript>Please enable JavaScript to view the <a
            href="https://disqus.com/?ref_noscript" rel="nofollow">comments
            powered by Disqus.</a></noscript></div>
<script>
    mermaid.initialize({startOnLoad:true});
    window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
</script>
            </section>
            <footer class="condensed">
                <ul class="social about-footer condensed"><li>
                        <a
                            href="https://github.com/seonghun120614"
                            target="_blank"
                            rel="noopener"
                            aria-label="github">
                            <i class="icon-github-circled"></i>
                        </a>
                    </li><li>
                        <a
                            href="mailto:seonghun120614@gmail.com"
                            target="_blank" rel="noopener" aria-label="email">
                            <i class="icon-mail-alt"></i>
                        </a>
                    </li></ul><nav class="navigation about-footer condensed">
                    <ul>
                        
                        <li>
                            <a href="/seonghun120614/about">About Me</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/computerscience">Computer Science</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/math">Math</a>
                        </li>
                        
                        <li>
                            <a href="/seonghun120614/categories/softwareengineering">Software Engineering</a>
                        </li>
                        
                    </ul>
                </nav><p class="about-footer condensed">&copy;
                    2025</p><div class="about-footer condensed">
                    <p>Dark Mode
                        <i class="icon-moon"></i>
                        <label class="switch" for="dark-toggle">
                            <input id="dark-toggle" type="checkbox"
                                class="dark-mode-toggle"
                                aria-label="Toggle dark mode">
                            <span class="slider round"
                                onclick="toggleDarkMode()"></span>
                        </label>
                    </p>
                </div>
            </footer>
        </main>
        
        <script type="text/javascript" src="/seonghun120614/assets/js/darkmode.js"></script>
        
        <script src="/seonghun120614/assets/js/simple-jekyll-search.min.js"></script>
        <script src="/seonghun120614/assets/js/search.js"></script>
        
        <script>
            window.addEventListener('scroll', () => {
                const scrollTop = window.scrollY;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollTop / docHeight) * 100;
                document.getElementById('scroll-progress').style.width = scrollPercent + '%';
            });
        </script>
    </body>
</html>